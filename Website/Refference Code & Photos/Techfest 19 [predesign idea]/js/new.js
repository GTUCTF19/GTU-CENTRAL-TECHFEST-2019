!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function r(){if(!u){u=!0;var t=new n,e=new a,i=new l;h.base(""),t.add(e),o.register("engine",t),o.register("api",i),o.register("bg",e),i.fetch(function(t){s()}),t.start()}}function s(){[i(59),i(60),i(66),i(96)].forEach(function(t){new t(o)}),h("*",function(t,e){ga("send","pageview",t.path),e()}),h({click:!1})}var n=i(1),a=i(11),o=i(14)(),h=i(15),l=i(19),u=(i(56),i(58),!1);$("body").on("closed.agegate",".js-age-gate",function(){r()}),window.bypass_age&&($.cookie("age_checked",window.bypass_country),h("/"))},function(t,e,i){function r(){this.measures=new h,this.measures.on("resize",this.resize.bind(this)),this.parts=[],this.visible=!0,l.on("change",function(t){this.visible=t}.bind(this)),this.stage=new s.Stage(4213848),this.renderer=s.autoDetectRenderer(this.measures.width,this.measures.height,{view:$(".js-canvas")[0],antialias:!0,resolution:window.devicePixelRatio})}var s=i(2),n=i(3),a=i(4),o=i(5).EventEmitter,h=i(6),l=i(9)();n(r,o),r.prototype.add=function(t){this.addUpdate(t),this.stage.addChild(t)},r.prototype.addUpdate=function(t){this.parts.push(t)},r.prototype.remove=function(t){this.removeUpdate(t),this.stage.removeChild(t)},r.prototype.removeUpdate=function(t){this.parts.splice(this.parts.indexOf(t),1)},r.prototype.start=function(){a(this.update.bind(this))},r.prototype.update=function(){if(this.visible){a(this.update.bind(this)),this.renderer.render(this.stage);for(var t=0;t<this.parts.length;t++)void 0!=this.parts[t]&&this.parts[t].update()}},r.prototype.resize=function(){this.renderer.resize(this.measures.width,this.measures.height)},t.exports=r},function(t,e,i){(function(){var i=i||{};i.WEBGL_RENDERER=0,i.CANVAS_RENDERER=1,i.VERSION="v2.1.0",i.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},i.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},i._UID=0,"undefined"!=typeof Float32Array?(i.Float32Array=Float32Array,i.Uint16Array=Uint16Array):(i.Float32Array=Array,i.Uint16Array=Array),i.INTERACTION_FREQUENCY=30,i.AUTO_PREVENT_DEFAULT=!0,i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RETINA_PREFIX="@2x",i.dontSayHello=!1,i.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},i.sayHello=function(t){if(!i.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["%c %c %c Pixi.js "+i.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c â™¥%câ™¥%câ™¥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,e)}else window.console&&console.log("Pixi.js "+i.VERSION+" - http://www.pixijs.com/");i.dontSayHello=!0}},i.Point=function(t,e){this.x=t||0,this.y=e||0},i.Point.prototype.clone=function(){return new i.Point(this.x,this.y)},i.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},i.Point.prototype.constructor=i.Point,i.Rectangle=function(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0},i.Rectangle.prototype.clone=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},i.Rectangle.prototype.constructor=i.Rectangle,i.EmptyRectangle=new i.Rectangle(0,0,0,0),i.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof i.Point){for(var e=[],r=0,s=t.length;s>r;r++)e.push(t[r].x,t[r].y);t=e}this.closed=!0,this.points=t},i.Polygon.prototype.clone=function(){var t=this.points.slice();return new i.Polygon(t)},i.Polygon.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,s=0,n=r-1;r>s;n=s++){var a=this.points[2*s],o=this.points[2*s+1],h=this.points[2*n],l=this.points[2*n+1],u=o>e!=l>e&&(h-a)*(e-o)/(l-o)+a>t;u&&(i=!i)}return i},i.Polygon.prototype.constructor=i.Polygon,i.Circle=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},i.Circle.prototype.clone=function(){return new i.Circle(this.x,this.y,this.radius)},i.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,r=this.y-e,s=this.radius*this.radius;return i*=i,r*=r,s>=i+r},i.Circle.prototype.getBounds=function(){return new i.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},i.Circle.prototype.constructor=i.Circle,i.Ellipse=function(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0},i.Ellipse.prototype.clone=function(){return new i.Ellipse(this.x,this.y,this.width,this.height)},i.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,1>=i+r},i.Ellipse.prototype.getBounds=function(){return new i.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},i.Ellipse.prototype.constructor=i.Ellipse,i.RoundedRectangle=function(t,e,i,r,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this.radius=s||20},i.RoundedRectangle.prototype.clone=function(){return new i.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},i.RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},i.RoundedRectangle.prototype.constructor=i.RoundedRectangle,i.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},i.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.Matrix.prototype.toArray=function(t){this.array||(this.array=new i.Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},i.Matrix.prototype.apply=function(t,e){return e=e||new i.Point,e.x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},i.Matrix.prototype.applyInverse=function(t,e){e=e||new i.Point;var r=1/(this.a*this.d+this.c*-this.b);return e.x=this.d*r*t.x+-this.c*r*t.y+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t.y+-this.b*r*t.x+(-this.ty*this.a+this.tx*this.b)*r,e},i.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.Matrix.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,s=this.c,n=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=n*e-this.ty*i,this.ty=n*i+this.ty*e,this},i.Matrix.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,s=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},i.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.identityMatrix=new i.Matrix,i.DisplayObject=function(){this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new i.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},i.DisplayObject.prototype.constructor=i.DisplayObject,Object.defineProperty(i.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(i.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var r=t[i].passes,s=0;s<r.length;s++)e.push(r[s]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(i.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),i.DisplayObject.prototype.updateTransform=function(){var t,e,r,s,n,a,o=this.parent.worldTransform,h=this.worldTransform;this.rotation%i.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,s=this._cr*this.scale.y,n=this.position.x,a=this.position.y,(this.pivot.x||this.pivot.y)&&(n-=this.pivot.x*t+this.pivot.y*r,a-=this.pivot.x*e+this.pivot.y*s),h.a=t*o.a+e*o.c,h.b=t*o.b+e*o.d,h.c=r*o.a+s*o.c,h.d=r*o.b+s*o.d,h.tx=n*o.a+a*o.c+o.tx,h.ty=n*o.b+a*o.d+o.ty):(t=this.scale.x,s=this.scale.y,n=this.position.x-this.pivot.x*t,a=this.position.y-this.pivot.y*s,h.a=t*o.a,h.b=t*o.b,h.c=s*o.c,h.d=s*o.d,h.tx=n*o.a+a*o.c+o.tx,h.ty=n*o.b+a*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},i.DisplayObject.prototype.displayObjectUpdateTransform=i.DisplayObject.prototype.updateTransform,i.DisplayObject.prototype.getBounds=function(t){return t=t,i.EmptyRectangle},i.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(i.identityMatrix)},i.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},i.DisplayObject.prototype.generateTexture=function(t,e,r){var s=this.getLocalBounds(),n=new i.RenderTexture(0|s.width,0|s.height,r,e,t);return i.DisplayObject._tempMatrix.tx=-s.x,i.DisplayObject._tempMatrix.ty=-s.y,n.render(this,i.DisplayObject._tempMatrix),n},i.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},i.DisplayObject.prototype.toGlobal=function(t){return this.updateTransform(),this.worldTransform.apply(t)},i.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.updateTransform(),this.worldTransform.applyInverse(t)},i.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?i.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):i.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},i.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new i.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new i.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,i.DisplayObject._tempMatrix.tx=-t.x,i.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,i.DisplayObject._tempMatrix),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=r,this._cacheAsBitmap=!0},i.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},i.DisplayObject.prototype._renderWebGL=function(t){t=t},i.DisplayObject.prototype._renderCanvas=function(t){t=t},i.DisplayObject._tempMatrix=new i.Matrix,Object.defineProperty(i.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(i.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),i.DisplayObjectContainer=function(){i.DisplayObject.call(this),this.children=[]},i.DisplayObjectContainer.prototype=Object.create(i.DisplayObject.prototype),i.DisplayObjectContainer.prototype.constructor=i.DisplayObjectContainer,Object.defineProperty(i.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(i.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),i.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},i.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},i.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);if(0>i||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[r]=t}},i.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},i.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},i.DisplayObjectContainer.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},i.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},i.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},i.DisplayObjectContainer.prototype.removeChildren=function(t,e){var i=t||0,r="number"==typeof e?e:this.children.length,s=r-i;if(s>0&&r>=s){for(var n=this.children.splice(i,s),a=0;a<n.length;a++){var o=n[a];this.stage&&o.removeStageReference(),o.parent=void 0}return n}if(0===s&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},i.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},i.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=i.DisplayObjectContainer.prototype.updateTransform,i.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return i.EmptyRectangle;for(var t,e,r,s=1/0,n=1/0,a=-1/0,o=-1/0,h=!1,l=0,u=this.children.length;u>l;l++){var c=this.children[l];c.visible&&(h=!0,t=this.children[l].getBounds(),s=s<t.x?s:t.x,n=n<t.y?n:t.y,e=t.width+t.x,r=t.height+t.y,a=a>e?a:e,o=o>r?o:r)}if(!h)return i.EmptyRectangle;var p=this._bounds;return p.x=s,p.y=n,p.width=a-s,p.height=o-n,p},i.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.identityMatrix;for(var e=0,r=this.children.length;r>e;e++)this.children[e].updateTransform();var s=this.getBounds();return this.worldTransform=t,s},i.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,i=this.children.length;i>e;e++){var r=this.children[e];r.setStageReference(t)}},i.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var i=this.children[t];i.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},i.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,i;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},i.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,i=this.children.length;i>e;e++){var r=this.children[e];r._renderCanvas(t)}this._mask&&t.maskManager.popMask(t)}},i.Sprite=function(t){i.DisplayObjectContainer.call(this),this.anchor=new i.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL,this.shader=null,t.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},i.Sprite.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Sprite.prototype.constructor=i.Sprite,Object.defineProperty(i.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(i.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),i.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},i.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},i.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,r=e*(1-this.anchor.x),s=e*-this.anchor.x,n=i*(1-this.anchor.y),a=i*-this.anchor.y,o=t||this.worldTransform,h=o.a,l=o.b,u=o.c,c=o.d,p=o.tx,d=o.ty,f=h*s+u*a+p,m=c*a+l*s+d,g=h*r+u*a+p,v=c*a+l*r+d,y=h*r+u*n+p,x=c*n+l*r+d,_=h*s+u*n+p,b=c*n+l*s+d,T=-1/0,w=-1/0,S=1/0,C=1/0;S=S>f?f:S,S=S>g?g:S,S=S>y?y:S,S=S>_?_:S,C=C>m?m:C,C=C>v?v:C,C=C>x?x:C,C=C>b?b:C,T=f>T?f:T,T=g>T?g:T,T=y>T?y:T,T=_>T?_:T,w=m>w?m:w,w=v>w?v:w,w=x>w?x:w,w=b>w?b:w;var A=this._bounds;return A.x=S,A.width=T-S,A.y=C,A.height=w-C,this._currentBounds=A,A},i.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,i;if(this._mask||this._filters){var r=t.spriteBatch;for(this._filters&&(r.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),t.maskManager.pushMask(this.mask,t),r.start()),r.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);r.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),r.start()}else for(t.spriteBatch.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},i.Sprite.prototype._renderCanvas=function(t){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=i.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.roundPixels?t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===i.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,s=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=i.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/e,s/e,this.texture.crop.width/e,this.texture.crop.height/e)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/e,s/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var n=0,a=this.children.length;a>n;n++)this.children[n]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},i.Sprite.fromFrame=function(t){var e=i.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new i.Sprite(e)},i.Sprite.fromImage=function(t,e,r){var s=i.Texture.fromImage(t,e,r);return new i.Sprite(s)},i.SpriteBatch=function(t){i.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},i.SpriteBatch.prototype=Object.create(i.DisplayObjectContainer.prototype),i.SpriteBatch.prototype.constructor=i.SpriteBatch,i.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new i.WebGLFastSpriteBatch(t),this.ready=!0},i.SpriteBatch.prototype.updateTransform=function(){i.DisplayObject.prototype.updateTransform.call(this)},i.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},i.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var e=t.context;e.globalAlpha=this.worldAlpha,i.DisplayObject.prototype.updateTransform.call(this);for(var r=this.worldTransform,s=!0,n=0;n<this.children.length;n++){var a=this.children[n];if(a.visible){var o=a.texture,h=o.frame;if(e.globalAlpha=this.worldAlpha*a.alpha,a.rotation%(2*Math.PI)===0)s&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),s=!1),e.drawImage(o.baseTexture.source,h.x,h.y,h.width,h.height,a.anchor.x*-h.width*a.scale.x+a.position.x+.5|0,a.anchor.y*-h.height*a.scale.y+a.position.y+.5|0,h.width*a.scale.x,h.height*a.scale.y);else{s||(s=!0),i.DisplayObject.prototype.updateTransform.call(a);var l=a.worldTransform;t.roundPixels?e.setTransform(l.a,l.b,l.c,l.d,0|l.tx,0|l.ty):e.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),e.drawImage(o.baseTexture.source,h.x,h.y,h.width,h.height,a.anchor.x*-h.width+.5|0,a.anchor.y*-h.height+.5|0,h.width,h.height)}}}}},i.MovieClip=function(t){i.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},i.MovieClip.prototype=Object.create(i.Sprite.prototype),i.MovieClip.prototype.constructor=i.MovieClip,Object.defineProperty(i.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),i.MovieClip.prototype.stop=function(){this.playing=!1},i.MovieClip.prototype.play=function(){this.playing=!0},i.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},i.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},i.MovieClip.prototype.updateTransform=function(){if(i.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},i.MovieClip.fromFrames=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new i.Texture.fromFrame(t[r]));return new i.MovieClip(e)},i.MovieClip.fromImages=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new i.Texture.fromImage(t[r]));return new i.MovieClip(e)},i.FilterBlock=function(){this.visible=!0,this.renderable=!0},i.FilterBlock.prototype.constructor=i.FilterBlock,i.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,i.Sprite.call(this,i.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)},i.Text.prototype=Object.create(i.Sprite.prototype),i.Text.prototype.constructor=i.Text,Object.defineProperty(i.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(i.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),i.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},i.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},i.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],r=0,s=this.determineFontProperties(this.style.font),n=0;n<e.length;n++){var a=this.context.measureText(e[n]).width;i[n]=a,r=Math.max(r,a)}var o=r+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var h=this.style.lineHeight||s.fontSize+this.style.strokeThickness,l=h*e.length;this.style.dropShadow&&(l+=this.style.dropShadowDistance),this.canvas.height=l*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var u,c;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var p=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,d=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(n=0;n<e.length;n++)u=this.style.strokeThickness/2,c=this.style.strokeThickness/2+n*h+s.ascent,"right"===this.style.align?u+=r-i[n]:"center"===this.style.align&&(u+=(r-i[n])/2),this.style.fill&&this.context.fillText(e[n],u+p,c+d)}for(this.context.fillStyle=this.style.fill,n=0;n<e.length;n++)u=this.style.strokeThickness/2,c=this.style.strokeThickness/2+n*h+s.ascent,"right"===this.style.align?u+=r-i[n]:"center"===this.style.align&&(u+=(r-i[n])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[n],u,c),this.style.fill&&this.context.fillText(e[n],u,c);this.updateTexture()},i.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},i.Text.prototype._renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),i.Sprite.prototype._renderWebGL.call(this,t)},i.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),i.Sprite.prototype._renderCanvas.call(this,t)},i.Text.prototype.determineFontProperties=function(t){var e=i.Text.fontPropertiesCache[t];if(!e){e={};var r=i.Text.fontPropertiesCanvas,s=i.Text.fontPropertiesContext;s.font=t;var n=Math.ceil(s.measureText("|Mq").width),a=Math.ceil(s.measureText("M").width),o=2*a;a=1.4*a|0,r.width=n,r.height=o,s.fillStyle="#f00",s.fillRect(0,0,n,o),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText("|Mq",0,a);var h,l,u=s.getImageData(0,0,n,o).data,c=u.length,p=4*n,d=0,f=!1;for(h=0;a>h;h++){for(l=0;p>l;l+=4)if(255!==u[d+l]){f=!0;break}if(f)break;d+=p}for(e.ascent=a-h,d=c-p,f=!1,h=o;h>a;h--){for(l=0;p>l;l+=4)if(255!==u[d+l]){f=!0;break}if(f)break;d-=p}e.descent=h-a,e.fontSize=e.ascent+e.descent,i.Text.fontPropertiesCache[t]=e}return e},i.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),r=0;r<i.length;r++){for(var s=this.style.wordWrapWidth,n=i[r].split(" "),a=0;a<n.length;a++){var o=this.context.measureText(n[a]).width,h=o+this.context.measureText(" ").width;0===a||h>s?(a>0&&(e+="\n"),e+=n[a],s=this.style.wordWrapWidth-o):(s-=h,e+=" "+n[a])}r<i.length-1&&(e+="\n")}return e},i.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),i.Sprite.prototype.getBounds.call(this,t)},i.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t||t)},i.Text.fontPropertiesCache={},i.Text.fontPropertiesCanvas=document.createElement("canvas"),i.Text.fontPropertiesContext=i.Text.fontPropertiesCanvas.getContext("2d"),i.BitmapText=function(t,e){i.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},i.BitmapText.prototype=Object.create(i.DisplayObjectContainer.prototype),i.BitmapText.prototype.constructor=i.BitmapText,i.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},i.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):i.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},i.BitmapText.prototype.updateText=function(){for(var t=i.BitmapText.fonts[this.fontName],e=new i.Point,r=null,s=[],n=0,a=[],o=0,h=this.fontSize/t.size,l=0;l<this.text.length;l++){var u=this.text.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))a.push(e.x),n=Math.max(n,e.x),o++,e.x=0,e.y+=t.lineHeight,r=null;else{var c=t.chars[u];c&&(r&&c.kerning[r]&&(e.x+=c.kerning[r]),s.push({texture:c.texture,line:o,charCode:u,position:new i.Point(e.x+c.xOffset,e.y+c.yOffset)}),e.x+=c.xAdvance,r=u)}}a.push(e.x),n=Math.max(n,e.x);var p=[];for(l=0;o>=l;l++){var d=0;"right"===this.style.align?d=n-a[l]:"center"===this.style.align&&(d=(n-a[l])/2),p.push(d)}var f=this.children.length,m=s.length,g=this.tint||16777215;for(l=0;m>l;l++){
var v=f>l?this.children[l]:this._pool.pop();v?v.setTexture(s[l].texture):v=new i.Sprite(s[l].texture),v.position.x=(s[l].position.x+p[s[l].line])*h,v.position.y=s[l].position.y*h,v.scale.x=v.scale.y=h,v.tint=g,v.parent||this.addChild(v)}for(;this.children.length>m;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=n*h,this.textHeight=(e.y+t.lineHeight)*h},i.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.BitmapText.fonts={},i.InteractionData=function(){this.global=new i.Point,this.target=null,this.originalEvent=null},i.InteractionData.prototype.getLocalPosition=function(t,e){var r=t.worldTransform,s=this.global,n=r.a,a=r.c,o=r.tx,h=r.b,l=r.d,u=r.ty,c=1/(n*l+a*-h);return e=e||new i.Point,e.x=l*c*s.x+-a*c*s.y+(u*a-o*l)*c,e.y=n*c*s.y+-h*c*s.x+(-u*n+o*h)*c,e},i.InteractionData.prototype.constructor=i.InteractionData,i.InteractionManager=function(t){this.stage=t,this.mouse=new i.InteractionData,this.touches={},this.tempPoint=new i.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1},i.InteractionManager.prototype.constructor=i.InteractionManager,i.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var i=t.children,r=i.length,s=r-1;s>=0;s--){var n=i[s];n._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(n),n.children.length>0&&this.collectInteractiveSprite(n,n)):(n.__iParent=null,n.children.length>0&&this.collectInteractiveSprite(n,e))}},i.InteractionManager.prototype.setTarget=function(t){this.target=t,this.resolution=t.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},i.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},i.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},i.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(e=e*i.INTERACTION_FREQUENCY/1e3,!(1>e)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var s=this.interactiveItems.length,n="inherit",a=!1;for(r=0;s>r;r++){var o=this.interactiveItems[r];o.__hit=this.hitTest(o,this.mouse),this.mouse.target=o,o.__hit&&!a?(o.buttonMode&&(n=o.defaultCursor),o.interactiveChildren||(a=!0),o.__isOver||(o.mouseover&&o.mouseover(this.mouse),o.__isOver=!0)):o.__isOver&&(o.mouseout&&o.mouseout(this.mouse),o.__isOver=!1)}this.currentCursorStyle!==n&&(this.currentCursorStyle=n,this.interactionDOMElement.style.cursor=n)}}},i.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},i.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height)/this.resolution;for(var i=this.interactiveItems.length,r=0;i>r;r++){var s=this.interactiveItems[r];s.mousemove&&s.mousemove(this.mouse)}},i.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,i.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var e=this.interactiveItems.length,r=this.mouse.originalEvent,s=2===r.button||3===r.which,n=s?"rightdown":"mousedown",a=s?"rightclick":"click",o=s?"__rightIsDown":"__mouseIsDown",h=s?"__isRightDown":"__isDown",l=0;e>l;l++){var u=this.interactiveItems[l];if((u[n]||u[a])&&(u[o]=!0,u.__hit=this.hitTest(u,this.mouse),u.__hit&&(u[n]&&u[n](this.mouse),u[h]=!0,!u.interactiveChildren)))break}},i.InteractionManager.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var i=0;e>i;i++){var r=this.interactiveItems[i];r.__isOver&&(this.mouse.target=r,r.mouseout&&r.mouseout(this.mouse),r.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},i.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,i=!1,r=this.mouse.originalEvent,s=2===r.button||3===r.which,n=s?"rightup":"mouseup",a=s?"rightclick":"click",o=s?"rightupoutside":"mouseupoutside",h=s?"__isRightDown":"__isDown",l=0;e>l;l++){var u=this.interactiveItems[l];(u[a]||u[n]||u[o])&&(u.__hit=this.hitTest(u,this.mouse),u.__hit&&!i?(u[n]&&u[n](this.mouse),u[h]&&u[a]&&u[a](this.mouse),u.interactiveChildren||(i=!0)):u[h]&&u[o]&&u[o](this.mouse),u[h]=!1)}},i.InteractionManager.prototype.hitTest=function(t,e){var r=e.global;if(!t.worldVisible)return!1;var s,n=t.worldTransform,a=n.a,o=n.b,h=n.c,l=n.tx,u=n.d,c=n.ty,p=1/(a*u+h*-o),d=u*p*r.x+-h*p*r.y+(c*h-l*u)*p,f=a*p*r.y+-o*p*r.x+(-c*a+l*o)*p;if(e.target=t,t.hitArea&&t.hitArea.contains)return!!t.hitArea.contains(d,f)&&(e.target=t,!0);if(t instanceof i.Sprite){var m,g=t.texture.frame.width,v=t.texture.frame.height,y=-g*t.anchor.x;if(d>y&&y+g>d&&(m=-v*t.anchor.y,f>m&&m+v>f))return e.target=t,!0}else if(t instanceof i.Graphics){var x=t.graphicsData;for(s=0;s<x.length;s++){var _=x[s];if(_.fill&&_.shape&&_.shape.contains(d,f))return e.target=t,!0}}var b=t.children.length;for(s=0;b>s;s++){var T=t.children[s],w=this.hitTest(T,e);if(w)return e.target=t,!0}return!1},i.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,i=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,s=0;for(s=0;s<r.length;s++){var n=r[s];e=this.touches[n.identifier],e.originalEvent=t,e.global.x=(n.clientX-i.left)*(this.target.width/i.width)/this.resolution,e.global.y=(n.clientY-i.top)*(this.target.height/i.height)/this.resolution,!navigator.isCocoonJS||i.left||i.top||t.target.style.width||t.target.style.height||(e.global.x=n.clientX,e.global.y=n.clientY);for(var a=0;a<this.interactiveItems.length;a++){var o=this.interactiveItems[a];o.touchmove&&o.__touchData&&o.__touchData[n.identifier]&&o.touchmove(e)}}},i.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactionDOMElement.getBoundingClientRect();i.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var r=t.changedTouches,s=0;s<r.length;s++){var n=r[s],a=this.pool.pop();a||(a=new i.InteractionData),a.originalEvent=t,this.touches[n.identifier]=a,a.global.x=(n.clientX-e.left)*(this.target.width/e.width)/this.resolution,a.global.y=(n.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(a.global.x=n.clientX,a.global.y=n.clientY);for(var o=this.interactiveItems.length,h=0;o>h;h++){var l=this.interactiveItems[h];if((l.touchstart||l.tap)&&(l.__hit=this.hitTest(l,a),l.__hit&&(l.touchstart&&l.touchstart(a),l.__isDown=!0,l.__touchData=l.__touchData||{},l.__touchData[n.identifier]=a,!l.interactiveChildren)))break}}},i.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,r=0;r<i.length;r++){var s=i[r],n=this.touches[s.identifier],a=!1;n.global.x=(s.clientX-e.left)*(this.target.width/e.width)/this.resolution,n.global.y=(s.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(n.global.x=s.clientX,n.global.y=s.clientY);for(var o=this.interactiveItems.length,h=0;o>h;h++){var l=this.interactiveItems[h];l.__touchData&&l.__touchData[s.identifier]&&(l.__hit=this.hitTest(l,l.__touchData[s.identifier]),n.originalEvent=t,(l.touchend||l.tap)&&(l.__hit&&!a?(l.touchend&&l.touchend(n),l.__isDown&&l.tap&&l.tap(n),l.interactiveChildren||(a=!0)):l.__isDown&&l.touchendoutside&&l.touchendoutside(n),l.__isDown=!1),l.__touchData[s.identifier]=null)}this.pool.push(n),this.touches[s.identifier]=null}},i.Stage=function(t){i.DisplayObjectContainer.call(this),this.worldTransform=new i.Matrix,this.interactive=!0,this.interactionManager=new i.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new i.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},i.Stage.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Stage.prototype.constructor=i.Stage,i.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},i.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},i.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=i.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},i.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(t){for(var e=0,i=["ms","moz","webkit","o"],r=0;r<i.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[i[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[r]+"CancelAnimationFrame"]||t[i[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-(r-e)),n=t.setTimeout(function(){i(r+s)},s);return e=r+s,n}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimFrame=t.requestAnimationFrame}(this),i.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(t){function e(){for(var r=arguments.length,n=new Array(r);r--;)n[r]=arguments[r];return n=s.concat(n),i.apply(this instanceof e?this:t,n)}var i=this,r=arguments.length-1,s=[];if(r>0)for(s.length=r;r--;)s[r]=arguments[r+1];if("function"!=typeof i)throw new TypeError;return e.prototype=function n(t){return t&&(n.prototype=t),this instanceof n?void 0:new n}(i.prototype),e}}()),i.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return!!window.XMLHttpRequest&&new window.XMLHttpRequest;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(i){}},i.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},i.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},i.EventTarget={call:function(t){t&&(t=t.prototype||t,i.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,e){if(this._listeners=this._listeners||{},"object"==typeof t&&(e=t,t=t.type),e&&e.__isEventObject===!0||(e=new i.Event(this,t,e)),this._listeners&&this._listeners[t]){var r,s=this._listeners[t].slice(0),n=s.length,a=s[0];for(r=0;n>r;a=s[++r])if(a.call(this,e),e.stoppedImmediate)return this;if(e.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,e),this},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function i(){e.apply(r.off(t,i),arguments)}this._listeners=this._listeners||{};var r=this;return i._originalHandler=e,this.on(t,i)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var i=this._listeners[t],r=e?i.length:0;r-- >0;)(i[r]===e||i[r]._originalHandler===e)&&i.splice(r,1);return 0===i.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}},i.Event=function(t,e,i){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=i,this.content=i,this.timeStamp=Date.now()},i.Event.prototype.stopPropagation=function(){this.stopped=!0},i.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},i.autoDetectRenderer=function(t,e,r){t||(t=800),e||(e=600);var s=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return s?new i.WebGLRenderer(t,e,r):new i.CanvasRenderer(t,e,r)},i.autoDetectRecommendedRenderer=function(t,e,r){t||(t=800),e||(e=600);var s=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),n=/Android/i.test(navigator.userAgent);return s&&!n?new i.WebGLRenderer(t,e,r):new i.CanvasRenderer(t,e,r)},i.PolyK={},i.PolyK.Triangulate=function(t){var e=!0,r=t.length>>1;if(3>r)return[];for(var s=[],n=[],a=0;r>a;a++)n.push(a);a=0;for(var o=r;o>3;){var h=n[(a+0)%o],l=n[(a+1)%o],u=n[(a+2)%o],c=t[2*h],p=t[2*h+1],d=t[2*l],f=t[2*l+1],m=t[2*u],g=t[2*u+1],v=!1;if(i.PolyK._convex(c,p,d,f,m,g,e)){v=!0;for(var y=0;o>y;y++){var x=n[y];if(x!==h&&x!==l&&x!==u&&i.PolyK._PointInTriangle(t[2*x],t[2*x+1],c,p,d,f,m,g)){v=!1;break}}}if(v)s.push(h,l,u),n.splice((a+1)%o,1),o--,a=0;else if(a++>3*o){if(!e)return null;for(s=[],n=[],a=0;r>a;a++)n.push(a);a=0,o=r,e=!1}}return s.push(n[0],n[1],n[2]),s},i.PolyK._PointInTriangle=function(t,e,i,r,s,n,a,o){var h=a-i,l=o-r,u=s-i,c=n-r,p=t-i,d=e-r,f=h*h+l*l,m=h*u+l*c,g=h*p+l*d,v=u*u+c*c,y=u*p+c*d,x=1/(f*v-m*m),_=(v*g-m*y)*x,b=(f*y-m*g)*x;return _>=0&&b>=0&&1>_+b},i.PolyK._convex=function(t,e,i,r,s,n,a){return(e-r)*(s-i)+(i-t)*(n-r)>=0===a},i.initDefaultShaders=function(){},i.CompileVertexShader=function(t,e){return i._CompileShader(t,e,t.VERTEX_SHADER)},i.CompileFragmentShader=function(t,e){return i._CompileShader(t,e,t.FRAGMENT_SHADER)},i._CompileShader=function(t,e,i){var r=e.join("\n"),s=t.createShader(i);return t.shaderSource(s,r),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS)?s:(window.console.log(t.getShaderInfoLog(s)),null)},i.compileProgram=function(t,e,r){var s=i.CompileFragmentShader(t,r),n=i.CompileVertexShader(t,e),a=t.createProgram();return t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),a},i.PixiShader=function(t){this._UID=i._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},i.PixiShader.prototype.constructor=i.PixiShader,i.PixiShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc||i.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(e,r);this.initUniforms(),this.program=e},i.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms){t=this.uniforms[i];var r=t.type;"sampler2D"===r?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===r||"mat3"===r||"mat4"===r?(t.glMatrix=!0,t.glValueLength=1,"mat2"===r?t.glFunc=e.uniformMatrix2fv:"mat3"===r?t.glFunc=e.uniformMatrix3fv:"mat4"===r&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],t.glValueLength="2f"===r||"2i"===r?2:"3f"===r||"3i"===r?3:"4f"===r||"4i"===r?4:1)}},i.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var i=t.textureData,r=i.magFilter?i.magFilter:e.LINEAR,s=i.minFilter?i.minFilter:e.LINEAR,n=i.wrapS?i.wrapS:e.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:e.CLAMP_TO_EDGE,o=i.luminance?e.LUMINANCE:e.RGBA;if(i.repeat&&(n=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var h=i.width?i.width:512,l=i.height?i.height:2,u=i.border?i.border:0;e.texImage2D(e.TEXTURE_2D,0,o,h,l,u,o,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,o,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},i.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var r in this.uniforms)t=this.uniforms[r],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[e.id]?i.instances[e.id].updateTexture(t.value.baseTexture):e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},i.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],i.PixiFastShader=function(t){this._UID=i._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},i.PixiFastShader.prototype.constructor=i.PixiFastShader,i.PixiFastShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},i.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.StripShader=function(t){this._UID=i._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},i.StripShader.prototype.constructor=i.StripShader,i.StripShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},i.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},i.PrimitiveShader=function(t){this._UID=i._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},i.PrimitiveShader.prototype.constructor=i.PrimitiveShader,i.PrimitiveShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},i.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.ComplexPrimitiveShader=function(t){this._UID=i._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},i.ComplexPrimitiveShader.prototype.constructor=i.ComplexPrimitiveShader,i.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.color=t.getUniformLocation(e,"color"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},i.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},i.WebGLGraphics=function(){},i.WebGLGraphics.renderGraphics=function(t,e){var r,s=e.gl,n=e.projection,a=e.offset,o=e.shaderManager.primitiveShader;t.dirty&&i.WebGLGraphics.updateGraphics(t,s);for(var h=t._webGL[s.id],l=0;l<h.data.length;l++)1===h.data[l].mode?(r=h.data[l],e.stencilManager.pushStencil(t,r,e),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(r.indices.length-4)),e.stencilManager.popStencil(t,r,e)):(r=h.data[l],e.shaderManager.setShader(o),o=e.shaderManager.primitiveShader,s.uniformMatrix3fv(o.translationMatrix,!1,t.worldTransform.toArray(!0)),s.uniform2f(o.projectionVector,n.x,-n.y),s.uniform2f(o.offsetVector,-a.x,-a.y),s.uniform3fv(o.tintColor,i.hex2rgb(t.tint)),s.uniform1f(o.alpha,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,r.buffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(o.colorAttribute,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r.indexBuffer),s.drawElements(s.TRIANGLE_STRIP,r.indices.length,s.UNSIGNED_SHORT,0))},i.WebGLGraphics.updateGraphics=function(t,e){var r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var s;if(t.clearDirty){for(t.clearDirty=!1,s=0;s<r.data.length;s++){var n=r.data[s];n.reset(),i.WebGLGraphics.graphicsDataPool.push(n)}r.data=[],r.lastIndex=0}var a;for(s=r.lastIndex;s<t.graphicsData.length;s++){var o=t.graphicsData[s];if(o.type===i.Graphics.POLY){if(o.points=o.shape.points.slice(),o.shape.closed&&o.points[0]!==o.points[o.points.length-2]&&o.points[1]!==o.points[o.points.length-1]&&o.points.push(o.points[0],o.points[1]),o.fill&&o.points.length>=6)if(o.points.length<12){a=i.WebGLGraphics.switchMode(r,0);var h=i.WebGLGraphics.buildPoly(o,a);h||(a=i.WebGLGraphics.switchMode(r,1),i.WebGLGraphics.buildComplexPoly(o,a))}else a=i.WebGLGraphics.switchMode(r,1),i.WebGLGraphics.buildComplexPoly(o,a);o.lineWidth>0&&(a=i.WebGLGraphics.switchMode(r,0),i.WebGLGraphics.buildLine(o,a))}else a=i.WebGLGraphics.switchMode(r,0),o.type===i.Graphics.RECT?i.WebGLGraphics.buildRectangle(o,a):o.type===i.Graphics.CIRC||o.type===i.Graphics.ELIP?i.WebGLGraphics.buildCircle(o,a):o.type===i.Graphics.RREC&&i.WebGLGraphics.buildRoundedRectangle(o,a);r.lastIndex++}for(s=0;s<r.data.length;s++)a=r.data[s],a.dirty&&a.upload()},i.WebGLGraphics.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==e||1===e)&&(r=i.WebGLGraphics.graphicsDataPool.pop()||new i.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r))):(r=i.WebGLGraphics.graphicsDataPool.pop()||new i.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},i.WebGLGraphics.buildRectangle=function(t,e){var r=t.shape,s=r.x,n=r.y,a=r.width,o=r.height;if(t.fill){var h=i.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,p=h[2]*l,d=e.points,f=e.indices,m=d.length/6;d.push(s,n),d.push(u,c,p,l),d.push(s+a,n),d.push(u,c,p,l),d.push(s,n+o),d.push(u,c,p,l),d.push(s+a,n+o),d.push(u,c,p,l),f.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[s,n,s+a,n,s+a,n+o,s,n+o,s,n],i.WebGLGraphics.buildLine(t,e),t.points=g}},i.WebGLGraphics.buildRoundedRectangle=function(t,e){var r=t.shape,s=r.x,n=r.y,a=r.width,o=r.height,h=r.radius,l=[];if(l.push(s,n+h),l=l.concat(i.WebGLGraphics.quadraticBezierCurve(s,n+o-h,s,n+o,s+h,n+o)),l=l.concat(i.WebGLGraphics.quadraticBezierCurve(s+a-h,n+o,s+a,n+o,s+a,n+o-h)),l=l.concat(i.WebGLGraphics.quadraticBezierCurve(s+a,n+h,s+a,n,s+a-h,n)),l=l.concat(i.WebGLGraphics.quadraticBezierCurve(s+h,n,s,n,s,n+h)),t.fill){var u=i.hex2rgb(t.fillColor),c=t.fillAlpha,p=u[0]*c,d=u[1]*c,f=u[2]*c,m=e.points,g=e.indices,v=m.length/6,y=i.PolyK.Triangulate(l),x=0;for(x=0;x<y.length;x+=3)g.push(y[x]+v),g.push(y[x]+v),g.push(y[x+1]+v),g.push(y[x+2]+v),g.push(y[x+2]+v);for(x=0;x<l.length;x++)m.push(l[x],l[++x],p,d,f,c)}if(t.lineWidth){var _=t.points;t.points=l,i.WebGLGraphics.buildLine(t,e),t.points=_}},i.WebGLGraphics.quadraticBezierCurve=function(t,e,i,r,s,n){function a(t,e,i){var r=e-t;return t+r*i}for(var o,h,l,u,c,p,d=20,f=[],m=0,g=0;d>=g;g++)m=g/d,o=a(t,i,m),h=a(e,r,m),l=a(i,s,m),u=a(r,n,m),c=a(o,l,m),p=a(h,u,m),f.push(c,p);return f},i.WebGLGraphics.buildCircle=function(t,e){var r,s,n=t.shape,a=n.x,o=n.y;
t.type===i.Graphics.CIRC?(r=n.radius,s=n.radius):(r=n.width,s=n.height);var h=40,l=2*Math.PI/h,u=0;if(t.fill){var c=i.hex2rgb(t.fillColor),p=t.fillAlpha,d=c[0]*p,f=c[1]*p,m=c[2]*p,g=e.points,v=e.indices,y=g.length/6;for(v.push(y),u=0;h+1>u;u++)g.push(a,o,d,f,m,p),g.push(a+Math.sin(l*u)*r,o+Math.cos(l*u)*s,d,f,m,p),v.push(y++,y++);v.push(y-1)}if(t.lineWidth){var x=t.points;for(t.points=[],u=0;h+1>u;u++)t.points.push(a+Math.sin(l*u)*r,o+Math.cos(l*u)*s);i.WebGLGraphics.buildLine(t,e),t.points=x}},i.WebGLGraphics.buildLine=function(t,e){var r=0,s=t.points;if(0!==s.length){if(t.lineWidth%2)for(r=0;r<s.length;r++)s[r]+=.5;var n=new i.Point(s[0],s[1]),a=new i.Point(s[s.length-2],s[s.length-1]);if(n.x===a.x&&n.y===a.y){s=s.slice(),s.pop(),s.pop(),a=new i.Point(s[s.length-2],s[s.length-1]);var o=a.x+.5*(n.x-a.x),h=a.y+.5*(n.y-a.y);s.unshift(o,h),s.push(o,h)}var l,u,c,p,d,f,m,g,v,y,x,_,b,T,w,S,C,A,R,E,P,M,L,O=e.points,B=e.indices,D=s.length/2,F=s.length,I=O.length/6,k=t.lineWidth/2,U=i.hex2rgb(t.lineColor),G=t.lineAlpha,N=U[0]*G,j=U[1]*G,V=U[2]*G;for(c=s[0],p=s[1],d=s[2],f=s[3],v=-(p-f),y=c-d,L=Math.sqrt(v*v+y*y),v/=L,y/=L,v*=k,y*=k,O.push(c-v,p-y,N,j,V,G),O.push(c+v,p+y,N,j,V,G),r=1;D-1>r;r++)c=s[2*(r-1)],p=s[2*(r-1)+1],d=s[2*r],f=s[2*r+1],m=s[2*(r+1)],g=s[2*(r+1)+1],v=-(p-f),y=c-d,L=Math.sqrt(v*v+y*y),v/=L,y/=L,v*=k,y*=k,x=-(f-g),_=d-m,L=Math.sqrt(x*x+_*_),x/=L,_/=L,x*=k,_*=k,w=-y+p-(-y+f),S=-v+d-(-v+c),C=(-v+c)*(-y+f)-(-v+d)*(-y+p),A=-_+g-(-_+f),R=-x+d-(-x+m),E=(-x+m)*(-_+f)-(-x+d)*(-_+g),P=w*R-A*S,Math.abs(P)<.1?(P+=10.1,O.push(d-v,f-y,N,j,V,G),O.push(d+v,f+y,N,j,V,G)):(l=(S*E-R*C)/P,u=(A*C-w*E)/P,M=(l-d)*(l-d)+(u-f)+(u-f),M>19600?(b=v-x,T=y-_,L=Math.sqrt(b*b+T*T),b/=L,T/=L,b*=k,T*=k,O.push(d-b,f-T),O.push(N,j,V,G),O.push(d+b,f+T),O.push(N,j,V,G),O.push(d-b,f-T),O.push(N,j,V,G),F++):(O.push(l,u),O.push(N,j,V,G),O.push(d-(l-d),f-(u-f)),O.push(N,j,V,G)));for(c=s[2*(D-2)],p=s[2*(D-2)+1],d=s[2*(D-1)],f=s[2*(D-1)+1],v=-(p-f),y=c-d,L=Math.sqrt(v*v+y*y),v/=L,y/=L,v*=k,y*=k,O.push(d-v,f-y),O.push(N,j,V,G),O.push(d+v,f+y),O.push(N,j,V,G),B.push(I),r=0;F>r;r++)B.push(I++);B.push(I-1)}},i.WebGLGraphics.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var s=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=i.hex2rgb(t.fillColor);for(var n,a,o=1/0,h=-1/0,l=1/0,u=-1/0,c=0;c<r.length;c+=2)n=r[c],a=r[c+1],o=o>n?n:o,h=n>h?n:h,l=l>a?a:l,u=a>u?a:u;r.push(o,l,h,l,h,u,o,u);var p=r.length/2;for(c=0;p>c;c++)s.push(c)}},i.WebGLGraphics.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var s=e.points,n=e.indices,a=r.length/2,o=i.hex2rgb(t.fillColor),h=t.fillAlpha,l=o[0]*h,u=o[1]*h,c=o[2]*h,p=i.PolyK.Triangulate(r);if(!p)return!1;var d=s.length/6,f=0;for(f=0;f<p.length;f+=3)n.push(p[f]+d),n.push(p[f]+d),n.push(p[f+1]+d),n.push(p[f+2]+d),n.push(p[f+2]+d);for(f=0;a>f;f++)s.push(r[2*f],r[2*f+1],l,u,c,h);return!0}},i.WebGLGraphics.graphicsDataPool=[],i.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.lastIndex=0,this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},i.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[],this.lastIndex=0},i.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new i.Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new i.Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},i.glContexts=[],i.instances=[],i.WebGLRenderer=function(t,e,r){if(r)for(var s in i.defaultRenderOptions)"undefined"==typeof r[s]&&(r[s]=i.defaultRenderOptions[s]);else r=i.defaultRenderOptions;i.defaultRenderer||(i.sayHello("webGL"),i.defaultRenderer=this),this.type=i.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=t||800,this.height=e||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new i.Point,this.offset=new i.Point(0,0),this.shaderManager=new i.WebGLShaderManager,this.spriteBatch=new i.WebGLSpriteBatch,this.maskManager=new i.WebGLMaskManager,this.filterManager=new i.WebGLFilterManager,this.stencilManager=new i.WebGLStencilManager,this.blendModeManager=new i.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},i.WebGLRenderer.prototype.constructor=i.WebGLRenderer,i.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=t.id=i.WebGLRenderer.glContextId++,i.glContexts[this.glContextId]=t,i.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},i.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),t.updateTransform();var e=this.gl;t._interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this)),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.projection)}},i.WebGLRenderer.prototype.renderDisplayObject=function(t,e,r){this.renderSession.blendModeManager.setBlendMode(i.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),t._renderWebGL(this.renderSession),this.spriteBatch.end()},i.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},i.WebGLRenderer.prototype.updateTexture=function(t){if(t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._dirty[e.id]=!1,t._glTextures[e.id]}},i.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},i.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var t in i.TextureCache){var e=i.TextureCache[t].baseTexture;e._glTextures=[]}this.contextLost=!1},i.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),i.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},i.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;i.blendModesWebGL||(i.blendModesWebGL=[],i.blendModesWebGL[i.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],i.blendModesWebGL[i.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],i.blendModesWebGL[i.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])},i.WebGLRenderer.glContextId=0,i.WebGLBlendModeManager=function(){this.currentBlendMode=99999},i.WebGLBlendModeManager.prototype.constructor=i.WebGLBlendModeManager,i.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},i.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=i.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(e[0],e[1]),!0},i.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},i.WebGLMaskManager=function(){},i.WebGLMaskManager.prototype.constructor=i.WebGLMaskManager,i.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},i.WebGLMaskManager.prototype.pushMask=function(t,e){var r=e.gl;t.dirty&&i.WebGLGraphics.updateGraphics(t,r),t._webGL[r.id].data.length&&e.stencilManager.pushStencil(t,t._webGL[r.id].data[0],e)},i.WebGLMaskManager.prototype.popMask=function(t,e){var i=this.gl;e.stencilManager.popStencil(t,t._webGL[i.id].data[0],e)},i.WebGLMaskManager.prototype.destroy=function(){this.gl=null},i.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},i.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},i.WebGLStencilManager.prototype.pushStencil=function(t,e,i){var r=this.gl;this.bindGraphics(t,e,i),0===this.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var s=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-s,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?r.stencilFunc(r.EQUAL,255-(s+1),255):r.stencilFunc(r.EQUAL,s+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-s,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s+1,255):r.stencilFunc(r.EQUAL,255-(s+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},i.WebGLStencilManager.prototype.bindGraphics=function(t,e,r){this._currentGraphics=t;var s,n=this.gl,a=r.projection,o=r.offset;1===e.mode?(s=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,a.x,-a.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,i.hex2rgb(t.tint)),n.uniform3fv(s.color,e.color),n.uniform1f(s.alpha,t.worldAlpha*e.alpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(s=r.shaderManager.primitiveShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,a.x,-a.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,i.hex2rgb(t.tint)),n.uniform1f(s.alpha,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},i.WebGLStencilManager.prototype.popStencil=function(t,e,i){var r=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)r.disable(r.STENCIL_TEST);else{var s=this.count;this.bindGraphics(t,e,i),r.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(s+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s,255):r.stencilFunc(r.EQUAL,255-s,255)):(this.reverse?(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(s+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s,255):r.stencilFunc(r.EQUAL,255-s,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},i.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},i.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},i.WebGLShaderManager.prototype.constructor=i.WebGLShaderManager,i.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new i.PrimitiveShader(t),this.complexPrimitiveShader=new i.ComplexPrimitiveShader(t),this.defaultShader=new i.PixiShader(t),this.fastShader=new i.PixiFastShader(t),this.stripShader=new i.StripShader(t),this.setShader(this.defaultShader)},i.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var i=t[e];this.tempAttribState[i]=!0}var r=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},i.WebGLShaderManager.prototype.setShader=function(t){return this._currentId!==t._UID&&(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},i.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},i.WebGLSpriteBatch=function(){this.vertSize=6,this.size=2e3;var t=4*this.size*this.vertSize,e=6*this.size;this.vertices=new i.Float32Array(t),this.indices=new i.Uint16Array(e),this.lastIndexCount=0;for(var r=0,s=0;e>r;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new i.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},i.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var e=new i.PixiShader(t);e.fragmentSrc=this.defaultShader.fragmentSrc,e.uniforms={},e.init(),this.defaultShader.shaders[t.id]=e},i.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},i.WebGLSpriteBatch.prototype.end=function(){this.flush()},i.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var i=e._uvs;if(i){var r,s,n,a,o=t.worldAlpha,h=t.tint,l=this.vertices,u=t.anchor.x,c=t.anchor.y;if(e.trim){var p=e.trim;s=p.x-u*p.width,r=s+e.crop.width,a=p.y-c*p.height,n=a+e.crop.height}else r=e.frame.width*(1-u),s=e.frame.width*-u,n=e.frame.height*(1-c),a=e.frame.height*-c;var d=4*this.currentBatchSize*this.vertSize,f=e.baseTexture.resolution,m=t.worldTransform,g=m.a/f,v=m.b/f,y=m.c/f,x=m.d/f,_=m.tx,b=m.ty;l[d++]=g*s+y*a+_,l[d++]=x*a+v*s+b,l[d++]=i.x0,l[d++]=i.y0,l[d++]=o,l[d++]=h,l[d++]=g*r+y*a+_,l[d++]=x*a+v*r+b,l[d++]=i.x1,l[d++]=i.y1,l[d++]=o,l[d++]=h,l[d++]=g*r+y*n+_,l[d++]=x*n+v*r+b,l[d++]=i.x2,l[d++]=i.y2,l[d++]=o,l[d++]=h,l[d++]=g*s+y*n+_,l[d++]=x*n+v*s+b,l[d++]=i.x3,l[d++]=i.y3,l[d++]=o,l[d++]=h,this.sprites[this.currentBatchSize++]=t}},i.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture),t._uvs||(t._uvs=new i.TextureUvs);var r=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var s=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),n=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),a=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),o=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);r.x0=0-s,r.y0=0-n,r.x1=1*a-s,r.y1=0-n,r.x2=1*a-s,r.y2=1*o-n,r.x3=0-s,r.y3=1*o-n;var h=t.worldAlpha,l=t.tint,u=this.vertices,c=t.width,p=t.height,d=t.anchor.x,f=t.anchor.y,m=c*(1-d),g=c*-d,v=p*(1-f),y=p*-f,x=4*this.currentBatchSize*this.vertSize,_=e.baseTexture.resolution,b=t.worldTransform,T=b.a/_,w=b.b/_,S=b.c/_,C=b.d/_,A=b.tx,R=b.ty;u[x++]=T*g+S*y+A,u[x++]=C*y+w*g+R,u[x++]=r.x0,u[x++]=r.y0,u[x++]=h,u[x++]=l,u[x++]=T*m+S*y+A,u[x++]=C*y+w*m+R,u[x++]=r.x1,u[x++]=r.y1,u[x++]=h,u[x++]=l,u[x++]=T*m+S*v+A,u[x++]=C*v+w*m+R,u[x++]=r.x2,u[x++]=r.y2,u[x++]=h,u[x++]=l,u[x++]=T*g+S*v+A,u[x++]=C*v+w*g+R,u[x++]=r.x3,u[x++]=r.y3,u[x++]=h,u[x++]=l,this.sprites[this.currentBatchSize++]=t},i.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.gl;if(this.dirty){this.dirty=!1,e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t=this.defaultShader.shaders[e.id];var r=4*this.vertSize;e.vertexAttribPointer(t.aVertexPosition,2,e.FLOAT,!1,r,0),e.vertexAttribPointer(t.aTextureCoord,2,e.FLOAT,!1,r,8),e.vertexAttribPointer(t.colorAttribute,2,e.FLOAT,!1,r,16)}if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var s=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,s)}for(var n,a,o,h,l=0,u=0,c=null,p=this.renderSession.blendModeManager.currentBlendMode,d=null,f=!1,m=!1,g=0,v=this.currentBatchSize;v>g;g++){if(h=this.sprites[g],n=h.texture.baseTexture,a=h.blendMode,o=h.shader||this.defaultShader,f=p!==a,m=d!==o,(c!==n||f||m)&&(this.renderBatch(c,l,u),u=g,l=0,c=n,f&&(p=a,this.renderSession.blendModeManager.setBlendMode(p)),m)){d=o,t=d.shaders[e.id],t||(t=new i.PixiShader(e),t.fragmentSrc=d.fragmentSrc,t.uniforms=d.uniforms,t.init(),d.shaders[e.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var y=this.renderSession.projection;e.uniform2f(t.projectionVector,y.x,y.y);var x=this.renderSession.offset;e.uniform2f(t.offsetVector,x.x,x.y)}l++}this.renderBatch(c,l,u),this.currentBatchSize=0}},i.WebGLSpriteBatch.prototype.renderBatch=function(t,e,i){if(0!==e){var r=this.gl;t._dirty[r.id]?this.renderSession.renderer.updateTexture(t):r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},i.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},i.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},i.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},i.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new i.Float32Array(e),this.indices=new i.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var s=0,n=0;r>s;s+=6,n+=4)this.indices[s+0]=n+0,this.indices[s+1]=n+1,this.indices[s+2]=n+2,this.indices[s+3]=n+0,this.indices[s+4]=n+2,this.indices[s+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},i.WebGLFastSpriteBatch.prototype.constructor=i.WebGLFastSpriteBatch,i.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},i.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},i.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,i=e[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var r=0,s=e.length;s>r;r++)this.renderSprite(e[r]);this.flush()}},i.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,i,r,s,n,a,o,h,l=this.vertices;if(e=t.texture._uvs,i=t.texture.frame.width,r=t.texture.frame.height,t.texture.trim){var u=t.texture.trim;n=u.x-t.anchor.x*u.width,s=n+t.texture.crop.width,o=u.y-t.anchor.y*u.height,a=o+t.texture.crop.height}else s=t.texture.frame.width*(1-t.anchor.x),n=t.texture.frame.width*-t.anchor.x,a=t.texture.frame.height*(1-t.anchor.y),o=t.texture.frame.height*-t.anchor.y;h=4*this.currentBatchSize*this.vertSize,l[h++]=n,l[h++]=o,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x0,l[h++]=e.y1,l[h++]=t.alpha,l[h++]=s,l[h++]=o,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x1,l[h++]=e.y1,l[h++]=t.alpha,l[h++]=s,l[h++]=a,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x2,l[h++]=e.y2,l[h++]=t.alpha,l[h++]=n,l[h++]=a,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x3,l[h++]=e.y3,l[h++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},i.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},i.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,i,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,i,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,i,36)},i.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},i.WebGLFilterManager.prototype.constructor=i.WebGLFilterManager,i.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},i.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=e},i.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,r=this.renderSession.projection,s=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var n=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new i.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,a.texture);var o=t._filterArea,h=n.padding;o.x-=h,o.y-=h,o.width+=2*h,o.height+=2*h,o.x<0&&(o.x=0),o.width>this.width&&(o.width=this.width),o.y<0&&(o.y=0),o.height>this.height&&(o.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,a.frameBuffer),e.viewport(0,0,o.width,o.height),r.x=o.width/2,r.y=-o.height/2,s.x=-o.x,s.y=-o.y,e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=a},i.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),r=e._filterArea,s=e._glFilterTexture,n=this.renderSession.projection,a=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var o=s,h=this.texturePool.pop();h||(h=new i.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var l=0;l<e.filterPasses.length-1;l++){var u=e.filterPasses[l];t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o.texture),this.applyFilterPass(u,r,r.width,r.height);var c=o;o=h,h=c}t.enable(t.BLEND),s=o,this.texturePool.push(h)}var p=e.filterPasses[e.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var d=this.width,f=this.height,m=0,g=0,v=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];r=y._filterArea,d=r.width,f=r.height,m=r.x,g=r.y,v=y._glFilterTexture.frameBuffer}n.x=d/2,n.y=-f/2,a.x=m,a.y=g,r=e._filterArea;var x=r.x-m,_=r.y-g;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=x,this.vertexArray[1]=_+r.height,this.vertexArray[2]=x+r.width,this.vertexArray[3]=_+r.height,this.vertexArray[4]=x,this.vertexArray[5]=_,this.vertexArray[6]=x+r.width,this.vertexArray[7]=_,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,d,f),t.bindFramebuffer(t.FRAMEBUFFER,v),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(p,r,d,f),this.texturePool.push(s),e._glFilterTexture=null},i.WebGLFilterManager.prototype.applyFilterPass=function(t,e,r,s){var n=this.gl,a=t.shaders[n.id];a||(a=new i.PixiShader(n),a.fragmentSrc=t.fragmentSrc,a.uniforms=t.uniforms,a.init(),t.shaders[n.id]=a),this.renderSession.shaderManager.setShader(a),n.uniform2f(a.projectionVector,r/2,-s/2),n.uniform2f(a.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),n.vertexAttribPointer(a.aTextureCoord,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.colorBuffer),n.vertexAttribPointer(a.colorAttribute,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),this.renderSession.drawCount++},i.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new i.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new i.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),
this.colorArray=new i.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},i.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},i.FilterTexture=function(t,e,r,s){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),s=s||i.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,r)},i.FilterTexture.prototype.constructor=i.FilterTexture,i.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},i.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e)}},i.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},i.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},i.CanvasBuffer.prototype.constructor=i.CanvasBuffer,i.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},i.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},i.CanvasMaskManager=function(){},i.CanvasMaskManager.prototype.constructor=i.CanvasMaskManager,i.CanvasMaskManager.prototype.pushMask=function(t,e){var r=e.context;r.save();var s=t.alpha,n=t.worldTransform,a=e.resolution;r.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),i.CanvasGraphics.renderGraphicsMask(t,r),r.clip(),t.worldAlpha=s},i.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},i.CanvasTinter=function(){},i.CanvasTinter.getTintedTexture=function(t,e){var r=t.texture;e=i.CanvasTinter.roundColor(e);var s="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[s])return r.tintCache[s];var n=i.CanvasTinter.canvas||document.createElement("canvas");if(i.CanvasTinter.tintMethod(r,e,n),i.CanvasTinter.convertTintToImage){var a=new Image;a.src=n.toDataURL(),r.tintCache[s]=a}else r.tintCache[s]=n,i.CanvasTinter.canvas=null;return n},i.CanvasTinter.tintWithMultiply=function(t,e,i){var r=i.getContext("2d"),s=t.crop;i.width=s.width,i.height=s.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},i.CanvasTinter.tintWithOverlay=function(t,e,i){var r=i.getContext("2d"),s=t.crop;i.width=s.width,i.height=s.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},i.CanvasTinter.tintWithPerPixel=function(t,e,r){var s=r.getContext("2d"),n=t.crop;r.width=n.width,r.height=n.height,s.globalCompositeOperation="copy",s.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height);for(var a=i.hex2rgb(e),o=a[0],h=a[1],l=a[2],u=s.getImageData(0,0,n.width,n.height),c=u.data,p=0;p<c.length;p+=4)c[p+0]*=o,c[p+1]*=h,c[p+2]*=l;s.putImageData(u,0,0)},i.CanvasTinter.roundColor=function(t){var e=i.CanvasTinter.cacheStepsPerColorChannel,r=i.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),i.rgb2hex(r)},i.CanvasTinter.cacheStepsPerColorChannel=8,i.CanvasTinter.convertTintToImage=!1,i.CanvasTinter.canUseMultiply=i.canUseNewCanvasBlendModes(),i.CanvasTinter.tintMethod=i.CanvasTinter.canUseMultiply?i.CanvasTinter.tintWithMultiply:i.CanvasTinter.tintWithPerPixel,i.CanvasRenderer=function(t,e,r){if(r)for(var s in i.defaultRenderOptions)"undefined"==typeof r[s]&&(r[s]=i.defaultRenderOptions[s]);else r=i.defaultRenderOptions;i.defaultRenderer||(i.sayHello("Canvas"),i.defaultRenderer=this),this.type=i.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=t||800,this.height=e||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new i.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,e),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},i.CanvasRenderer.prototype.constructor=i.CanvasRenderer,i.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=i.blendModes.NORMAL,this.context.globalCompositeOperation=i.blendModesCanvas[i.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)))},i.CanvasRenderer.prototype.destroy=function(t){"undefined"==typeof t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},i.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},i.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},i.CanvasRenderer.prototype.mapBlendModes=function(){i.blendModesCanvas||(i.blendModesCanvas=[],i.canUseNewCanvasBlendModes()?(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="multiply",i.blendModesCanvas[i.blendModes.SCREEN]="screen",i.blendModesCanvas[i.blendModes.OVERLAY]="overlay",i.blendModesCanvas[i.blendModes.DARKEN]="darken",i.blendModesCanvas[i.blendModes.LIGHTEN]="lighten",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="color-dodge",i.blendModesCanvas[i.blendModes.COLOR_BURN]="color-burn",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="hard-light",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="soft-light",i.blendModesCanvas[i.blendModes.DIFFERENCE]="difference",i.blendModesCanvas[i.blendModes.EXCLUSION]="exclusion",i.blendModesCanvas[i.blendModes.HUE]="hue",i.blendModesCanvas[i.blendModes.SATURATION]="saturation",i.blendModesCanvas[i.blendModes.COLOR]="color",i.blendModesCanvas[i.blendModes.LUMINOSITY]="luminosity"):(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="source-over",i.blendModesCanvas[i.blendModes.SCREEN]="source-over",i.blendModesCanvas[i.blendModes.OVERLAY]="source-over",i.blendModesCanvas[i.blendModes.DARKEN]="source-over",i.blendModesCanvas[i.blendModes.LIGHTEN]="source-over",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="source-over",i.blendModesCanvas[i.blendModes.COLOR_BURN]="source-over",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.DIFFERENCE]="source-over",i.blendModesCanvas[i.blendModes.EXCLUSION]="source-over",i.blendModesCanvas[i.blendModes.HUE]="source-over",i.blendModesCanvas[i.blendModes.SATURATION]="source-over",i.blendModesCanvas[i.blendModes.COLOR]="source-over",i.blendModesCanvas[i.blendModes.LUMINOSITY]="source-over"))},i.CanvasGraphics=function(){},i.CanvasGraphics.renderGraphics=function(t,e){for(var r=t.worldAlpha,s="",n=0;n<t.graphicsData.length;n++){var a=t.graphicsData[n],o=a.shape;if(e.strokeStyle=s="#"+("00000"+(0|a.lineColor).toString(16)).substr(-6),e.lineWidth=a.lineWidth,a.type===i.Graphics.POLY){e.beginPath();var h=o.points;e.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++)e.lineTo(h[2*l],h[2*l+1]);o.closed&&e.lineTo(h[0],h[1]),h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.stroke())}else if(a.type===i.Graphics.RECT)(a.fillColor||0===a.fillColor)&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fillRect(o.x,o.y,o.width,o.height)),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.strokeRect(o.x,o.y,o.width,o.height));else if(a.type===i.Graphics.CIRC)e.beginPath(),e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.stroke());else if(a.type===i.Graphics.ELIP){var u=2*o.width,c=2*o.height,p=o.x-u/2,d=o.y-c/2;e.beginPath();var f=.5522848,m=u/2*f,g=c/2*f,v=p+u,y=d+c,x=p+u/2,_=d+c/2;e.moveTo(p,_),e.bezierCurveTo(p,_-g,x-m,d,x,d),e.bezierCurveTo(x+m,d,v,_-g,v,_),e.bezierCurveTo(v,_+g,x+m,y,x,y),e.bezierCurveTo(x-m,y,p,_+g,p,_),e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.stroke())}else if(a.type===i.Graphics.RREC){var b=o.x,T=o.y,w=o.width,S=o.height,C=o.radius,A=Math.min(w,S)/2|0;C=C>A?A:C,e.beginPath(),e.moveTo(b,T+C),e.lineTo(b,T+S-C),e.quadraticCurveTo(b,T+S,b+C,T+S),e.lineTo(b+w-C,T+S),e.quadraticCurveTo(b+w,T+S,b+w,T+S-C),e.lineTo(b+w,T+C),e.quadraticCurveTo(b+w,T,b+w-C,T),e.lineTo(b+C,T),e.quadraticCurveTo(b,T,b,T+C),e.closePath(),(a.fillColor||0===a.fillColor)&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.stroke())}}},i.CanvasGraphics.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var s=0;1>s;s++){var n=t.graphicsData[s],a=n.shape;if(n.type===i.Graphics.POLY){e.beginPath();var o=a.points;e.moveTo(o[0],o[1]);for(var h=1;h<o.length/2;h++)e.lineTo(o[2*h],o[2*h+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&e.closePath()}else if(n.type===i.Graphics.RECT)e.beginPath(),e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(n.type===i.Graphics.CIRC){var l=a.radius>0?a.radius:0;e.beginPath(),e.arc(a.x,a.y,l,0,2*Math.PI),e.closePath()}else if(n.type===i.Graphics.ELIP){var u=2*a.width,c=2*a.height,p=a.x-u/2,d=a.y-c/2;e.beginPath();var f=.5522848,m=u/2*f,g=c/2*f,v=p+u,y=d+c,x=p+u/2,_=d+c/2;e.moveTo(p,_),e.bezierCurveTo(p,_-g,x-m,d,x,d),e.bezierCurveTo(x+m,d,v,_-g,v,_),e.bezierCurveTo(v,_+g,x+m,y,x,y),e.bezierCurveTo(x-m,y,p,_+g,p,_),e.closePath()}else if(n.type===i.Graphics.RREC){var b=a.x,T=a.y,w=a.width,S=a.height,C=a.radius,A=Math.min(w,S)/2|0;C=C>A?A:C,e.beginPath(),e.moveTo(b,T+C),e.lineTo(b,T+S-C),e.quadraticCurveTo(b,T+S,b+C,T+S),e.lineTo(b+w-C,T+S),e.quadraticCurveTo(b+w,T+S,b+w,T+S-C),e.lineTo(b+w,T+C),e.quadraticCurveTo(b+w,T,b+w-C,T),e.lineTo(b+C,T),e.quadraticCurveTo(b,T,b,T+C),e.closePath()}}}},i.Graphics=function(){i.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=i.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new i.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},i.Graphics.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Graphics.prototype.constructor=i.Graphics,Object.defineProperty(i.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),i.Graphics.prototype.lineStyle=function(t,e,r){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new i.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},i.Graphics.prototype.moveTo=function(t,e){return this.drawShape(new i.Polygon([t,e])),this},i.Graphics.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},i.Graphics.prototype.quadraticCurveTo=function(t,e,i,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s,n,a=20,o=this.currentPath.shape.points;0===o.length&&this.moveTo(0,0);for(var h=o[o.length-2],l=o[o.length-1],u=0,c=1;a>=c;c++)u=c/a,s=h+(t-h)*u,n=l+(e-l)*u,o.push(s+(t+(i-t)*u-s)*u,n+(e+(r-e)*u-n)*u);return this.dirty=!0,this},i.Graphics.prototype.bezierCurveTo=function(t,e,i,r,s,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,o,h,l,u,c=20,p=this.currentPath.shape.points,d=p[p.length-2],f=p[p.length-1],m=0,g=1;c>=g;g++)m=g/c,a=1-m,o=a*a,h=o*a,l=m*m,u=l*m,p.push(h*d+3*o*m*t+3*a*l*i+u*s,h*f+3*o*m*e+3*a*l*r+u*n);return this.dirty=!0,this},i.Graphics.prototype.arcTo=function(t,e,i,r,s){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var n=this.currentPath.shape.points,a=n[n.length-2],o=n[n.length-1],h=o-e,l=a-t,u=r-e,c=i-t,p=Math.abs(h*c-l*u);if(1e-8>p||0===s)(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);else{var d=h*h+l*l,f=u*u+c*c,m=h*u+l*c,g=s*Math.sqrt(d)/p,v=s*Math.sqrt(f)/p,y=g*m/d,x=v*m/f,_=g*c+v*l,b=g*u+v*h,T=l*(v+y),w=h*(v+y),S=c*(g+x),C=u*(g+x),A=Math.atan2(w-b,T-_),R=Math.atan2(C-b,S-_);this.arc(_+t,b+e,s,A,R,l*u>c*h)}return this.dirty=!0,this},i.Graphics.prototype.arc=function(t,e,i,r,s,n){var a=t+Math.cos(r)*i,o=e+Math.sin(r)*i,h=this.currentPath.shape.points;if(0===h.length?(this.moveTo(a,o),h=this.currentPath.shape.points):(h[h.length-2]!==a||h[h.length-1]!==o)&&h.push(a,o),r===s)return this;!n&&r>=s?s+=2*Math.PI:n&&s>=r&&(r+=2*Math.PI);var l=n?-1*(r-s):s-r,u=Math.abs(l)/(2*Math.PI)*40;if(0===l)return this;for(var c=l/(2*u),p=2*c,d=Math.cos(c),f=Math.sin(c),m=u-1,g=m%1/m,v=0;m>=v;v++){var y=v+g*v,x=c+r+p*y,_=Math.cos(x),b=-Math.sin(x);h.push((d*_+f*b)*i+t,(d*-b+f*_)*i+e)}return this.dirty=!0,this},i.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},i.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},i.Graphics.prototype.drawRect=function(t,e,r,s){return this.drawShape(new i.Rectangle(t,e,r,s)),this},i.Graphics.prototype.drawRoundedRect=function(t,e,r,s,n){return this.drawShape(new i.RoundedRectangle(t,e,r,s,n)),this},i.Graphics.prototype.drawCircle=function(t,e,r){return this.drawShape(new i.Circle(t,e,r)),this},i.Graphics.prototype.drawEllipse=function(t,e,r,s){return this.drawShape(new i.Ellipse(t,e,r,s)),this},i.Graphics.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new i.Polygon(t)),this},i.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},i.Graphics.prototype.generateTexture=function(t,e){t=t||1;var r=this.getBounds(),s=new i.CanvasBuffer(r.width*t,r.height*t),n=i.Texture.fromCanvas(s.canvas,e);return n.baseTexture.resolution=t,s.context.scale(t,t),s.context.translate(-r.x,-r.y),i.CanvasGraphics.renderGraphics(this,s.context),n},i.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void i.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=i.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),i.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var r=0,s=this.children.length;s>r;r++)this.children[r]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},i.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void i.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=i.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var s=t.resolution;e.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),i.CanvasGraphics.renderGraphics(this,e);for(var n=0,a=this.children.length;a>n;n++)this.children[n]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},i.Graphics.prototype.getBounds=function(t){if(this.isMask)return i.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var e=this._localBounds,r=e.x,s=e.width+e.x,n=e.y,a=e.height+e.y,o=t||this.worldTransform,h=o.a,l=o.b,u=o.c,c=o.d,p=o.tx,d=o.ty,f=h*s+u*a+p,m=c*a+l*s+d,g=h*r+u*a+p,v=c*a+l*r+d,y=h*r+u*n+p,x=c*n+l*r+d,_=h*s+u*n+p,b=c*n+l*s+d,T=f,w=m,S=f,C=m;return S=S>g?g:S,S=S>y?y:S,S=S>_?_:S,C=C>v?v:C,C=C>x?x:C,C=C>b?b:C,T=g>T?g:T,T=y>T?y:T,T=_>T?_:T,w=v>w?v:w,w=x>w?x:w,w=b>w?b:w,this._bounds.x=S,this._bounds.width=T-S,this._bounds.y=C,this._bounds.height=w-C,this._bounds},i.Graphics.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,s=-1/0;if(this.graphicsData.length)for(var n,a,o,h,l,u,c=0;c<this.graphicsData.length;c++){var p=this.graphicsData[c],d=p.type,f=p.lineWidth;if(n=p.shape,d===i.Graphics.RECT||d===i.Graphics.RREC)o=n.x-f/2,h=n.y-f/2,l=n.width+f,u=n.height+f,t=t>o?o:t,e=o+l>e?o+l:e,r=r>h?h:r,s=h+u>s?h+u:s;else if(d===i.Graphics.CIRC)o=n.x,h=n.y,l=n.radius+f/2,u=n.radius+f/2,t=t>o-l?o-l:t,e=o+l>e?o+l:e,r=r>h-u?h-u:r,s=h+u>s?h+u:s;else if(d===i.Graphics.ELIP)o=n.x,h=n.y,l=n.width+f/2,u=n.height+f/2,t=t>o-l?o-l:t,e=o+l>e?o+l:e,r=r>h-u?h-u:r,s=h+u>s?h+u:s;else{a=n.points;for(var m=0;m<a.length;m+=2)o=a[m],h=a[m+1],t=t>o-f?o-f:t,e=o+f>e?o+f:e,r=r>h-f?h-f:r,s=h+f>s?h+f:s}}else t=0,e=0,r=0,s=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=r-g,this._localBounds.height=s-r+2*g},i.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new i.CanvasBuffer(t.width,t.height),r=i.Texture.fromCanvas(e.canvas);this._cachedSprite=new i.Sprite(r),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,i.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},i.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,i=t.buffer.canvas;e.baseTexture.width=i.width,e.baseTexture.height=i.height,e.crop.width=e.frame.width=i.width,e.crop.height=e.frame.height=i.height,t._width=i.width,t._height=i.height,e.baseTexture.dirty()},i.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},i.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new i.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===i.Graphics.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=!0,e},i.GraphicsData=function(t,e,i,r,s,n,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.fillColor=r,this.fillAlpha=s,this.fill=n,this.shape=a,this.type=a.type},i.Graphics.POLY=0,i.Graphics.RECT=1,i.Graphics.CIRC=2,i.Graphics.ELIP=3,i.Graphics.RREC=4,i.Polygon.prototype.type=i.Graphics.POLY,i.Rectangle.prototype.type=i.Graphics.RECT,i.Circle.prototype.type=i.Graphics.CIRC,i.Ellipse.prototype.type=i.Graphics.ELIP,i.RoundedRectangle.prototype.type=i.Graphics.RREC,i.Strip=function(t){i.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new i.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new i.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new i.Float32Array([1,1,1,1]),this.indices=new i.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=i.blendModes.NORMAL,this.padding=0},i.Strip.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Strip.prototype.constructor=i.Strip,i.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},i.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},i.Strip.prototype._renderStrip=function(t){var e=t.gl,i=t.projection,r=t.offset,s=t.shaderManager.stripShader;t.blendModeManager.setBlendMode(this.blendMode),e.uniformMatrix3fv(s.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(s.projectionVector,i.x,-i.y),e.uniform2f(s.offsetVector,-r.x,-r.y),e.uniform1f(s.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.STATIC_DRAW),e.vertexAttribPointer(s.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(s.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.verticies),e.vertexAttribPointer(s.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(s.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(e.TRIANGLE_STRIP,this.indices.length,e.UNSIGNED_SHORT,0)},i.Strip.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var r=this,s=r.verticies,n=r.uvs,a=s.length/2;this.count++;for(var o=0;a-2>o;o++){var h=2*o,l=s[h],u=s[h+2],c=s[h+4],p=s[h+1],d=s[h+3],f=s[h+5];if(this.padding>0){var m=(l+u+c)/3,g=(p+d+f)/3,v=l-m,y=p-g,x=Math.sqrt(v*v+y*y);l=m+v/x*(x+3),p=g+y/x*(x+3),v=u-m,y=d-g,x=Math.sqrt(v*v+y*y),u=m+v/x*(x+3),d=g+y/x*(x+3),v=c-m,y=f-g,x=Math.sqrt(v*v+y*y),c=m+v/x*(x+3),f=g+y/x*(x+3)}var _=n[h]*r.texture.width,b=n[h+2]*r.texture.width,T=n[h+4]*r.texture.width,w=n[h+1]*r.texture.height,S=n[h+3]*r.texture.height,C=n[h+5]*r.texture.height;e.save(),e.beginPath(),e.moveTo(l,p),e.lineTo(u,d),e.lineTo(c,f),e.closePath(),e.clip();var A=_*S+w*T+b*C-S*T-w*b-_*C,R=l*S+w*c+u*C-S*c-w*u-l*C,E=_*u+l*T+b*c-u*T-l*b-_*c,P=_*S*c+w*u*T+l*b*C-l*S*T-w*b*c-_*u*C,M=p*S+w*f+d*C-S*f-w*d-p*C,L=_*d+p*T+b*f-d*T-p*b-_*f,O=_*S*f+w*d*T+p*b*C-p*S*T-w*b*f-_*d*C;e.transform(R/A,M/A,E/A,L/A,P/A,O/A),e.drawImage(r.texture.baseTexture.source,0,0),e.restore()}},i.Strip.prototype.renderStripFlat=function(t){var e=this.context,i=t.verticies,r=i.length/2;this.count++,e.beginPath();for(var s=1;r-2>s;s++){var n=2*s,a=i[n],o=i[n+2],h=i[n+4],l=i[n+1],u=i[n+3],c=i[n+5];e.moveTo(a,l),e.lineTo(o,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},i.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.Rope=function(t,e){i.Strip.call(this,t),this.points=e,this.verticies=new i.Float32Array(4*e.length),this.uvs=new i.Float32Array(4*e.length),this.colors=new i.Float32Array(2*e.length),this.indices=new i.Uint16Array(2*e.length),this.refresh()},i.Rope.prototype=Object.create(i.Strip.prototype),i.Rope.prototype.constructor=i.Rope,i.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,i=t[0],r=this.indices,s=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,s[0]=1,s[1]=1,r[0]=0,r[1]=1;for(var n,a,o,h=t.length,l=1;h>l;l++)n=t[l],a=4*l,o=l/(h-1),l%2?(e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1):(e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1),a=2*l,s[a]=1,s[a+1]=1,a=2*l,r[a]=a,r[a+1]=a+1,i=n}},i.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,r=t[0],s={x:0,y:0};this.count-=.2;for(var n,a,o,h,l,u=this.verticies,c=t.length,p=0;c>p;p++)n=t[p],a=4*p,e=p<t.length-1?t[p+1]:n,s.y=-(e.x-r.x),s.x=e.y-r.y,o=10*(1-p/(c-1)),o>1&&(o=1),h=Math.sqrt(s.x*s.x+s.y*s.y),l=this.texture.height/2,s.x/=h,s.y/=h,s.x*=l,s.y*=l,u[a]=n.x+s.x,u[a+1]=n.y+s.y,u[a+2]=n.x-s.x,u[a+3]=n.y-s.y,r=n;i.DisplayObjectContainer.prototype.updateTransform.call(this)}},i.Rope.prototype.setTexture=function(t){this.texture=t},i.TilingSprite=function(t,e,r){i.Sprite.call(this,t),this._width=e||100,this._height=r||100,this.tileScale=new i.Point(1,1),this.tileScaleOffset=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL},i.TilingSprite.prototype=Object.create(i.Sprite.prototype),i.TilingSprite.prototype.constructor=i.TilingSprite,Object.defineProperty(i.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(i.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),i.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},i.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,r;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(i.updateWebGLTexture(this.tilingTexture.baseTexture,t.gl),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,r=this.children.length;r>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},i.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,t),e.globalAlpha=this.worldAlpha;var r,s,n=this.worldTransform,a=t.resolution;if(e.setTransform(n.a*a,n.c*a,n.b*a,n.d*a,n.tx*a,n.ty*a),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=i.blendModesCanvas[t.currentBlendMode]);var o=this.tilePosition,h=this.tileScale;for(o.x%=this.tilingTexture.baseTexture.width,o.y%=this.tilingTexture.baseTexture.height,e.scale(h.x,h.y),e.translate(o.x+this.anchor.x*-this._width,o.y+this.anchor.y*-this._height),e.fillStyle=this.__tilePattern,e.fillRect(-o.x,-o.y,this._width/h.x,this._height/h.y),e.scale(1/h.x,1/h.y),e.translate(-o.x+this.anchor.x*this._width,-o.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t),r=0,s=this.children.length;s>r;r++)this.children[r]._renderCanvas(t);
}},i.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,i=t*(1-this.anchor.x),r=t*-this.anchor.x,s=e*(1-this.anchor.y),n=e*-this.anchor.y,a=this.worldTransform,o=a.a,h=a.b,l=a.c,u=a.d,c=a.tx,p=a.ty,d=o*r+l*n+c,f=u*n+h*r+p,m=o*i+l*n+c,g=u*n+h*i+p,v=o*i+l*s+c,y=u*s+h*i+p,x=o*r+l*s+c,_=u*s+h*r+p,b=-1/0,T=-1/0,w=1/0,S=1/0;w=w>d?d:w,w=w>m?m:w,w=w>v?v:w,w=w>x?x:w,S=S>f?f:S,S=S>g?g:S,S=S>y?y:S,S=S>_?_:S,b=d>b?d:b,b=m>b?m:b,b=v>b?v:b,b=x>b?x:b,T=f>T?f:T,T=g>T?g:T,T=y>T?y:T,T=_>T?_:T;var C=this._bounds;return C.x=w,C.width=b-w,C.y=S,C.height=T-S,this._currentBounds=C,C},i.TilingSprite.prototype.onTextureUpdate=function(){},i.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var e,r,s=this.originalTexture||this.texture,n=s.frame,a=n.width!==s.baseTexture.width||n.height!==s.baseTexture.height,o=!1;if(t?(e=i.getNextPowerOfTwo(n.width),r=i.getNextPowerOfTwo(n.height),(n.width!==e||n.height!==r)&&(o=!0)):a&&(e=n.width,r=n.height,o=!0),o){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(e,r),this.tilingTexture.baseTexture.width=e,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new i.CanvasBuffer(e,r),this.tilingTexture=i.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(s.baseTexture.source,s.crop.x,s.crop.y,s.crop.width,s.crop.height,0,0,e,r),this.tileScaleOffset.x=n.width/e,this.tileScaleOffset.y=n.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=s;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var r={};r.BoneData=function(t,e){this.name=t,this.parent=e},r.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},r.SlotData=function(t,e){this.name=t,this.boneData=e},r.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},r.Bone=function(t,e){this.data=t,this.parent=e,this.setToSetupPose()},r.Bone.yDown=!1,r.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(t,e){var i=this.parent;null!=i?(this.worldX=this.x*i.m00+this.y*i.m01+i.worldX,this.worldY=this.x*i.m10+this.y*i.m11+i.worldY,this.worldScaleX=i.worldScaleX*this.scaleX,this.worldScaleY=i.worldScaleY*this.scaleY,this.worldRotation=i.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var s=this.worldRotation*Math.PI/180,n=Math.cos(s),a=Math.sin(s);this.m00=n*this.worldScaleX,this.m10=a*this.worldScaleX,this.m01=-a*this.worldScaleY,this.m11=n*this.worldScaleY,t&&(this.m00=-this.m00,this.m01=-this.m01),e&&(this.m10=-this.m10,this.m11=-this.m11),r.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY}},r.Slot=function(t,e,i){this.data=t,this.skeleton=e,this.bone=i,this.setToSetupPose()},r.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment=t,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.skeleton.data.slots,i=0,r=e.length;r>i;i++)if(e[i]==t){this.setAttachment(t.attachmentName?this.skeleton.getAttachmentBySlotIndex(i,t.attachmentName):null);break}}},r.Skin=function(t){this.name=t,this.attachments={}},r.Skin.prototype={addAttachment:function(t,e,i){this.attachments[t+":"+e]=i},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var i in e.attachments){var r=i.indexOf(":"),s=parseInt(i.substring(0,r),10),n=i.substring(r+1),a=t.slots[s];if(a.attachment&&a.attachment.name==n){var o=this.getAttachment(s,n);o&&a.setAttachment(o)}}}},r.Animation=function(t,e,i){this.name=t,this.timelines=e,this.duration=i},r.Animation.prototype={apply:function(t,e,i){i&&this.duration&&(e%=this.duration);for(var r=this.timelines,s=0,n=r.length;n>s;s++)r[s].apply(t,e,1)},mix:function(t,e,i,r){i&&this.duration&&(e%=this.duration);for(var s=this.timelines,n=0,a=s.length;a>n;n++)s[n].apply(t,e,r)}},r.binarySearch=function(t,e,i){var r=0,s=Math.floor(t.length/i)-2;if(!s)return i;for(var n=s>>>1;;){if(t[(n+1)*i]<=e?r=n+1:s=n,r==s)return(r+1)*i;n=r+s>>>1}},r.linearSearch=function(t,e,i){for(var r=0,s=t.length-i;s>=r;r+=i)if(t[r]>e)return r;return-1},r.Curves=function(t){this.curves=[],this.curves.length=6*(t-1)},r.Curves.prototype={setLinear:function(t){this.curves[6*t]=0},setStepped:function(t){this.curves[6*t]=-1},setCurve:function(t,e,i,r,s){var n=.1,a=n*n,o=a*n,h=3*n,l=3*a,u=6*a,c=6*o,p=2*-e+r,d=2*-i+s,f=3*(e-r)+1,m=3*(i-s)+1,g=6*t,v=this.curves;v[g]=e*h+p*l+f*o,v[g+1]=i*h+d*l+m*o,v[g+2]=p*u+f*c,v[g+3]=d*u+m*c,v[g+4]=f*c,v[g+5]=m*c},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var i=6*t,r=this.curves,s=r[i];if(!s)return e;if(-1==s)return 0;for(var n=r[i+1],a=r[i+2],o=r[i+3],h=r[i+4],l=r[i+5],u=s,c=n,p=8;;){if(u>=e){var d=u-s,f=c-n;return f+(c-f)*(e-d)/(u-d)}if(!p)break;p--,s+=a,n+=o,a+=h,o+=l,u+=s,c+=n}return c+(1-c)*(e-u)/(1-u)}},r.RotateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i},apply:function(t,e,i){var s,n=this.frames;if(!(e<n[0])){var a=t.bones[this.boneIndex];if(e>=n[n.length-2]){for(s=a.data.rotation+n[n.length-1]-a.rotation;s>180;)s-=360;for(;-180>s;)s+=360;return void(a.rotation+=s*i)}var o=r.binarySearch(n,e,2),h=n[o-1],l=n[o],u=1-(e-l)/(n[o-2]-l);for(u=this.curves.getCurvePercent(o/2-1,u),s=n[o+1]-h;s>180;)s-=360;for(;-180>s;)s+=360;for(s=a.data.rotation+(h+s*u)-a.rotation;s>180;)s-=360;for(;-180>s;)s+=360;a.rotation+=s*i}}},r.TranslateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n=t.bones[this.boneIndex];if(e>=s[s.length-3])return n.x+=(n.data.x+s[s.length-2]-n.x)*i,void(n.y+=(n.data.y+s[s.length-1]-n.y)*i);var a=r.binarySearch(s,e,3),o=s[a-2],h=s[a-1],l=s[a],u=1-(e-l)/(s[a+-3]-l);u=this.curves.getCurvePercent(a/3-1,u),n.x+=(n.data.x+o+(s[a+1]-o)*u-n.x)*i,n.y+=(n.data.y+h+(s[a+2]-h)*u-n.y)*i}}},r.ScaleTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n=t.bones[this.boneIndex];if(e>=s[s.length-3])return n.scaleX+=(n.data.scaleX-1+s[s.length-2]-n.scaleX)*i,void(n.scaleY+=(n.data.scaleY-1+s[s.length-1]-n.scaleY)*i);var a=r.binarySearch(s,e,3),o=s[a-2],h=s[a-1],l=s[a],u=1-(e-l)/(s[a+-3]-l);u=this.curves.getCurvePercent(a/3-1,u),n.scaleX+=(n.data.scaleX-1+o+(s[a+1]-o)*u-n.scaleX)*i,n.scaleY+=(n.data.scaleY-1+h+(s[a+2]-h)*u-n.scaleY)*i}}},r.ColorTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=5*t},r.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,i,r,s,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n=t.slots[this.slotIndex];if(e>=s[s.length-5]){var a=s.length-1;return n.r=s[a-3],n.g=s[a-2],n.b=s[a-1],void(n.a=s[a])}var o=r.binarySearch(s,e,5),h=s[o-4],l=s[o-3],u=s[o-2],c=s[o-1],p=s[o],d=1-(e-p)/(s[o-5]-p);d=this.curves.getCurvePercent(o/5-1,d);var f=h+(s[o+1]-h)*d,m=l+(s[o+2]-l)*d,g=u+(s[o+3]-u)*d,v=c+(s[o+4]-c)*d;1>i?(n.r+=(f-n.r)*i,n.g+=(m-n.g)*i,n.b+=(g-n.b)*i,n.a+=(v-n.a)*i):(n.r=f,n.g=m,n.b=g,n.a=v)}}},r.AttachmentTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},r.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},apply:function(t,e){var i=this.frames;if(!(e<i[0])){var s;s=e>=i[i.length-1]?i.length-1:r.binarySearch(i,e,1)-1;var n=this.attachmentNames[s];t.slots[this.slotIndex].setAttachment(n?t.getAttachmentBySlotIndex(this.slotIndex,n):null)}}},r.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},r.SkeletonData.prototype={defaultSkin:null,findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return slot[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSkin:function(t){for(var e=this.skins,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findAnimation:function(t){for(var e=this.animations,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null}},r.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,i=t.bones.length;i>e;e++){var s=t.bones[e],n=s.parent?this.bones[t.bones.indexOf(s.parent)]:null;this.bones.push(new r.Bone(s,n))}for(this.slots=[],this.drawOrder=[],e=0,i=t.slots.length;i>e;e++){var a=t.slots[e],o=this.bones[t.bones.indexOf(a.boneData)],h=new r.Slot(a,this,o);this.slots.push(h),this.drawOrder.push(h)}},r.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var t=this.flipX,e=this.flipY,i=this.bones,r=0,s=i.length;s>r;r++)i[r].updateWorldTransform(t,e)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,i=t.length;i>e;e++)t[e].setToSetupPose()},setSlotsToSetupPose:function(){for(var t=this.slots,e=0,i=t.length;i>e;e++)t[e].setToSetupPose(e)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){this.skin&&t&&t._attachAll(this,this.skin),this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var i=this.slots,r=0,s=i.size;s>r;r++){var n=i[r];if(n.data.name==t){var a=null;if(e&&(a=this.getAttachment(r,e),null==a))throw"Attachment not found: "+e+", for slot: "+t;return void n.setAttachment(a)}}throw"Slot not found: "+t},update:function(t){time+=t}},r.AttachmentType={region:0},r.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},r.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,i,r,s){var n=this.uvs;s?(n[2]=t,n[3]=r,n[4]=t,n[5]=e,n[6]=i,n[7]=e,n[0]=i,n[1]=r):(n[0]=t,n[1]=r,n[2]=t,n[3]=e,n[4]=i,n[5]=e,n[6]=i,n[7]=r)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.regionOffsetX*t,r=-this.height/2*this.scaleY+this.regionOffsetY*e,s=i+this.regionWidth*t,n=r+this.regionHeight*e,a=this.rotation*Math.PI/180,o=Math.cos(a),h=Math.sin(a),l=i*o+this.x,u=i*h,c=r*o+this.y,p=r*h,d=s*o+this.x,f=s*h,m=n*o+this.y,g=n*h,v=this.offset;v[0]=l-p,v[1]=c+u,v[2]=l-g,v[3]=m+u,v[4]=d-g,v[5]=m+f,v[6]=d-p,v[7]=c+f},computeVertices:function(t,e,i,r){t+=i.worldX,e+=i.worldY;var s=i.m00,n=i.m01,a=i.m10,o=i.m11,h=this.offset;r[0]=h[0]*s+h[1]*n+t,r[1]=h[0]*a+h[1]*o+e,r[2]=h[2]*s+h[3]*n+t,r[3]=h[2]*a+h[3]*o+e,r[4]=h[4]*s+h[5]*n+t,r[5]=h[4]*a+h[5]*o+e,r[6]=h[6]*s+h[7]*n+t,r[7]=h[6]*a+h[7]*o+e}},r.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},r.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,i){var r=this.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;var s=this.skeletonData.findAnimation(e);if(!s)throw"Animation not found: "+e;this.setMix(r,s,i)},setMix:function(t,e,i){this.animationToMixTime[t.name+":"+e.name]=i},getMix:function(t,e){var i=this.animationToMixTime[t.name+":"+e.name];return i?i:this.defaultMix}},r.AnimationState=function(t){this.data=t,this.queue=[]},r.AnimationState.prototype={animationSpeed:1,current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(t){if(this.currentTime+=t*this.animationSpeed,this.previousTime+=t,this.mixTime+=t,this.queue.length>0){var e=this.queue[0];this.currentTime>=e.delay&&(this._setAnimation(e.animation,e.loop),this.queue.shift())}},apply:function(t){if(this.current)if(this.previous){this.previous.apply(t,this.previousTime,this.previousLoop);var e=this.mixTime/this.mixDuration;e>=1&&(e=1,this.previous=null),this.current.mix(t,this.currentTime,this.currentLoop,e)}else this.current.apply(t,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(t,e){this.previous=null,t&&this.current&&(this.mixDuration=this.data.getMix(this.current,t),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=t,this.currentLoop=e,this.currentTime=0},setAnimationByName:function(t,e){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setAnimation(i,e)},setAnimation:function(t,e){this.queue.length=0,this._setAnimation(t,e)},addAnimationByName:function(t,e,i){var r=this.data.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;this.addAnimation(r,e,i)},addAnimation:function(t,e,i){var r={};if(r.animation=t,r.loop=e,!i||0>=i){var s=this.queue.length?this.queue[this.queue.length-1].animation:this.current;i=null!=s?s.duration-this.data.getMix(s,t)+(i||0):0}r.delay=i,this.queue.push(r)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},r.SkeletonJson=function(t){this.attachmentLoader=t},r.SkeletonJson.prototype={scale:1,readSkeletonData:function(t){for(var e,i=new r.SkeletonData,s=t.bones,n=0,a=s.length;a>n;n++){var o=s[n],h=null;if(o.parent&&(h=i.findBone(o.parent),!h))throw"Parent bone not found: "+o.parent;e=new r.BoneData(o.name,h),e.length=(o.length||0)*this.scale,e.x=(o.x||0)*this.scale,e.y=(o.y||0)*this.scale,e.rotation=o.rotation||0,e.scaleX=o.scaleX||1,e.scaleY=o.scaleY||1,i.bones.push(e)}var l=t.slots;for(n=0,a=l.length;a>n;n++){var u=l[n];if(e=i.findBone(u.bone),!e)throw"Slot bone not found: "+u.bone;var c=new r.SlotData(u.name,e),p=u.color;p&&(c.r=r.SkeletonJson.toColor(p,0),c.g=r.SkeletonJson.toColor(p,1),c.b=r.SkeletonJson.toColor(p,2),c.a=r.SkeletonJson.toColor(p,3)),c.attachmentName=u.attachment,i.slots.push(c)}var d=t.skins;for(var f in d)if(d.hasOwnProperty(f)){var m=d[f],g=new r.Skin(f);for(var v in m)if(m.hasOwnProperty(v)){var y=i.findSlotIndex(v),x=m[v];for(var _ in x)if(x.hasOwnProperty(_)){var b=this.readAttachment(g,_,x[_]);null!=b&&g.addAttachment(y,_,b)}}i.skins.push(g),"default"==g.name&&(i.defaultSkin=g)}var T=t.animations;for(var w in T)T.hasOwnProperty(w)&&this.readAnimation(w,T[w],i);return i},readAttachment:function(t,e,i){e=i.name||e;var s=r.AttachmentType[i.type||"region"];if(s==r.AttachmentType.region){var n=new r.RegionAttachment;return n.x=(i.x||0)*this.scale,n.y=(i.y||0)*this.scale,n.scaleX=i.scaleX||1,n.scaleY=i.scaleY||1,n.rotation=i.rotation||0,n.width=(i.width||32)*this.scale,n.height=(i.height||32)*this.scale,n.updateOffset(),n.rendererObject={},n.rendererObject.name=e,n.rendererObject.scale={},n.rendererObject.scale.x=n.scaleX,n.rendererObject.scale.y=n.scaleY,n.rendererObject.rotation=-n.rotation*Math.PI/180,n}throw"Unknown attachment type: "+s},readAnimation:function(t,e,i){var s,n,a,o,h,l,u,c=[],p=0,d=e.bones;for(var f in d)if(d.hasOwnProperty(f)){var m=i.findBoneIndex(f);if(-1==m)throw"Bone not found: "+f;var g=d[f];for(a in g)if(g.hasOwnProperty(a))if(h=g[a],"rotate"==a){for(n=new r.RotateTimeline(h.length),n.boneIndex=m,s=0,l=0,u=h.length;u>l;l++)o=h[l],n.setFrame(s,o.time,o.angle),r.SkeletonJson.readCurve(n,s,o),s++;c.push(n),p=Math.max(p,n.frames[2*n.getFrameCount()-2])}else{if("translate"!=a&&"scale"!=a)throw"Invalid timeline type for a bone: "+a+" ("+f+")";var v=1;for("scale"==a?n=new r.ScaleTimeline(h.length):(n=new r.TranslateTimeline(h.length),v=this.scale),n.boneIndex=m,s=0,l=0,u=h.length;u>l;l++){o=h[l];var y=(o.x||0)*v,x=(o.y||0)*v;n.setFrame(s,o.time,y,x),r.SkeletonJson.readCurve(n,s,o),s++}c.push(n),p=Math.max(p,n.frames[3*n.getFrameCount()-3])}}var _=e.slots;for(var b in _)if(_.hasOwnProperty(b)){var T=_[b],w=i.findSlotIndex(b);for(a in T)if(T.hasOwnProperty(a))if(h=T[a],"color"==a){for(n=new r.ColorTimeline(h.length),n.slotIndex=w,s=0,l=0,u=h.length;u>l;l++){o=h[l];var S=o.color,C=r.SkeletonJson.toColor(S,0),A=r.SkeletonJson.toColor(S,1),R=r.SkeletonJson.toColor(S,2),E=r.SkeletonJson.toColor(S,3);n.setFrame(s,o.time,C,A,R,E),r.SkeletonJson.readCurve(n,s,o),s++}c.push(n),p=Math.max(p,n.frames[5*n.getFrameCount()-5])}else{if("attachment"!=a)throw"Invalid timeline type for a slot: "+a+" ("+b+")";for(n=new r.AttachmentTimeline(h.length),n.slotIndex=w,s=0,l=0,u=h.length;u>l;l++)o=h[l],n.setFrame(s++,o.time,o.name);c.push(n),p=Math.max(p,n.frames[n.getFrameCount()-1])}}i.animations.push(new r.Animation(t,c,p))}},r.SkeletonJson.readCurve=function(t,e,i){var r=i.curve;r&&("stepped"==r?t.curves.setStepped(e):r instanceof Array&&t.curves.setCurve(e,r[0],r[1],r[2],r[3]))},r.SkeletonJson.toColor=function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substr(2*e,2),16)/255},r.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var i=new r.AtlasReader(t),s=[];s.length=4;for(var n=null;;){var a=i.readLine();if(null==a)break;if(a=i.trim(a),a.length)if(n){var o=new r.AtlasRegion;o.name=a,o.page=n,o.rotate="true"==i.readValue(),i.readTuple(s);var h=parseInt(s[0],10),l=parseInt(s[1],10);i.readTuple(s);var u=parseInt(s[0],10),c=parseInt(s[1],10);o.u=h/n.width,o.v=l/n.height,o.rotate?(o.u2=(h+c)/n.width,o.v2=(l+u)/n.height):(o.u2=(h+u)/n.width,o.v2=(l+c)/n.height),o.x=h,o.y=l,o.width=Math.abs(u),o.height=Math.abs(c),4==i.readTuple(s)&&(o.splits=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)],4==i.readTuple(s)&&(o.pads=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)],i.readTuple(s))),o.originalWidth=parseInt(s[0],10),o.originalHeight=parseInt(s[1],10),i.readTuple(s),o.offsetX=parseInt(s[0],10),o.offsetY=parseInt(s[1],10),o.index=parseInt(i.readValue(),10),this.regions.push(o)}else{n=new r.AtlasPage,n.name=a,n.format=r.Atlas.Format[i.readValue()],i.readTuple(s),n.minFilter=r.Atlas.TextureFilter[s[0]],n.magFilter=r.Atlas.TextureFilter[s[1]];var p=i.readValue();n.uWrap=r.Atlas.TextureWrap.clampToEdge,n.vWrap=r.Atlas.TextureWrap.clampToEdge,"x"==p?n.uWrap=r.Atlas.TextureWrap.repeat:"y"==p?n.vWrap=r.Atlas.TextureWrap.repeat:"xy"==p&&(n.uWrap=n.vWrap=r.Atlas.TextureWrap.repeat),e.load(n,a),this.pages.push(n)}else n=null}},r.Atlas.prototype={findRegion:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},dispose:function(){for(var t=this.pages,e=0,i=t.length;i>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++){var s=e[i];s.page==t&&(s.u=s.x/t.width,s.v=s.y/t.height,s.rotate?(s.u2=(s.x+s.height)/t.width,s.v2=(s.y+s.width)/t.height):(s.u2=(s.x+s.width)/t.width,s.v2=(s.y+s.height)/t.height))}}},r.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},r.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},r.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},r.AtlasPage=function(){},r.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},r.AtlasRegion=function(){},r.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},r.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},r.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw"Invalid line: "+e;for(var r=0,s=i+1;3>r;r++){var n=e.indexOf(",",s);if(-1==n){if(!r)throw"Invalid line: "+e;break}t[r]=this.trim(e.substr(s,n-s)),s=n+1}return t[r]=this.trim(e.substring(s)),r+1}},r.AtlasAttachmentLoader=function(t){this.atlas=t},r.AtlasAttachmentLoader.prototype={newAttachment:function(t,e,i){switch(e){case r.AttachmentType.region:var s=this.atlas.findRegion(i);if(!s)throw"Region not found in atlas: "+i+" ("+e+")";var n=new r.RegionAttachment(i);return n.rendererObject=s,n.setUVs(s.u,s.v,s.u2,s.v2,s.rotate),n.regionOffsetX=s.offsetX,n.regionOffsetY=s.offsetY,n.regionWidth=s.width,n.regionHeight=s.height,n.regionOriginalWidth=s.originalWidth,n.regionOriginalHeight=s.originalHeight,n}throw"Unknown attachment type: "+e}},r.Bone.yDown=!0,i.AnimCache={},i.Spine=function(t){if(i.DisplayObjectContainer.call(this),this.spineData=i.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new r.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new r.AnimationStateData(this.spineData),this.state=new r.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,s=this.skeleton.drawOrder.length;s>e;e++){var n=this.skeleton.drawOrder[e],a=n.attachment,o=new i.DisplayObjectContainer;if(this.slotContainers.push(o),this.addChild(o),a instanceof r.RegionAttachment){var h=a.rendererObject.name,l=this.createSprite(n,a.rendererObject);n.currentSprite=l,n.currentSpriteName=h,o.addChild(l)}}},i.Spine.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Spine.prototype.constructor=i.Spine,i.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,s=0,n=e.length;n>s;s++){var a=e[s],o=a.attachment,h=this.slotContainers[s];if(o instanceof r.RegionAttachment){if(o.rendererObject&&(!a.currentSpriteName||a.currentSpriteName!=o.name)){var l=o.rendererObject.name;if(void 0!==a.currentSprite&&(a.currentSprite.visible=!1),a.sprites=a.sprites||{},void 0!==a.sprites[l])a.sprites[l].visible=!0;else{var u=this.createSprite(a,o.rendererObject);h.addChild(u)}a.currentSprite=a.sprites[l],a.currentSpriteName=l}h.visible=!0;var c=a.bone;h.position.x=c.worldX+o.x*c.m00+o.y*c.m01,h.position.y=c.worldY+o.x*c.m10+o.y*c.m11,h.scale.x=c.worldScaleX,h.scale.y=c.worldScaleY,h.rotation=-(a.bone.worldRotation*Math.PI/180),h.alpha=a.a,a.currentSprite.tint=i.rgb2hex([a.r,a.g,a.b])}else h.visible=!1}i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.Spine.prototype.createSprite=function(t,e){var r=i.TextureCache[e.name]?e.name:e.name+".png",s=new i.Sprite(i.Texture.fromFrame(r));return s.scale=e.scale,s.rotation=e.rotation,s.anchor.x=s.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[e.name]=s,s},i.BaseTextureCache={},i.BaseTextureCacheIdGenerator=0,i.BaseTexture=function(t,e){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=e||i.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=i._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[!0,!0,!0,!0],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},i.BaseTexture.prototype.constructor=i.BaseTexture,i.EventTarget.mixin(i.BaseTexture.prototype),i.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},i.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},i.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},i.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var e=this._glTextures[t],r=i.glContexts[t];r&&e&&r.deleteTexture(e)}this._glTextures.length=0,this.dirty()},i.BaseTexture.fromImage=function(t,e,r){var s=i.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!s){var n=new Image;e&&(n.crossOrigin=""),n.src=t,s=new i.BaseTexture(n,r),s.imageUrl=t,i.BaseTextureCache[t]=s,-1!==t.indexOf(i.RETINA_PREFIX+".")&&(s.resolution=2)}return s},i.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.TextureCacheIdGenerator++);var r=i.BaseTextureCache[t._pixiId];return r||(r=new i.BaseTexture(t,e),i.BaseTextureCache[t._pixiId]=r),r},i.TextureCache={},i.FrameCache={},i.TextureCacheIdGenerator=0,i.Texture=function(t,e,r,s){this.noFrame=!1,e||(this.noFrame=!0,e=new i.Rectangle(0,0,1,1)),t instanceof i.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=s,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new i.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(e=new i.Rectangle(0,0,t.width,t.height)),this.setFrame(e)):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},i.Texture.prototype.constructor=i.Texture,i.EventTarget.mixin(i.Texture.prototype),i.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new i.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},i.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},i.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},i.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new i.TextureUvs);var t=this.crop,e=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/r},i.Texture.fromImage=function(t,e,r){var s=i.TextureCache[t];return s||(s=new i.Texture(i.BaseTexture.fromImage(t,e,r)),i.TextureCache[t]=s),s},i.Texture.fromFrame=function(t){var e=i.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},i.Texture.fromCanvas=function(t,e){var r=i.BaseTexture.fromCanvas(t,e);return new i.Texture(r)},i.Texture.addTextureToCache=function(t,e){i.TextureCache[e]=t},i.Texture.removeTextureFromCache=function(t){var e=i.TextureCache[t];return delete i.TextureCache[t],delete i.BaseTextureCache[t],e},i.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},i.Texture.emptyTexture=new i.Texture(new i.BaseTexture),i.RenderTexture=function(t,e,r,s,n){if(this.width=t||100,this.height=e||100,this.resolution=n||1,this.frame=new i.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new i.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new i.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=s||i.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,i.Texture.call(this,this.baseTexture,new i.Rectangle(0,0,this.width,this.height)),this.renderer=r||i.defaultRenderer,this.renderer.type===i.WEBGL_RENDERER){var a=this.renderer.gl;this.baseTexture._dirty[a.id]=!1,this.textureBuffer=new i.FilterTexture(a,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[a.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new i.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new i.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},i.RenderTexture.prototype=Object.create(i.Texture.prototype),i.RenderTexture.prototype.constructor=i.RenderTexture,i.RenderTexture.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=this.frame.width=this.crop.width=t,this.height=this.frame.height=this.crop.height=e,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===i.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},i.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===i.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),
this.textureBuffer.clear())},i.RenderTexture.prototype.renderWebGL=function(t,e,i){if(this.valid){var r=t.worldTransform;r.identity(),r.translate(0,2*this.projection.y),e&&r.append(e),r.scale(1,-1),t.worldAlpha=1;for(var s=t.children,n=0,a=s.length;a>n;n++)s[n].updateTransform();var o=this.renderer.gl;o.viewport(0,0,this.width*this.resolution,this.height*this.resolution),o.bindFramebuffer(o.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},i.RenderTexture.prototype.renderCanvas=function(t,e,i){if(this.valid){var r=t.worldTransform;r.identity(),e&&r.append(e),t.worldAlpha=1;for(var s=t.children,n=0,a=s.length;a>n;n++)s[n].updateTransform();i&&this.textureBuffer.clear();var o=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,o),this.renderer.resolution=h}},i.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},i.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},i.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===i.WEBGL_RENDERER){var t=this.renderer.gl,e=this.textureBuffer.width,r=this.textureBuffer.height,s=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,s),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new i.CanvasBuffer(e,r),a=n.context.getImageData(0,0,e,r);return a.data.set(s),n.context.putImageData(a,0,0),n.canvas}return this.textureBuffer.canvas},i.RenderTexture.tempMatrix=new i.Matrix,i.VideoTexture=function(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),i.BaseTexture.call(this,t,e),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),t.complete||(this._onCanPlay=this.onCanPlay.bind(this),t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this.onPlayStart.bind(this)),t.addEventListener("pause",this.onPlayStop.bind(this)))},i.VideoTexture.prototype=Object.create(i.BaseTexture.prototype),i.VideoTexture.constructor=i.VideoTexture,i.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},i.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},i.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},i.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},i.VideoTexture.baseTextureFromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+i.TextureCacheIdGenerator++);var r=i.BaseTextureCache[t._pixiId];return r||(r=new i.VideoTexture(t,e),i.BaseTextureCache[t._pixiId]=r),r},i.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(i.BaseTextureCache[this.source._pixiId]=null,delete i.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),i.BaseTexture.prototype.destroy.call(this)},i.VideoTexture.textureFromVideo=function(t,e){var r=i.VideoTexture.baseTextureFromVideo(t,e);return new i.Texture(r)},i.VideoTexture.fromUrl=function(t,e){var r=document.createElement("video");return r.src=t,r.autoPlay=!0,r.play(),i.VideoTexture.textureFromVideo(r,e)},i.AssetLoader=function(t,e){this.assetURLs=t,this.crossorigin=e,this.loadersByType={jpg:i.ImageLoader,jpeg:i.ImageLoader,png:i.ImageLoader,gif:i.ImageLoader,webp:i.ImageLoader,json:i.JsonLoader,atlas:i.AtlasLoader,anim:i.SpineLoader,xml:i.BitmapFontLoader,fnt:i.BitmapFontLoader}},i.EventTarget.mixin(i.AssetLoader.prototype),i.AssetLoader.prototype.constructor=i.AssetLoader,i.AssetLoader.prototype._getDataType=function(t){var e="data:",i=t.slice(0,e.length).toLowerCase();if(i===e){var r=t.slice(e.length),s=r.indexOf(",");if(-1===s)return null;var n=r.slice(0,s).split(";")[0];return n&&"text/plain"!==n.toLowerCase()?n.split("/").pop().toLowerCase():"txt"}return null},i.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.data.content)}var e=this;this.loadCount=this.assetURLs.length;for(var i=0;i<this.assetURLs.length;i++){var r=this.assetURLs[i],s=this._getDataType(r);s||(s=r.split("?").shift().split(".").pop().toLowerCase());var n=this.loadersByType[s];if(!n)throw new Error(s+" is an unsupported file type");var a=new n(r,this.crossorigin);a.on("loaded",t),a.load()}},i.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.emit("onProgress",{content:this,loader:t}),this.onProgress&&this.onProgress(t),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},i.JsonLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},i.JsonLoader.prototype.constructor=i.JsonLoader,i.EventTarget.mixin(i.JsonLoader.prototype),i.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onload=this.onJSONLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},i.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var t=this.baseUrl+this.json.meta.image,e=new i.ImageLoader(t,this.crossorigin),s=this.json.frames;this.texture=e.texture.baseTexture,e.addEventListener("loaded",this.onLoaded.bind(this));for(var n in s){var a=s[n].frame;if(a){var o=new i.Rectangle(a.x,a.y,a.w,a.h),h=o.clone(),l=null;if(s[n].trimmed){var u=s[n].sourceSize,c=s[n].spriteSourceSize;l=new i.Rectangle(c.x,c.y,u.w,u.h)}i.TextureCache[n]=new i.Texture(this.texture,o,h,l)}}e.load()}else if(this.json.bones){var p=new r.SkeletonJson,d=p.readSkeletonData(this.json);i.AnimCache[this.url]=d,this.onLoaded()}else this.onLoaded()},i.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},i.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},i.AtlasLoader=function(t,e){this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},i.AtlasLoader.constructor=i.AtlasLoader,i.EventTarget.mixin(i.AtlasLoader.prototype),i.AtlasLoader.prototype.load=function(){this.ajaxRequest=new i.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},i.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,r=0,s=null,n=!1,a=0,o=0,h=this.onLoaded.bind(this);for(a=0;a<t.length;a++)if(t[a]=t[a].replace(/^\s+|\s+$/g,""),""===t[a]&&(n=a+1),t[a].length>0){if(n===a)this.atlas.meta.image.push(t[a]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),e=-3;else if(e>0)if(e%7===1)null!=s&&(this.atlas.frames[r][s.name]=s),s={name:t[a],frame:{}};else{var l=t[a].split(" ");if(e%7===3)s.frame.x=Number(l[1].replace(",","")),s.frame.y=Number(l[2]);else if(e%7===4)s.frame.w=Number(l[1].replace(",","")),s.frame.h=Number(l[2]);else if(e%7===5){var u={x:0,y:0,w:Number(l[1].replace(",","")),h:Number(l[2])};u.w>s.frame.w||u.h>s.frame.h?(s.trimmed=!0,s.realSize=u):s.trimmed=!1}}e++}if(null!=s&&(this.atlas.frames[r][s.name]=s),this.atlas.meta.image.length>0){for(this.images=[],o=0;o<this.atlas.meta.image.length;o++){var c=this.baseUrl+this.atlas.meta.image[o],p=this.atlas.frames[o];this.images.push(new i.ImageLoader(c,this.crossorigin));for(a in p){var d=p[a].frame;d&&(i.TextureCache[a]=new i.Texture(this.images[o].texture.baseTexture,{x:d.x,y:d.y,width:d.w,height:d.h}),p[a].trimmed&&(i.TextureCache[a].realSize=p[a].realSize,i.TextureCache[a].trim.x=0,i.TextureCache[a].trim.y=0))}}for(this.currentImageId=0,o=0;o<this.images.length;o++)this.images[o].on("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},i.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},i.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},i.SpriteSheetLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},i.SpriteSheetLoader.prototype.constructor=i.SpriteSheetLoader,i.EventTarget.mixin(i.SpriteSheetLoader.prototype),i.SpriteSheetLoader.prototype.load=function(){var t=this,e=new i.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},i.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},i.ImageLoader=function(t,e){this.texture=i.Texture.fromImage(t,e),this.frames=[]},i.ImageLoader.prototype.constructor=i.ImageLoader,i.EventTarget.mixin(i.ImageLoader.prototype),i.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},i.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},i.ImageLoader.prototype.loadFramedSpriteSheet=function(t,e,r){this.frames=[];for(var s=Math.floor(this.texture.width/t),n=Math.floor(this.texture.height/e),a=0,o=0;n>o;o++)for(var h=0;s>h;h++,a++){var l=new i.Texture(this.texture.baseTexture,{x:h*t,y:o*e,width:t,height:e});this.frames.push(l),r&&(i.TextureCache[r+"-"+a]=l)}this.load()},i.BitmapFontLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},i.BitmapFontLoader.prototype.constructor=i.BitmapFontLoader,i.EventTarget.mixin(i.BitmapFontLoader.prototype),i.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new i.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},i.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var e=new DOMParser;t=e.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,t=r}var s=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),n=new i.ImageLoader(s,this.crossorigin);this.texture=n.texture.baseTexture;var a={},o=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0];a.font=o.getAttribute("face"),a.size=parseInt(o.getAttribute("size"),10),a.lineHeight=parseInt(h.getAttribute("lineHeight"),10),a.chars={};for(var l=t.getElementsByTagName("char"),u=0;u<l.length;u++){var c=parseInt(l[u].getAttribute("id"),10),p=new i.Rectangle(parseInt(l[u].getAttribute("x"),10),parseInt(l[u].getAttribute("y"),10),parseInt(l[u].getAttribute("width"),10),parseInt(l[u].getAttribute("height"),10));a.chars[c]={xOffset:parseInt(l[u].getAttribute("xoffset"),10),yOffset:parseInt(l[u].getAttribute("yoffset"),10),xAdvance:parseInt(l[u].getAttribute("xadvance"),10),kerning:{},texture:i.TextureCache[c]=new i.Texture(this.texture,p)}}var d=t.getElementsByTagName("kerning");for(u=0;u<d.length;u++){var f=parseInt(d[u].getAttribute("first"),10),m=parseInt(d[u].getAttribute("second"),10),g=parseInt(d[u].getAttribute("amount"),10);a.chars[m].kerning[f]=g}i.BitmapText.fonts[a.font]=a,n.addEventListener("loaded",this.onLoaded.bind(this)),n.load()}},i.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},i.SpineLoader=function(t,e){this.url=t,this.crossorigin=e,this.loaded=!1},i.SpineLoader.prototype.constructor=i.SpineLoader,i.EventTarget.mixin(i.SpineLoader.prototype),i.SpineLoader.prototype.load=function(){var t=this,e=new i.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},i.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},i.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},i.AbstractFilter.prototype.constructor=i.AbstractFilter,i.AbstractFilter.prototype.syncUniforms=function(){for(var t=0,e=this.shaders.length;e>t;t++)this.shaders[t].dirty=!0},i.AlphaMaskFilter=function(t){i.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},i.AlphaMaskFilter.prototype=Object.create(i.AbstractFilter.prototype),i.AlphaMaskFilter.prototype.constructor=i.AlphaMaskFilter,i.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(i.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),i.ColorMatrixFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},i.ColorMatrixFilter.prototype=Object.create(i.AbstractFilter.prototype),i.ColorMatrixFilter.prototype.constructor=i.ColorMatrixFilter,Object.defineProperty(i.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),i.GrayFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},i.GrayFilter.prototype=Object.create(i.AbstractFilter.prototype),i.GrayFilter.prototype.constructor=i.GrayFilter,Object.defineProperty(i.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),i.DisplacementFilter=function(t){i.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},i.DisplacementFilter.prototype=Object.create(i.AbstractFilter.prototype),i.DisplacementFilter.prototype.constructor=i.DisplacementFilter,i.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(i.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(i.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(i.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),i.PixelateFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new i.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},i.PixelateFilter.prototype=Object.create(i.AbstractFilter.prototype),i.PixelateFilter.prototype.constructor=i.PixelateFilter,Object.defineProperty(i.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),i.BlurXFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},i.BlurXFilter.prototype=Object.create(i.AbstractFilter.prototype),i.BlurXFilter.prototype.constructor=i.BlurXFilter,Object.defineProperty(i.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),i.BlurYFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},i.BlurYFilter.prototype=Object.create(i.AbstractFilter.prototype),i.BlurYFilter.prototype.constructor=i.BlurYFilter,Object.defineProperty(i.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),i.BlurFilter=function(){this.blurXFilter=new i.BlurXFilter,this.blurYFilter=new i.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},i.BlurFilter.prototype=Object.create(i.AbstractFilter.prototype),i.BlurFilter.prototype.constructor=i.BlurFilter,Object.defineProperty(i.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(i.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(i.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),i.InvertFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},i.InvertFilter.prototype=Object.create(i.AbstractFilter.prototype),i.InvertFilter.prototype.constructor=i.InvertFilter,Object.defineProperty(i.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),i.SepiaFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},i.SepiaFilter.prototype=Object.create(i.AbstractFilter.prototype),i.SepiaFilter.prototype.constructor=i.SepiaFilter,Object.defineProperty(i.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),i.TwistFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},i.TwistFilter.prototype=Object.create(i.AbstractFilter.prototype),i.TwistFilter.prototype.constructor=i.TwistFilter,Object.defineProperty(i.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(i.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(i.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),i.ColorStepFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},i.ColorStepFilter.prototype=Object.create(i.AbstractFilter.prototype),i.ColorStepFilter.prototype.constructor=i.ColorStepFilter,Object.defineProperty(i.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),i.DotScreenFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},i.DotScreenFilter.prototype=Object.create(i.AbstractFilter.prototype),i.DotScreenFilter.prototype.constructor=i.DotScreenFilter,Object.defineProperty(i.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(i.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),i.CrossHatchFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},i.CrossHatchFilter.prototype=Object.create(i.AbstractFilter.prototype),i.CrossHatchFilter.prototype.constructor=i.CrossHatchFilter,Object.defineProperty(i.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),i.RGBSplitFilter=function(){i.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},i.RGBSplitFilter.prototype=Object.create(i.AbstractFilter.prototype),i.RGBSplitFilter.prototype.constructor=i.RGBSplitFilter,Object.defineProperty(i.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}}),Object.defineProperty(i.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}}),Object.defineProperty(i.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}),"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.PIXI=i}).call(this)},function(t,e){t.exports=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e){function i(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-r)),s=setTimeout(t,i);return r=e,s}e=t.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||i;var r=(new Date).getTime(),s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout;e.cancel=function(t){s.call(window,t)}},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){
return"function"==typeof t}function s(t){return"number"==typeof t}function n(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!s(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,o,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(i=this._events[t],a(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(n(i))for(o=Array.prototype.slice.call(arguments,1),l=i.slice(),s=l.length,h=0;h<s;h++)l[h].apply(this,o);return!0},i.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(s=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),s||(s=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var s=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,s,a,o;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],a=i.length,s=-1,i===e||r(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(i)){for(o=a;o-- >0;)if(i[o]===e||i[o].listener&&i[o].listener===e){s=o;break}if(s<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],r(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){function r(){window.onresize=a(this.resize.bind(this),100),this.resize()}var s=i(3),n=i(5).EventEmitter,a=i(7),o=i(8);s(r,n),r.prototype.resize=function(){var t=$(window);this.width=t.width(),this.height=t.height(),this.middleX=this.width/2,this.middleY=this.height/2,this.emit("resize")},t.exports=o(r)},function(t,e){t.exports=function(t,e,i){function r(){var l=Date.now()-o;l<e&&l>=0?s=setTimeout(r,e-l):(s=null,i||(h=t.apply(a,n),a=n=null))}var s,n,a,o,h;null==e&&(e=100);var l=function(){a=this,n=arguments,o=Date.now();var l=i&&!s;return s||(s=setTimeout(r,e)),l&&(h=t.apply(a,n),a=n=null),h};return l.clear=function(){s&&(clearTimeout(s),s=null)},l}},function(t,e){"use strict";var i={};t.exports=function(t){var e=t.toString(),r=function(){return e in i?i[e]:(i[e]=Object.create(t.prototype,{constructor:{value:t,enumerable:!0,writable:!0,configurable:!0}}),t.apply(i[e],arguments),i[e])};return r.__proto__=t,r},t.exports.clear=function(){i={}}},function(t,e,i){function r(){if(!(this instanceof r))return new r;var t=this;s.call(this),this.supported=!!h,this.supported?document.addEventListener(o,function(){var e=!document[h];t.emit("change",e),t.emit(e?"show":"hide")},!1):(document.addEventListener("focusout",function(){t.emit("change",!1),t.emit("hide"),a=!1},!1),document.addEventListener("focusin",function(){t.emit("change",!0),t.emit("show"),a=!0},!1)),window.addEventListener("unload",function(){t.emit("exit")},!1)}var s=i(5).EventEmitter,n=i(10),a=!0,o=null,h=null;t.exports=r,"undefined"!=typeof document.hidden?(h="hidden",o="visibilitychange"):"undefined"!=typeof document.mozHidden?(h="mozHidden",o="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden?(h="webkitHidden",o="webkitvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h="webkitHidden",o="webkitvisibilitychange"),n(r,s),r.prototype.hidden=function(){return this.supported?!!document[h]:!a},r.prototype.visible=function(){return this.supported?!document[h]:a}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){function r(){n.DisplayObjectContainer.call(this),this.drawLines=!1,this.init()}var s=i(3),n=i(2),a=i(12),o=i(6),h=i(13);s(r,n.DisplayObjectContainer),r.prototype.init=function(){this.measures=new o,this.createBgPattern(),this.particleHolder=new n.DisplayObjectContainer,this.addChild(this.particleHolder),this.particleLines=new n.Graphics,this.particleHolder.addChild(this.particleLines),this.minDist=200,this.texture=this.createCircle(),this.proton=new a,this.emitter=new a.Emitter,this.emitter.damping=.0075,this.emitter.rate=new a.Rate(h.particleEmitterRate),this.emitter.addInitialize(new a.ImageTarget(this.texture)),this.positionZone=new a.Position(new a.RectZone(0,0,this.measures.width,this.measures.height)),this.emitter.addInitialize(this.positionZone),this.emitter.addInitialize(new a.Mass(1),new a.Radius(a.getSpan(1,2))),this.crossZoneBehaviour=new a.CrossZone(new a.RectZone((-2),0,this.measures.width+2,this.measures.height),"cross"),this.emitter.addBehaviour(this.crossZoneBehaviour),this.emitter.addBehaviour(new a.Scale(a.getSpan(.5,1))),this.emitter.addBehaviour(new a.RandomDrift(3,3,.2)),this.emitter.emit("once"),this.proton.addEmitter(this.emitter);var t=new a.Renderer("other",this.proton);t.onParticleCreated=function(t){var e=new n.Sprite(t.target);t.sprite=e,this.particleHolder.addChild(t.sprite)}.bind(this),t.onParticleUpdate=function(t){this.transformSprite(t.sprite,t)}.bind(this),t.onParticleDead=function(t){this.particleHolder.removeChild(t.sprite)}.bind(this),this.measures.on("resize",this.resize.bind(this)),t.start()},r.prototype.hideLines=function(){TweenLite.to(this.particleLines,.5,{alpha:0,onComplete:function(){this.drawLines=!1}.bind(this)})},r.prototype.showLines=function(){TweenLite.to(this.particleLines,0,{alpha:1}),this.drawLines=!0},r.prototype.createBgPattern=function(){this.bgPattern=new n.TilingSprite(n.Texture.fromImage("/assets/images/bg_pat.jpg"),this.measures.width,this.measures.height),this.addChild(this.bgPattern)},r.prototype.transformSprite=function(t,e){t.position.x=e.p.x,t.position.y=e.p.y,t.scale.x=e.scale,t.scale.y=e.scale,t.anchor.x=.5,t.anchor.y=.5,t.alpha=e.alpha,t.rotation=e.rotation*Math.PI/180},r.prototype.update=function(){this.proton.update(),this.drawLines&&this.drawLinesBetweenParticles()},r.prototype.drawLinesBetweenParticles=function(){this.particleLines.clear(),window.particles=this.emitter.particles;for(var t=0;t<this.emitter.particles.length;t++)for(var e=this.emitter.particles[t],i=0,r=0;r<this.emitter.particles.length;r++){var s,n=this.emitter.particles[r],a=e.p.x-n.p.x,o=e.p.y-n.p.y;s=Math.sqrt(a*a+o*o),s<this.minDist&&i<2&&(i++,this.particleLines.lineStyle(1,16777215,.2),this.particleLines.moveTo(e.p.x,e.p.y),this.particleLines.lineTo(n.p.x,n.p.y))}},r.prototype.updateZone=function(){this.positionZone.reset(new a.RectZone((-this.particleHolder.x),(-this.particleHolder.y),this.measures.width,this.measures.height)),this.crossZoneBehaviour.reset(new a.RectZone((-this.particleHolder.x),(-this.particleHolder.y),this.measures.width,this.measures.height),"cross")},r.prototype.resize=function(){this.updateZone(this.x,this.y),this.bgPattern.width=this.measures.width,this.bgPattern.height=this.measures.height},r.prototype.createCircle=function(){var t=new n.Graphics;return t.beginFill(16777215),t.drawCircle(0,0,3),t.endFill(),t.generateTexture()},t.exports=r},function(t,e){!function(t,e){function i(t,e){this.proParticleCount=i.Util.initValue(t,i.POOL_MAX),this.integrationType=i.Util.initValue(e,i.EULER),this.emitters=[],this.renderers=[],this.time=0,this.oldTime=0,i.pool=new i.ParticlePool(this.proParticleCount),i.integrator=new i.NumericalIntegration(this.integrationType)}function r(){this.initialize()}function s(t){this.type=t.type,this.particle=t.particle,this.emitter=t.emitter}function n(){this.mats=[],this.size=0;for(var t=0;t<20;t++)this.mats.push(i.Mat3.create([0,0,0,0,0,0,0,0,0]))}function a(t){this.id="particle_"+a.ID++,this.reset(!0),i.Util.setPrototypeByObject(this,t)}function o(t,e){this.proParticleCount=i.Util.initValue(t,0),this.releaseTime=i.Util.initValue(e,-1),this.poolList=[],this.timeoutID=0;for(var r=0;r<this.proParticleCount;r++)this.add();this.releaseTime>0&&(this.timeoutID=setTimeout(this.release,this.releaseTime/1e3))}function h(t,e,r){this.isArray=!1,i.Util.isArray(t)?(this.isArray=!0,this.a=t):(this.a=i.Util.initValue(t,1),this.b=i.Util.initValue(e,this.a),this.center=i.Util.initValue(r,!1))}function l(t){i.Util.isArray(t)?this.colorArr=t:this.colorArr=[t]}function u(t,e,i,r){this.x=t,this.y=e,this.width=i,this.height=r,this.bottom=this.y+this.height,this.right=this.x+this.width}function c(t,e){this.id="Behaviour_"+c.id++,this.life=i.Util.initValue(t,1/0),this.easing=i.ease.setEasingByName(e),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.name="Behaviour"}function p(t,e){this.numPan=i.Util.initValue(t,1),this.timePan=i.Util.initValue(e,1),this.numPan=i.Util.setSpanValue(this.numPan),this.timePan=i.Util.setSpanValue(this.timePan),this.startTime=0,this.nextTime=0,this.init()}function d(){}function f(t,e,r){f._super_.call(this),this.lifePan=i.Util.setSpanValue(t,e,r)}function m(t){m._super_.call(this),this.zone=i.Util.initValue(t,new i.PointZone)}function g(t,e,r){g._super_.call(this),this.rPan=i.Util.setSpanValue(t),this.thaPan=i.Util.setSpanValue(e),this.type=i.Util.initValue(r,"vector")}function v(t,e,r){v._super_.call(this),this.massPan=i.Util.setSpanValue(t,e,r)}function y(t,e,r){y._super_.call(this),this.radius=i.Util.setSpanValue(t,e,r)}function x(t,e,r){x._super_.call(this),this.image=this.setSpanValue(t),this.w=i.Util.initValue(e,20),this.h=i.Util.initValue(r,this.w)}function _(t,e,r,s){_._super_.call(this,r,s),this.force=this.normalizeForce(new i.Vector2D(t,e)),this.name="Force"}function b(t,e,r,s,n){b._super_.call(this,s,n),this.targetPosition=i.Util.initValue(t,new i.Vector2D),this.radius=i.Util.initValue(r,1e3),this.force=i.Util.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new i.Vector2D,this.lengthSq=0,this.name="Attraction"}function T(t,e,i,r,s){T._super_.call(this,r,s),this.reset(t,e,i),this.time=0,this.name="RandomDrift"}function w(t,e,i,r,s){w._super_.call(this,t,e,i,r,s),this.force*=-1,this.name="Repulsion"}function S(t,e,i){S._super_.call(this,0,t,e,i),this.name="Gravity"}function C(t,e,i,r,s){C._super_.call(this,r,s),this.reset(t,e,i),this.name="Collision"}function A(t,e,i,r){A._super_.call(this,i,r),this.reset(t,e),this.name="CrossZone"}function R(t,e,i,r){R._super_.call(this,i,r),this.reset(t,e),this.name="Alpha"}function E(t,e,i,r){E._super_.call(this,i,r),this.reset(t,e),this.name="Scale"}function P(t,e,i,r,s){P._super_.call(this,r,s),this.reset(t,e,i),this.name="Rotate"}function M(t,e,i,r){M._super_.call(this,i,r),this.reset(t,e),this.name="Color"}function L(t,e,r,s){L._super_.call(this,r,s),this.distanceVec=new i.Vector2D,this.centerPoint=i.Util.initValue(t,new i.Vector2D),this.force=i.Util.initValue(this.normalizeValue(e),100),this.name="GravityWell"}function O(t){this.initializes=[],this.particles=[],this.behaviours=[],this.emitTime=0,this.emitTotalTimes=-1,this.damping=.006,this.bindEmitter=!0,this.rate=new i.Rate(1,.1),O._super_.call(this,t),this.id="emitter_"+O.ID++}function B(t){this.selfBehaviours=[],B._super_.call(this,t)}function D(e,r,s){this.mouseTarget=i.Util.initValue(e,t),this.ease=i.Util.initValue(r,.7),this._allowEmitting=!1,this.initEventHandler(),D._super_.call(this,s)}function F(t,e,r){this.element=r,this.type=i.Util.initValue(t,"canvas"),this.proton=e,this.renderer=this.getRenderer()}function I(t,e,i){this.proton=t,this.element=e,this.stroke=i}function k(t,e){k._super_.call(this,t,e),this.stroke=null}function U(t,e,i){U._super_.call(this,t,e),this.stroke=i}function G(t,e){G._super_.call(this,t,e),this.stroke=null,this.context=this.element.getContext("2d"),this.bufferCache={}}function N(t,e,i){N._super_.call(this,t,e),this.context=this.element.getContext("2d"),this.imageData=null,this.rectangle=null,this.rectangle=i,this.createImageData(i)}function j(t,e){j._super_.call(this,t,e),this.gl=this.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),this.gl||alert("Sorry your browser do not suppest WebGL!"),this.initVar(),this.setMaxRadius(),this.initShaders(),this.initBuffers(),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND)}function V(){this.vector=new i.Vector2D(0,0),this.random=0,this.crossType="dead",this.alert=!0}function W(t,e,r,s,n){W._super_.call(this),r-t>=0?(this.x1=t,this.y1=e,this.x2=r,this.y2=s):(this.x1=r,this.y1=s,this.x2=t,this.y2=e),this.dx=this.x2-this.x1,this.dy=this.y2-this.y1,this.minx=Math.min(this.x1,this.x2),this.miny=Math.min(this.y1,this.y2),this.maxx=Math.max(this.x1,this.x2),this.maxy=Math.max(this.y1,this.y2),this.dot=this.x2*this.y1-this.x1*this.y2,this.xxyy=this.dx*this.dx+this.dy*this.dy,this.gradient=this.getGradient(),this.length=this.getLength(),this.direction=i.Util.initValue(n,">")}function z(t,e,i){z._super_.call(this),this.x=t,this.y=e,this.radius=i,this.angle=0,this.center={x:this.x,y:this.y}}function X(t,e){X._super_.call(this),this.x=t,this.y=e}function Y(t,e,i,r){Y._super_.call(this),this.x=t,this.y=e,this.width=i,this.height=r}function H(t,e,i,r){H._super_.call(this),this.reset(t,e,i,r)}i.POOL_MAX=1e3,i.TIME_STEP=60,i.MEASURE=100,i.EULER="euler",i.RK2="runge-kutta2",i.RK4="runge-kutta4",i.VERLET="verlet",i.PARTICLE_CREATED="partilcleCreated",i.PARTICLE_UPDATE="partilcleUpdate",i.PARTICLE_SLEEP="particleSleep",i.PARTICLE_DEAD="partilcleDead",i.PROTON_UPDATE="protonUpdate",i.PROTON_UPDATE_AFTER="protonUpdateAfter",i.EMITTER_ADDED="emitterAdded",i.EMITTER_REMOVED="emitterRemoved",i.amendChangeTabsBug=!0,i.TextureBuffer={},i.TextureCanvasBuffer={},i.prototype={addRender:function(t){t.proton=this,this.renderers.push(t.proton)},addEmitter:function(t){this.emitters.push(t),t.parent=this,this.dispatchEvent(new i.Event({type:i.EMITTER_ADDED,emitter:t}))},removeEmitter:function(t){var e=this.emitters.indexOf(t);this.emitters.splice(e,1),t.parent=null,this.dispatchEvent(new i.Event({type:i.EMITTER_REMOVED,emitter:t}))},update:function(){this.dispatchEvent(new i.Event({type:i.PROTON_UPDATE})),this.oldTime||(this.oldTime=(new Date).getTime());var t=(new Date).getTime();if(this.elapsed=(t-this.oldTime)/1e3,i.amendChangeTabsBug&&this.amendChangeTabsBug(),this.oldTime=t,this.elapsed>0)for(var e=0;e<this.emitters.length;e++)this.emitters[e].update(this.elapsed);this.dispatchEvent(new i.Event({type:i.PROTON_UPDATE_AFTER}))},amendChangeTabsBug:function(){this.elapsed>.5&&(this.oldTime=(new Date).getTime(),this.elapsed=0)},getCount:function(){for(var t=0,e=this.emitters.length,i=0;i<e;i++)t+=this.emitters[i].particles.length;return t},destory:function(){for(var t=this.emitters.length,e=0;e<t;e++)this.emitters[e].destory(),delete this.emitters[e];this.emitters=[],this.time=0,this.oldTime=0,i.pool.release()}},t.Proton=i;var q=r.prototype;r.initialize=function(t){t.addEventListener=q.addEventListener,t.removeEventListener=q.removeEventListener,t.removeAllEventListeners=q.removeAllEventListeners,t.hasEventListener=q.hasEventListener,t.dispatchEvent=q.dispatchEvent},q._listeners=null,q.initialize=function(){},q.addEventListener=function(t,e){var i=this._listeners;i?this.removeEventListener(t,e):i=this._listeners={};var r=i[t];return r||(r=i[t]=[]),r.push(e),e},q.removeEventListener=function(t,e){var i=this._listeners;if(i){var r=i[t];if(r)for(var s=0,n=r.length;s<n;s++)if(r[s]==e){1==n?delete i[t]:r.splice(s,1);break}}},q.removeAllEventListeners=function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},q.dispatchEvent=function(t){var e=!1,i=this._listeners;if(t&&i){var r=i[t.type];if(!r)return e;r=r.slice();for(var s=0,n=r.length;s<n;s++){var a=r[s];e=e||a(t)}}return!!e},q.hasEventListener=function(t){var e=this._listeners;return!(!e||!e[t])},i.EventDispatcher=r,i.EventDispatcher.initialize(i.prototype),i.Event=s;var Z=Z||{initValue:function(t,i){var t=null!=t&&t!=e?t:i;return t},isArray:function(t){return"object"==typeof t&&t.hasOwnProperty("length")},destroyArray:function(t){t.length=0},destroyObject:function(t){for(var e in t)delete t[e]},getVector2D:function(t,e){if("object"==typeof t)return t;var r=new i.Vector2D(t,e);return r},judgeVector2D:function(t){var e="";return(t.hasOwnProperty("x")||t.hasOwnProperty("y")||t.hasOwnProperty("p")||t.hasOwnProperty("position"))&&(e+="p"),(t.hasOwnProperty("vx")||t.hasOwnProperty("vx")||t.hasOwnProperty("v")||t.hasOwnProperty("velocity"))&&(e+="v"),(t.hasOwnProperty("ax")||t.hasOwnProperty("ax")||t.hasOwnProperty("a")||t.hasOwnProperty("accelerate"))&&(e+="a"),e},setVector2DByObject:function(t,e){e.hasOwnProperty("x")&&(t.p.x=e.x),e.hasOwnProperty("y")&&(t.p.y=e.y),e.hasOwnProperty("vx")&&(t.v.x=e.vx),e.hasOwnProperty("vy")&&(t.v.y=e.vy),e.hasOwnProperty("ax")&&(t.a.x=e.ax),e.hasOwnProperty("ay")&&(t.a.y=e.ay),e.hasOwnProperty("p")&&particle.p.copy(e.p),e.hasOwnProperty("v")&&particle.v.copy(e.v),e.hasOwnProperty("a")&&particle.a.copy(e.a),e.hasOwnProperty("position")&&particle.p.copy(e.position),e.hasOwnProperty("velocity")&&particle.v.copy(e.velocity),e.hasOwnProperty("accelerate")&&particle.a.copy(e.accelerate)},addPrototypeByObject:function(t,e,r){for(var s in e)r?r.indexOf(s)<0&&(t[s]=i.Util.getSpanValue(e[s])):t[s]=i.Util.getSpanValue(e[s]);return t},setPrototypeByObject:function(t,e,r){for(var s in e)t.hasOwnProperty(s)&&(r?r.indexOf(s)<0&&(t[s]=i.Util.getSpanValue(e[s])):t[s]=i.Util.getSpanValue(e[s]));return t},setSpanValue:function(t,e,r){return t instanceof i.Span?t:e?r?new i.Span(t,e,r):new i.Span(t,e):new i.Span(t)},getSpanValue:function(t){return t instanceof i.Span?t.getValue():t},inherits:function(t,e){if(t._super_=e,Object.create)t.prototype=Object.create(e.prototype,{constructor:{value:e}});else{var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},getImageData:function(t,e,i){t.drawImage(e,i.x,i.y);var r=t.getImageData(i.x,i.y,i.width,i.height);return t.clearRect(i.x,i.y,i.width,i.height),r},getImage:function(t,e,i,r){"string"==typeof t?this.loadAndSetImage(t,e,i,r):"object"==typeof t?this.loadAndSetImage(t.src,e,i,r):t instanceof Image&&this.loadedImage(t.src,e,i,r,t)},loadedImage:function(t,e,r,s,n){if(e.target=n,e.transform.src=t,i.TextureBuffer[t]||(i.TextureBuffer[t]=e.target),r)if(i.TextureCanvasBuffer[t])e.transform.canvas=i.TextureCanvasBuffer[t];else{var a=i.WebGLUtil.nhpot(e.target.width),o=i.WebGLUtil.nhpot(e.target.height);e.transform.canvas=i.DomUtil.createCanvas("canvas"+t,a,o);var h=e.transform.canvas.getContext("2d");h.drawImage(e.target,0,0,e.target.width,e.target.height),i.TextureCanvasBuffer[t]=e.transform.canvas}s&&s(e)},loadAndSetImage:function(t,e,r,s){if(i.TextureBuffer[t])this.loadedImage(t,e,r,s,i.TextureBuffer[t]);else{var n=this,a=new Image;a.onload=function(i){n.loadedImage(t,e,r,s,i.target)},a.src=t}},hexToRGB:function(t){var e="#"==t.charAt(0)?t.substring(1,7):t,i=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return{r:i,g:r,b:s}},rgbToHex:function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"}};i.Util=Z;var Q=Q||{ipot:function(t){return 0==(t&t-1)},nhpot:function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},makeTranslation:function(t,e){return[1,0,0,0,1,0,t,e,1]},makeRotation:function(t){var e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]},makeScale:function(t,e){return[t,0,0,0,e,0,0,0,1]},matrixMultiply:function(t,e){var i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],h=t[6],l=t[7],u=t[8],c=e[0],p=e[1],d=e[2],f=e[3],m=e[4],g=e[5],v=e[6],y=e[7],x=e[8];return[i*c+r*f+s*v,i*p+r*m+s*y,i*d+r*g+s*x,n*c+a*f+o*v,n*p+a*m+o*y,n*d+a*g+o*x,h*c+l*f+u*v,h*p+l*m+u*y,h*d+l*g+u*x]}};i.WebGLUtil=Q;var K=K||{createCanvas:function(t,e,i,r){var s=document.createElement("canvas"),n=r?r:"absolute";return s.id=t,s.width=e,s.height=i,s.style.position=n,s.style.opacity=0,this.transformDom(s,-500,-500,0,0),s},transformDom:function(t,e,i,r,s){t.style.WebkitTransform="translate("+e+"px, "+i+"px) scale("+r+") rotate("+s+"deg)",t.style.MozTransform="translate("+e+"px, "+i+"px) scale("+r+") rotate("+s+"deg)",t.style.OTransform="translate("+e+"px, "+i+"px) scale("+r+") rotate("+s+"deg)",t.style.msTransform="translate("+e+"px, "+i+"px) scale("+r+") rotate("+s+"deg)",t.style.transform="translate("+e+"px, "+i+"px) scale("+r+") rotate("+s+"deg)"}};i.DomUtil=K,n.prototype.set=function(t,e){0==e?i.Mat3.set(t,this.mats[0]):i.Mat3.multiply(this.mats[e-1],t,this.mats[e]),this.size=Math.max(this.size,e+1)},n.prototype.push=function(t){0==this.size?i.Mat3.set(t,this.mats[0]):i.Mat3.multiply(this.mats[this.size-1],t,this.mats[this.size]),this.size++},n.prototype.pop=function(){this.size>0&&this.size--},n.prototype.top=function(){return this.mats[this.size-1]},i.MStack=n,a.ID=0,a.prototype={getDirection:function(){return Math.atan2(this.v.x,-this.v.y)*(180/Math.PI)},reset:function(t){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.target=null,this.sprite=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.easing=i.ease.setEasingByName(i.easeLinear),t?(this.transform={},this.p=new i.Vector2D,this.v=new i.Vector2D,this.a=new i.Vector2D,this.old={p:new i.Vector2D,v:new i.Vector2D,a:new i.Vector2D},this.behaviours=[]):(i.Util.destroyObject(this.transform),this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.removeAllBehaviours()),this.transform.rgb={r:255,g:255,b:255},this},update:function(t,e){if(!this.sleep){this.age+=t;var i,r=this.behaviours.length;for(i=0;i<r;i++)this.behaviours[i]&&this.behaviours[i].applyBehaviour(this,t,e)}if(this.age>=this.life)this.destory();else{var s=this.easing(this.age/this.life);this.energy=Math.max(1-s,0)}},addBehaviour:function(t){this.behaviours.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)},addBehaviours:function(t){var e,i=t.length;for(e=0;e<i;e++)this.addBehaviour(t[e])},removeBehaviour:function(t){var e=this.behaviours.indexOf(t);if(e>-1){var t=this.behaviours.splice(e,1);t.parents=null}},removeAllBehaviours:function(){i.Util.destroyArray(this.behaviours)},destory:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}},i.Particle=a,o.prototype={create:function(t){return t?new newTypeParticle:new i.Particle},getCount:function(){return this.poolList.length},add:function(){return this.poolList.push(this.create())},get:function(){return 0===this.poolList.length?this.create():this.poolList.pop().reset()},set:function(t){if(this.poolList.length<i.POOL_MAX)return this.poolList.push(t)},release:function(){for(var t=0;t<this.poolList.length;t++)this.poolList[t].destory&&this.poolList[t].destory(),delete this.poolList[t];this.poolList=[]}},i.ParticlePool=o;var $={randomAToB:function(t,e,i){return i?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)},randomFloating:function(t,e,i){return $.randomAToB(t-e,t+e,i)},randomZone:function(t){},degreeTransform:function(t){return t*Math.PI/180},toColor16:function(t){return"#"+t.toString(16)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)}};i.MathUtils=$;var J=function(t){this.type=i.Util.initValue(t,i.EULER)};J.prototype={integrate:function(t,e,i){this.eulerIntegrate(t,e,i)},eulerIntegrate:function(t,e,i){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),i&&t.v.multiplyScalar(i),t.a.clear())}},i.NumericalIntegration=J;var tt=function(t,e){this.x=t||0,this.y=e||0};tt.prototype={set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getGradient:function(){return 0!=this.x?Math.atan2(this.y,this.x):this.y>0?Math.PI/2:this.y<0?-Math.PI/2:void 0},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return i!==e?this.addVectors(t,i):(this.x+=t.x,this.y+=t.y,this)},addXY:function(t,e){return this.x+=t,this.y+=e,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,i){return i!==e?this.subVectors(t,i):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},rotate:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)+i*Math.sin(t),this.y=-e*Math.sin(t)+i*Math.cos(t),this},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},toArray:function(){return[this.x,this.y]},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new i.Vector2D(this.x,this.y)}},i.Vector2D=tt;var et=function(t,e){this.r=Math.abs(t)||0,this.tha=e||0};et.prototype={set:function(t,e){return this.r=t,this.tha=e,this},setR:function(t){return this.r=t,this},setTha:function(t){return this.tha=t,this},copy:function(t){return this.r=t.r,this.tha=t.tha,this},toVector:function(){return new i.Vector2D(this.getX(),this.getY())},getX:function(){return this.r*Math.sin(this.tha)},getY:function(){return-this.r*Math.cos(this.tha)},normalize:function(){return this.r=1,this},equals:function(t){return t.r===this.r&&t.tha===this.tha},toArray:function(){return[this.r,this.tha]},clear:function(){return this.r=0,this.tha=0,this},clone:function(){return new i.Polar2D(this.r,this.tha)}},i.Polar2D=et,h.prototype={getValue:function(t){return this.isArray?this.a[Math.floor(this.a.length*Math.random())]:this.center?i.MathUtils.randomFloating(this.a,this.b,t):i.MathUtils.randomAToB(this.a,this.b,t)}},i.Span=h,i.getSpan=function(t,e,r){return new i.Span(t,e,r)},i.Util.inherits(l,i.Span),l.prototype.getValue=function(){var t=this.colorArr[Math.floor(this.colorArr.length*Math.random())];return"random"==t||"Random"==t?i.MathUtils.randomColor():t},i.ColorSpan=l,u.prototype={contains:function(t,e){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y}},i.Rectangle=u;var it=it||{create:function(t){var e=new Float32Array(9);return t&&this.set(t,e),e},set:function(t,e){for(var i=0;i<9;i++)e[i]=t[i];return e},multiply:function(t,e,i){var r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],h=t[6],l=t[7],u=e[0],c=e[1],p=e[2],d=e[3],f=e[4],m=e[6],g=e[7];return i[0]=u*r+c*a,i[1]=u*s+c*o,i[2]=n*p,i[3]=d*r+f*a,i[4]=d*s+f*o,i[6]=m*r+g*a+h,i[7]=m*s+g*o+l,i},inverse:function(t,e){var i,r=t[0],s=t[1],n=t[3],a=t[4],o=t[6],h=t[7],l=a,u=-n,c=h*n-a*o,p=r*l+s*u;return i=1/p,e[0]=l*i,e[1]=-s*i,e[3]=u*i,e[4]=r*i,e[6]=c*i,e[7]=(-h*r+s*o)*i,e},multiplyVec2:function(t,e,i){var r=e[0],s=e[1];return i[0]=r*t[0]+s*t[3]+t[6],i[1]=r*t[1]+s*t[4]+t[7],i}};i.Mat3=it,c.id=0,c.prototype={reset:function(t,e){this.life=i.Util.initValue(t,1/0),this.easing=i.Util.initValue(e,i.ease.setEasingByName(i.easeLinear))},normalizeForce:function(t){return t.multiplyScalar(i.MEASURE)},normalizeValue:function(t){return t*i.MEASURE},initialize:function(t){},applyBehaviour:function(t,e,i){if(this.age+=e,this.age>=this.life||this.dead)this.energy=0,this.dead=!0,this.destory();else{var r=this.easing(t.age/t.life);this.energy=Math.max(1-r,0)}},destory:function(){var t,e=this.parents.length;for(t=0;t<e;t++)this.parents[t].removeBehaviour(this);this.parents=[]}},i.Behaviour=c,p.prototype={init:function(){this.startTime=0,this.nextTime=this.timePan.getValue()},getValue:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),1==this.numPan.b?this.numPan.getValue(!1)>.5?1:0:this.numPan.getValue(!0)):0}},i.Rate=p,d.prototype.reset=function(){},d.prototype.init=function(t,e){e?this.initialize(e):this.initialize(t)},d.prototype.initialize=function(t){},i.Initialize=d;var rt={initialize:function(t,e,r){var s,n=r.length;for(s=0;s<n;s++)r[s]instanceof i.Initialize?r[s].init(t,e):i.InitializeUtil.init(t,e,r[s]);i.InitializeUtil.bindEmitter(t,e)},init:function(t,e,r){i.Util.setPrototypeByObject(e,r),i.Util.setVector2DByObject(e,r)},bindEmitter:function(t,e){t.bindEmitter&&(e.p.add(t.p),e.v.add(t.v),e.a.add(t.a),e.v.rotate(i.MathUtils.degreeTransform(t.rotation)))}};i.InitializeUtil=rt,i.Util.inherits(f,i.Initialize),f.prototype.initialize=function(t){this.lifePan.a==1/0?t.life=1/0:t.life=this.lifePan.getValue()},i.Life=f,i.Util.inherits(m,i.Initialize),m.prototype.reset=function(t){this.zone=i.Util.initValue(t,new i.PointZone)},m.prototype.initialize=function(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y},i.Position=m,i.P=m,i.Util.inherits(g,i.Initialize),g.prototype.reset=function(t,e,r){this.rPan=i.Util.setSpanValue(t),this.thaPan=i.Util.setSpanValue(e),this.type=i.Util.initValue(r,"vector")},g.prototype.normalizeVelocity=function(t){return t*i.MEASURE},g.prototype.initialize=function(t){if("p"==this.type||"P"==this.type||"polar"==this.type){
var e=new i.Polar2D(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*Math.PI/180);t.v.x=e.getX(),t.v.y=e.getY()}else t.v.x=this.normalizeVelocity(this.rPan.getValue()),t.v.y=this.normalizeVelocity(this.thaPan.getValue())},i.Velocity=g,i.V=g,i.Util.inherits(v,i.Initialize),v.prototype.initialize=function(t){t.mass=this.massPan.getValue()},i.Mass=v,i.Util.inherits(y,i.Initialize),y.prototype.reset=function(t,e,r){this.radius=i.Util.setSpanValue(t,e,r)},y.prototype.initialize=function(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius},i.Radius=y,i.Util.inherits(x,i.Initialize),x.prototype.initialize=function(t){var e=this.image.getValue();"string"==typeof e?t.target={width:this.w,height:this.h,src:e}:t.target=e},x.prototype.setSpanValue=function(t){return t instanceof i.ColorSpan?t:new i.ColorSpan(t)},i.ImageTarget=x,i.Util.inherits(_,i.Behaviour),_.prototype.reset=function(t,e,r,s){this.force=this.normalizeForce(new i.Vector2D(t,e)),r&&_._super_.prototype.reset.call(this,r,s)},_.prototype.applyBehaviour=function(t,e,i){_._super_.prototype.applyBehaviour.call(this,t,e,i),t.a.add(this.force)},i.Force=_,i.F=_,i.Util.inherits(b,i.Behaviour),b.prototype.reset=function(t,e,r,s,n){this.targetPosition=i.Util.initValue(t,new i.Vector2D),this.radius=i.Util.initValue(r,1e3),this.force=i.Util.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new i.Vector2D,this.lengthSq=0,s&&b._super_.prototype.reset.call(this,s,n)},b.prototype.applyBehaviour=function(t,e,i){b._super_.prototype.applyBehaviour.call(this,t,e,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))},i.Attraction=b,i.Util.inherits(T,i.Behaviour),T.prototype.reset=function(t,e,r,s,n){this.panFoce=new i.Vector2D(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=r,s&&T._super_.prototype.reset.call(this,s,n)},T.prototype.applyBehaviour=function(t,e,r){T._super_.prototype.applyBehaviour.call(this,t,e,r),this.time+=e,this.time>=this.delay&&(t.a.addXY(i.MathUtils.randomAToB(-this.panFoce.x,this.panFoce.x),i.MathUtils.randomAToB(-this.panFoce.y,this.panFoce.y)),this.time=0)},i.RandomDrift=T,i.Util.inherits(w,i.Attraction),w.prototype.reset=function(t,e,i,r,s){w._super_.prototype.reset.call(this,t,e,i,r,s),this.force*=-1},i.Repulsion=w,i.Util.inherits(S,i.Force),S.prototype.reset=function(t,e,i){S._super_.prototype.reset.call(this,0,t,e,i)},i.Gravity=S,i.G=S,i.Util.inherits(C,i.Behaviour),C.prototype.reset=function(t,e,r,s,n){this.emitter=i.Util.initValue(t,null),this.mass=i.Util.initValue(e,!0),this.callback=i.Util.initValue(r,null),this.collisionPool=[],this.delta=new i.Vector2D,s&&C._super_.prototype.reset.call(this,s,n)},C.prototype.applyBehaviour=function(t,e,i){for(var r,s,n,a,o,h=this.emitter?this.emitter.particles.slice(i):this.pool.slice(i),l=h.length,u=0;u<l;u++)r=h[u],r!==t&&(this.delta.copy(r.p),this.delta.sub(t.p),s=this.delta.lengthSq(),distance=t.radius+r.radius,s<=distance*distance&&(n=distance-Math.sqrt(s),n+=.5,totalMass=t.mass+r.mass,a=this.mass?r.mass/totalMass:.5,o=this.mass?t.mass/totalMass:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(n*-a)),r.p.add(this.delta.normalize().multiplyScalar(n*o)),this.callback&&this.callback(t,r)))},i.Collision=C,i.Util.inherits(A,i.Behaviour),A.prototype.reset=function(t,e,r,s){this.zone=t,this.zone.crossType=i.Util.initValue(e,"dead"),r&&A._super_.prototype.reset.call(this,r,s)},A.prototype.applyBehaviour=function(t,e,i){A._super_.prototype.applyBehaviour.call(this,t,e,i),this.zone.crossing(t)},i.CrossZone=A,i.Util.inherits(R,i.Behaviour),R.prototype.reset=function(t,r,s,n){null==r||r==e?this.same=!0:this.same=!1,this.a=i.Util.setSpanValue(i.Util.initValue(t,1)),this.b=i.Util.setSpanValue(r),s&&R._super_.prototype.reset.call(this,s,n)},R.prototype.initialize=function(t){t.transform.alphaA=this.a.getValue(),this.same?t.transform.alphaB=t.transform.alphaA:t.transform.alphaB=this.b.getValue()},R.prototype.applyBehaviour=function(t,e,i){R._super_.prototype.applyBehaviour.call(this,t,e,i),t.alpha=t.transform.alphaB+(t.transform.alphaA-t.transform.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0)},i.Alpha=R,i.Util.inherits(E,i.Behaviour),E.prototype.reset=function(t,r,s,n){null==r||r==e?this.same=!0:this.same=!1,this.a=i.Util.setSpanValue(i.Util.initValue(t,1)),this.b=i.Util.setSpanValue(r),s&&E._super_.prototype.reset.call(this,s,n)},E.prototype.initialize=function(t){t.transform.scaleA=this.a.getValue(),t.transform.oldRadius=t.radius,this.same?t.transform.scaleB=t.transform.scaleA:t.transform.scaleB=this.b.getValue()},E.prototype.applyBehaviour=function(t,e,i){E._super_.prototype.applyBehaviour.call(this,t,e,i),t.scale=t.transform.scaleB+(t.transform.scaleA-t.transform.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale},i.Scale=E,i.Util.inherits(P,i.Behaviour),P.prototype.reset=function(t,r,s,n,a){null==r||r==e?this.same=!0:this.same=!1,this.a=i.Util.setSpanValue(i.Util.initValue(t,"Velocity")),this.b=i.Util.setSpanValue(i.Util.initValue(r,0)),this.style=i.Util.initValue(s,"to"),n&&P._super_.prototype.reset.call(this,n,a)},P.prototype.initialize=function(t){t.rotation=this.a.getValue(),t.transform.rotationA=this.a.getValue(),this.same||(t.transform.rotationB=this.b.getValue())},P.prototype.applyBehaviour=function(t,e,i){P._super_.prototype.applyBehaviour.call(this,t,e,i),this.same?"V"!=this.a.a&&"Velocity"!=this.a.a&&"v"!=this.a.a||(t.rotation=t.getDirection()):"to"==this.style||"TO"==this.style||"_"==this.style?t.rotation+=t.transform.rotationB+(t.transform.rotationA-t.transform.rotationB)*this.energy:t.rotation+=t.transform.rotationB},i.Rotate=P,i.Util.inherits(M,i.Behaviour),M.prototype.reset=function(t,e,i,r){this.color1=this.setSpanValue(t),this.color2=this.setSpanValue(e),i&&M._super_.prototype.reset.call(this,i,r)},M.prototype.initialize=function(t){t.color=this.color1.getValue(),t.transform.beginRGB=i.Util.hexToRGB(t.color),this.color2&&(t.transform.endRGB=i.Util.hexToRGB(this.color2.getValue()))},M.prototype.applyBehaviour=function(t,e,i){this.color2?(M._super_.prototype.applyBehaviour.call(this,t,e,i),t.transform.rgb.r=t.transform.endRGB.r+(t.transform.beginRGB.r-t.transform.endRGB.r)*this.energy,t.transform.rgb.g=t.transform.endRGB.g+(t.transform.beginRGB.g-t.transform.endRGB.g)*this.energy,t.transform.rgb.b=t.transform.endRGB.b+(t.transform.beginRGB.b-t.transform.endRGB.b)*this.energy,t.transform.rgb.r=parseInt(t.transform.rgb.r,10),t.transform.rgb.g=parseInt(t.transform.rgb.g,10),t.transform.rgb.b=parseInt(t.transform.rgb.b,10)):(t.transform.rgb.r=t.transform.beginRGB.r,t.transform.rgb.g=t.transform.beginRGB.g,t.transform.rgb.b=t.transform.beginRGB.b)},M.prototype.setSpanValue=function(t){return t?t instanceof i.ColorSpan?t:new i.ColorSpan(t):null},i.Color=M,i.Util.inherits(L,i.Behaviour),L.prototype.reset=function(t,e,r,s){this.distanceVec=new i.Vector2D,this.centerPoint=i.Util.initValue(t,new i.Vector2D),this.force=i.Util.initValue(this.normalizeValue(e),100),r&&L._super_.prototype.reset.call(this,r,s)},L.prototype.initialize=function(t){},L.prototype.applyBehaviour=function(t,e,i){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);var r=this.distanceVec.lengthSq();if(0!=r){var s=this.distanceVec.length(),n=this.force*e/(r*s);t.v.x+=n*this.distanceVec.x,t.v.y+=n*this.distanceVec.y}},i.GravityWell=L,O.ID=0,i.Util.inherits(O,i.Particle),i.EventDispatcher.initialize(O.prototype),O.prototype.emit=function(t,e){this.emitTime=0,this.emitTotalTimes=i.Util.initValue(t,1/0),1==e||"life"==e||"destroy"==e?"once"==t?this.life=1:this.life=this.emitTotalTimes:isNaN(e)||(this.life=e),this.rate.init()},O.prototype.stopEmit=function(){this.emitTotalTimes=-1,this.emitTime=0},O.prototype.removeAllParticles=function(){for(var t=0;t<this.particles.length;t++)this.particles[t].dead=!0},O.prototype.createParticle=function(t,e){var r=i.pool.get();return this.setupParticle(r,t,e),this.dispatchEvent(new i.Event({type:i.PARTICLE_CREATED,particle:r})),r},O.prototype.addSelfInitialize=function(t){t.init?t.init(this):this.initAll()},O.prototype.addInitialize=function(){var t,e=arguments.length;for(t=0;t<e;t++)this.initializes.push(arguments[t])},O.prototype.removeInitialize=function(t){var e=this.initializes.indexOf(t);e>-1&&this.initializes.splice(e,1)},O.prototype.removeInitializers=function(){i.Util.destroyArray(this.initializes)},O.prototype.addBehaviour=function(){var t,e=arguments.length;for(t=0;t<e;t++)this.behaviours.push(arguments[t]),arguments[t].hasOwnProperty("parents")&&arguments[t].parents.push(this)},O.prototype.removeBehaviour=function(t){var e=this.behaviours.indexOf(t);e>-1&&this.behaviours.splice(e,1)},O.prototype.removeAllBehaviours=function(){i.Util.destroyArray(this.behaviours)},O.prototype.integrate=function(t){var e=1-this.damping;i.integrator.integrate(this,t,e);var r,s=this.particles.length;for(r=0;r<s;r++){var n=this.particles[r];n.update(t,r),i.integrator.integrate(n,t,e),this.dispatchEvent(new i.Event({type:i.PARTICLE_UPDATE,particle:n}))}},O.prototype.emitting=function(t){if("once"==this.emitTotalTimes){var e,i=this.rate.getValue(99999);for(e=0;e<i;e++)this.createParticle();this.emitTotalTimes="none"}else if(!isNaN(this.emitTotalTimes)&&(this.emitTime+=t,this.emitTime<this.emitTotalTimes)){var e,i=this.rate.getValue(t);for(e=0;e<i;e++)this.createParticle()}},O.prototype.update=function(t){this.age+=t,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(t),this.integrate(t);var e,r,s=this.particles.length;for(r=s-1;r>=0;r--)e=this.particles[r],e.dead&&(i.pool.set(e),this.particles.splice(r,1),this.dispatchEvent(new i.Event({type:i.PARTICLE_DEAD,particle:e})))},O.prototype.setupParticle=function(t,e,r){var s=this.initializes,n=this.behaviours;e&&(s=e instanceof Array?e:[e]),r&&(n=r instanceof Array?r:[r]),i.InitializeUtil.initialize(this,t,s),t.addBehaviours(n),t.parent=this,this.particles.push(t)},O.prototype.destroy=function(){this.dead=!0,this.emitTotalTimes=-1,0==this.particles.length&&(this.removeInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this))},i.Emitter=O,i.Util.inherits(B,i.Emitter),B.prototype.addSelfBehaviour=function(){var t,e=arguments.length;for(t=0;t<e;t++)this.selfBehaviours.push(arguments[t])},B.prototype.removeSelfBehaviour=function(t){var e=this.selfBehaviours.indexOf(t);e>-1&&this.selfBehaviours.splice(e,1)},B.prototype.update=function(t){if(B._super_.prototype.update.call(this,t),!this.sleep){var e,i=this.selfBehaviours.length;for(e=0;e<i;e++)this.selfBehaviours[e].applyBehaviour(this,t,e)}},i.BehaviourEmitter=B,i.Util.inherits(D,i.Emitter),D.prototype.initEventHandler=function(){var t=this;this.mousemoveHandler=function(e){t.mousemove.call(t,e)},this.mousedownHandler=function(e){t.mousedown.call(t,e)},this.mouseupHandler=function(e){t.mouseup.call(t,e)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)},D.prototype.emit=function(){this._allowEmitting=!0},D.prototype.stopEmit=function(){this._allowEmitting=!1},D.prototype.mousemove=function(t){t.layerX||0==t.layerX?(this.p.x+=(t.layerX-this.p.x)*this.ease,this.p.y+=(t.layerY-this.p.y)*this.ease):(t.offsetX||0==t.offsetX)&&(this.p.x+=(t.offsetX-this.p.x)*this.ease,this.p.y+=(t.offsetY-this.p.y)*this.ease),this._allowEmitting&&D._super_.prototype.emit.call(this,"once")},D.prototype.destroy=function(){D._super_.prototype.destroy.call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)},i.FollowEmitter=D;var st=st||{easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},setEasingByName:function(t){switch(t){case"easeLinear":return i.ease.easeLinear;case"easeInQuad":return i.ease.easeInQuad;case"easeOutQuad":return i.ease.easeOutQuad;case"easeInOutQuad":return i.ease.easeInOutQuad;case"easeInCubic":return i.ease.easeInCubic;case"easeOutCubic":return i.ease.easeOutCubic;case"easeInOutCubic":return i.ease.easeInOutCubic;case"easeInQuart":return i.ease.easeInQuart;case"easeOutQuart":return i.ease.easeOutQuart;case"easeInOutQuart":return i.ease.easeInOutQuart;case"easeInSine":return i.ease.easeInSine;case"easeOutSine":return i.ease.easeOutSine;case"easeInOutSine":return i.ease.easeInOutSine;case"easeInExpo":return i.ease.easeInExpo;case"easeOutExpo":return i.ease.easeOutExpo;case"easeInOutExpo":return i.ease.easeInOutExpo;case"easeInCirc":return i.ease.easeInCirc;case"easeOutCirc":return i.ease.easeOutCirc;case"easeInOutCirc":return i.ease.easeInOutCirc;case"easeInBack":return i.ease.easeInBack;case"easeOutBack":return i.ease.easeOutBack;case"easeInOutBack":return i.ease.easeInOutBack;default:return i.ease.easeLinear}}};i.ease=st,i.easeLinear="easeLinear",i.easeInQuad="easeInQuad",i.easeOutQuad="easeOutQuad",i.easeInOutQuad="easeInOutQuad",i.easeInCubic="easeInCubic",i.easeOutCubic="easeOutCubic",i.easeInOutCubic="easeInOutCubic",i.easeInQuart="easeInQuart",i.easeOutQuart="easeOutQuart",i.easeInOutQuart="easeInOutQuart",i.easeInSine="easeInSine",i.easeOutSine="easeOutSine",i.easeInOutSine="easeInOutSine",i.easeInExpo="easeInExpo",i.easeOutExpo="easeOutExpo",i.easeInOutExpo="easeInOutExpo",i.easeInCirc="easeInCirc",i.easeOutCirc="easeOutCirc",i.easeInOutCirc="easeInOutCirc",i.easeInBack="easeInBack",i.easeOutBack="easeOutBack",i.easeInOutBack="easeInOutBack",F.prototype={start:function(){this.addEventHandler(),this.renderer.start()},stop:function(){this.renderer.stop()},resize:function(t,e){this.renderer.resize(t,e)},setStroke:function(t,e){this.renderer.hasOwnProperty("stroke")?this.renderer.setStroke(t,e):alert("Sorry this renderer do not suppest stroke method!")},createImageData:function(t){this.renderer instanceof i.PixelRender&&this.renderer.createImageData(t)},setMaxRadius:function(t){this.renderer instanceof i.WebGLRender&&this.renderer.setMaxRadius(t)},blendEquation:function(t){this.renderer instanceof i.WebGLRender&&this.renderer.blendEquation(t)},blendFunc:function(t,e){this.renderer instanceof i.WebGLRender&&this.renderer.blendFunc(t,e)},setType:function(t){this.type=t,this.renderer=this.getRenderer()},getRenderer:function(){switch(this.type){case"dom":return new i.DomRender(this.proton,this.element);case"canvas":return new i.CanvasRender(this.proton,this.element);case"webgl":return new i.WebGLRender(this.proton,this.element);case"easel":return new i.EaselRender(this.proton,this.element);case"easeljs":return new i.EaselRender(this.proton,this.element);case"pixel":return new i.PixelRender(this.proton,this.element);default:return new i.BaseRender(this.proton,this.element)}},render:function(t){this.renderer.render(t)},addEventHandler:function(){this.onProtonUpdate&&(this.renderer.onProtonUpdate=this.onProtonUpdate),this.onParticleCreated&&(this.renderer.onParticleCreated=this.onParticleCreated),this.onParticleUpdate&&(this.renderer.onParticleUpdate=this.onParticleUpdate),this.onParticleDead&&(this.renderer.onParticleDead=this.onParticleDead)}},i.Renderer=F,I.prototype={start:function(){var t=this;this.proton.addEventListener(i.PROTON_UPDATE,function(e){t.onProtonUpdate.call(t)}),this.proton.addEventListener(i.PROTON_UPDATE_AFTER,function(e){t.onProtonUpdateAfter.call(t)}),this.proton.addEventListener(i.EMITTER_ADDED,function(e){t.onEmitterAdded.call(t,e.emitter)}),this.proton.addEventListener(i.EMITTER_REMOVED,function(e){t.onEmitterRemoved.call(t,e.emitter)});var e,r=this.proton.emitters.length;for(e=0;e<r;e++){var s=this.proton.emitters[e];this.addEmitterListener(s)}},resize:function(t,e){},addEmitterListener:function(t){var e=this;t.addEventListener(i.PARTICLE_CREATED,function(t){e.onParticleCreated.call(e,t.particle)}),t.addEventListener(i.PARTICLE_UPDATE,function(t){e.onParticleUpdate.call(e,t.particle)}),t.addEventListener(i.PARTICLE_DEAD,function(t){e.onParticleDead.call(e,t.particle)})},stop:function(){var t,e=this.proton.emitters.length;for(this.proton.removeAllEventListeners(),t=0;t<e;t++){var i=this.proton.emitters[t];i.removeAllEventListeners()}},onEmitterAdded:function(t){this.addEmitterListener(t)},onEmitterRemoved:function(t){t.removeAllEventListeners()},onProtonUpdate:function(){},onProtonUpdateAfter:function(){},onParticleCreated:function(t){},onParticleUpdate:function(t){},onParticleDead:function(t){}},i.BaseRender=I,i.Util.inherits(k,i.BaseRender),k.prototype.start=function(){k._super_.prototype.start.call(this)},k.prototype.setStroke=function(t,e){t=i.Util.initValue(t,"#000000"),e=i.Util.initValue(e,1),this.stroke={color:t,thinkness:e}},k.prototype.onProtonUpdate=function(){},k.prototype.onParticleCreated=function(t){if(t.target){var e=this;i.Util.getImage(t.target,t,!1,function(t){e.setImgInDIV.call(e,t)})}else t.transform.canvas=i.DomUtil.createCanvas(t.id+"_canvas",t.radius+1,t.radius+1,"absolute"),t.transform.bakOldRadius=t.radius,this.stroke?(t.transform.canvas.width=2*t.radius+2*this.stroke.thinkness,t.transform.canvas.height=2*t.radius+2*this.stroke.thinkness):(t.transform.canvas.width=2*t.radius+1,t.transform.canvas.height=2*t.radius+1),t.transform.context=t.transform.canvas.getContext("2d"),t.transform.context.fillStyle=t.color,t.transform.context.beginPath(),t.transform.context.arc(t.radius,t.radius,t.radius,0,2*Math.PI,!0),this.stroke&&(t.transform.context.strokeStyle=this.stroke.color,t.transform.context.lineWidth=this.stroke.thinkness,t.transform.context.stroke()),t.transform.context.closePath(),t.transform.context.fill(),this.element.appendChild(t.transform.canvas)},k.prototype.onParticleUpdate=function(t){t.target?t.target instanceof Image&&(t.transform.canvas.style.opacity=t.alpha,i.DomUtil.transformDom(t.transform.canvas,t.p.x-t.target.width/2,t.p.y-t.target.height/2,t.scale,t.rotation)):(t.transform.canvas.style.opacity=t.alpha,t.transform.oldRadius?i.DomUtil.transformDom(t.transform.canvas,t.p.x-t.transform.oldRadius,t.p.y-t.transform.oldRadius,t.scale,t.rotation):i.DomUtil.transformDom(t.transform.canvas,t.p.x-t.transform.bakOldRadius,t.p.y-t.transform.bakOldRadius,t.scale,t.rotation))},k.prototype.onParticleDead=function(t){t.transform.canvas&&this.element.removeChild(t.transform.canvas)},k.prototype.setImgInDIV=function(t){t.transform.canvas=i.DomUtil.createCanvas(t.id+"_canvas",t.target.width+1,t.target.height+1,"absolute",t.p.x-t.radius,t.p.y-t.radius),t.transform.context=t.transform.canvas.getContext("2d"),t.transform.context.drawImage(t.target,0,0,t.target.width,t.target.height),this.element.appendChild(t.transform.canvas)},i.DomRender=k,i.Util.inherits(U,i.BaseRender),U.prototype.resize=function(t,e){},U.prototype.start=function(){U._super_.prototype.start.call(this)},U.prototype.onProtonUpdate=function(){},U.prototype.onParticleCreated=function(t){if(t.target)t.target=t.target.clone(),t.target.parent||(t.target.image&&(t.target.regX=t.target.image.width/2,t.target.regY=t.target.image.height/2),this.element.addChild(t.target));else{var e=new createjs.Graphics;this.stroke&&(1==this.stroke?e.beginStroke("#000000"):this.stroke instanceof String&&e.beginStroke(this.stroke)),e.beginFill(t.color).drawCircle(0,0,t.radius);var i=new createjs.Shape(e);t.target=i,this.element.addChild(t.target)}},U.prototype.onParticleUpdate=function(t){t.target&&(t.target.x=t.p.x,t.target.y=t.p.y,t.target.alpha=t.alpha,t.target.scaleX=t.target.scaleY=t.scale,t.target.rotation=t.rotation)},U.prototype.onParticleDead=function(t){t.target&&t.target.parent&&t.target.parent.removeChild(t.target)},i.EaselRender=U,i.Util.inherits(G,i.BaseRender),G.prototype.resize=function(t,e){this.element.width=t,this.element.height=e},G.prototype.start=function(){G._super_.prototype.start.call(this)},G.prototype.setStroke=function(t,e){t=i.Util.initValue(t,"#000000"),e=i.Util.initValue(e,1),this.stroke={color:t,thinkness:e}},G.prototype.onProtonUpdate=function(){this.context.clearRect(0,0,this.element.width,this.element.height)},G.prototype.onParticleCreated=function(t){t.target?i.Util.getImage(t.target,t,!1):t.color=t.color?t.color:"#ff0000"},G.prototype.onParticleUpdate=function(t){if(t.target){if(t.target instanceof Image){var e=t.target.width*t.scale|0,r=t.target.height*t.scale|0,s=t.p.x-e/2,n=t.p.y-r/2;if(t.color){t.transform.buffer||(t.transform.buffer=this.getBuffer(t.target));var a=t.transform.buffer.getContext("2d");a.clearRect(0,0,t.transform.buffer.width,t.transform.buffer.height),a.globalAlpha=t.alpha,a.drawImage(t.target,0,0),a.globalCompositeOperation="source-atop",a.fillStyle=i.Util.rgbToHex(t.transform.rgb),a.fillRect(0,0,t.transform.buffer.width,t.transform.buffer.height),a.globalCompositeOperation="source-over",a.globalAlpha=1,this.context.drawImage(t.transform.buffer,0,0,t.transform.buffer.width,t.transform.buffer.height,s,n,e,r)}else this.context.save(),this.context.globalAlpha=t.alpha,this.context.translate(t.p.x,t.p.y),this.context.rotate(i.MathUtils.degreeTransform(t.rotation)),this.context.translate(-t.p.x,-t.p.y),this.context.drawImage(t.target,0,0,t.target.width,t.target.height,s,n,e,r),this.context.globalAlpha=1,this.context.restore()}}else t.transform.rgb?this.context.fillStyle="rgba("+t.transform.rgb.r+","+t.transform.rgb.g+","+t.transform.rgb.b+","+t.alpha+")":this.context.fillStyle=t.color,this.context.beginPath(),this.context.arc(t.p.x,t.p.y,t.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()},G.prototype.onParticleDead=function(t){},G.prototype.getBuffer=function(t){if(t instanceof Image){var e=t.width+"_"+t.height,i=this.bufferCache[e];return i||(i=document.createElement("canvas"),i.width=t.width,i.height=t.height,this.bufferCache[e]=i),i}},i.CanvasRender=G,i.Util.inherits(N,i.BaseRender),N.prototype.resize=function(t,e){this.element.width=t,this.element.height=e},N.prototype.createImageData=function(t){t?this.rectangle=t:this.rectangle=new i.Rectangle(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)},N.prototype.start=function(){N._super_.prototype.start.call(this)},N.prototype.onProtonUpdate=function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)},N.prototype.onProtonUpdateAfter=function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)},N.prototype.onParticleCreated=function(t){},N.prototype.onParticleUpdate=function(t){this.imageData&&this.setPixel(this.imageData,Math.floor(t.p.x-this.rectangle.x),Math.floor(t.p.y-this.rectangle.y),t)},N.prototype.setPixel=function(t,e,i,r){var s=r.transform.rgb;if(!(e<0||e>this.element.width||i<0||i>this.elementwidth)){var n=4*((i>>0)*t.width+(e>>0));t.data[n]=s.r,t.data[n+1]=s.g,t.data[n+2]=s.b,t.data[n+3]=255*r.alpha}},N.prototype.onParticleDead=function(t){},i.PixelRender=N,i.Util.inherits(j,i.BaseRender),j.prototype.resize=function(t,e){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/t,this.smat[4]=1/e,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,t,e),this.element.width=t,this.element.height=e},j.prototype.setMaxRadius=function(t){this.circleCanvasURL=this.createCircle(t)},j.prototype.getVertexShader=function(){var t=["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join("\n");return t},j.prototype.getFragmentShader=function(){var t=["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join("\n");return t},j.prototype.initVar=function(){this.mstack=new i.MStack,this.umat=i.Mat3.create([2,0,1,0,-2,0,-1,1,1]),this.smat=i.Mat3.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}},j.prototype.start=function(){j._super_.prototype.start.call(this),this.resize(this.element.width,this.element.height)},j.prototype.blendEquation=function(t){this.gl.blendEquation(this.gl[t])},j.prototype.blendFunc=function(t,e){this.gl.blendFunc(this.gl[t],this.gl[e])},j.prototype.getShader=function(t,e,i){var r;return r=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER),t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert(t.getShaderInfoLog(r)),null)},j.prototype.initShaders=function(){var t=this.getShader(this.gl,this.getFragmentShader(),!0),e=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,e),this.gl.attachShader(this.sprogram,t),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)},j.prototype.initBuffers=function(){this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer);var t=[0,3,1,0,2,3];this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),this.gl.STATIC_DRAW);for(var e=[],i=0;i<100;i++)e.push(i);for(idx=new Uint16Array(e),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,idx,this.gl.STATIC_DRAW),e=[],i=0;i<100;i++)e.push(i,i+1,i+2);idx=new Uint16Array(e),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,idx,this.gl.STATIC_DRAW)},j.prototype.createCircle=function(t){this.circleCanvasRadius=i.WebGLUtil.nhpot(i.Util.initValue(t,32));var e=i.DomUtil.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),r=e.getContext("2d");return r.beginPath(),r.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),r.closePath(),r.fillStyle="#FFF",r.fill(),e.toDataURL()},j.prototype.setImgInCanvas=function(t){var e=t.target.width,r=t.target.height,s=i.WebGLUtil.nhpot(t.target.width),n=i.WebGLUtil.nhpot(t.target.height),a=t.target.width/s,o=t.target.height/n;this.texturebuffers[t.transform.src]||(this.texturebuffers[t.transform.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),t.transform.texture=this.texturebuffers[t.transform.src][0],t.transform.vcBuffer=this.texturebuffers[t.transform.src][1],t.transform.tcBuffer=this.texturebuffers[t.transform.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,a,0,0,o,o,o]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e,0,0,r,e,r]),this.gl.STATIC_DRAW);var h=t.transform.canvas.getContext("2d"),l=h.getImageData(0,0,s,n);this.gl.bindTexture(this.gl.TEXTURE_2D,t.transform.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,l),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),t.transform.textureLoaded=!0,t.transform.textureWidth=e,t.transform.textureHeight=r},j.prototype.setStroke=function(t,e){},j.prototype.onProtonUpdate=function(){},j.prototype.onParticleCreated=function(t){var e=this;t.transform.textureLoaded=!1,t.transform.tmat=i.Mat3.create(),t.transform.tmat[8]=1,t.transform.imat=i.Mat3.create(),t.transform.imat[8]=1,t.target?i.Util.getImage(t.target,t,!0,function(t){e.setImgInCanvas.call(e,t),t.transform.oldScale=1}):i.Util.getImage(this.circleCanvasURL,t,!0,function(t){e.setImgInCanvas.call(e,t),t.transform.oldScale=t.radius/e.circleCanvasRadius})},j.prototype.onParticleUpdate=function(t){t.transform.textureLoaded&&(this.updateMatrix(t),this.gl.uniform3f(this.sprogram.color,t.transform.rgb.r/255,t.transform.rgb.g/255,t.transform.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,t.transform.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())},j.prototype.onParticleDead=function(t){},j.prototype.updateMatrix=function(t){var e=i.WebGLUtil.makeTranslation(-t.transform.textureWidth/2,-t.transform.textureHeight/2),r=i.WebGLUtil.makeTranslation(t.p.x,t.p.y),s=t.rotation*(Math.PI/180),n=i.WebGLUtil.makeRotation(s),a=t.scale*t.transform.oldScale,o=i.WebGLUtil.makeScale(a,a),h=i.WebGLUtil.matrixMultiply(e,o);h=i.WebGLUtil.matrixMultiply(h,n),h=i.WebGLUtil.matrixMultiply(h,r),i.Mat3.inverse(h,t.transform.imat),h[2]=t.alpha,this.mstack.push(h)},i.WebGLRender=j,V.prototype={getPosition:function(){},crossing:function(t){}},i.Zone=V,i.Util.inherits(W,i.Zone),W.prototype.getPosition=function(){return this.random=Math.random(),
this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector},W.prototype.getDirection=function(t,e){var i=this.dy,r=-this.dx,s=this.dot,n=0==r?1:r;return(i*t+r*e+s)*n>0},W.prototype.getDistance=function(t,e){var i=this.dy,r=-this.dx,s=this.dot,n=i*t+r*e+s;return n/Math.sqrt(this.xxyy)},W.prototype.getSymmetric=function(t){var e=t.getGradient(),i=this.getGradient(),r=2*(i-e),s=t.x,n=t.y;return t.x=s*Math.cos(r)-n*Math.sin(r),t.y=s*Math.sin(r)+n*Math.cos(r),t},W.prototype.getGradient=function(){return Math.atan2(this.dy,this.dx)},W.prototype.getRange=function(t,e){var i=Math.abs(this.getGradient());i<=Math.PI/4?t.p.x<this.maxx&&t.p.x>this.minx&&e():t.p.y<this.maxy&&t.p.y>this.miny&&e()},W.prototype.getLength=function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)},W.prototype.crossing=function(t){var e=this;"dead"==this.crossType?">"==this.direction||"R"==this.direction||"right"==this.direction||"down"==this.direction?this.getRange(t,function(){e.getDirection(t.p.x,t.p.y)&&(t.dead=!0)}):this.getRange(t,function(){e.getDirection(t.p.x,t.p.y)||(t.dead=!0)}):"bound"==this.crossType?this.getRange(t,function(){e.getDistance(t.p.x,t.p.y)<=t.radius&&(0==e.dx?t.v.x*=-1:0==e.dy?t.v.y*=-1:e.getSymmetric(t.v))}):"cross"==this.crossType&&this.alert&&(alert("Sorry lineZone does not support cross method"),this.alert=!1)},i.LineZone=W,i.Util.inherits(z,i.Zone),z.prototype.getPosition=function(){return this.random=Math.random(),this.angle=2*Math.PI*Math.random(),this.vector.x=this.x+this.random*this.radius*Math.cos(this.angle),this.vector.y=this.y+this.random*this.radius*Math.sin(this.angle),this.vector},z.prototype.setCenter=function(t,e){this.center.x=t,this.center.y=e},z.prototype.crossing=function(t){var e=t.p.distanceTo(this.center);"dead"==this.crossType?e-t.radius>this.radius&&(t.dead=!0):"bound"==this.crossType?e+t.radius>=this.radius&&this.getSymmetric(t):"cross"==this.crossType&&this.alert&&(alert("Sorry CircleZone does not support cross method"),this.alert=!1)},z.prototype.getSymmetric=function(t){var e=t.v.getGradient(),i=this.getGradient(t),r=2*(i-e),s=t.v.x,n=t.v.y;t.v.x=s*Math.cos(r)-n*Math.sin(r),t.v.y=s*Math.sin(r)+n*Math.cos(r)},z.prototype.getGradient=function(t){return-Math.PI/2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)},i.CircleZone=z,i.Util.inherits(X,i.Zone),X.prototype.getPosition=function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector},X.prototype.crossing=function(t){this.alert&&(alert("Sorry PointZone does not support crossing method"),this.alert=!1)},i.PointZone=X,i.Util.inherits(Y,i.Zone),Y.prototype.getPosition=function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector},Y.prototype.crossing=function(t){"dead"==this.crossType?(t.p.x+t.radius<this.x?t.dead=!0:t.p.x-t.radius>this.x+this.width&&(t.dead=!0),t.p.y+t.radius<this.y?t.dead=!0:t.p.y-t.radius>this.y+this.height&&(t.dead=!0)):"bound"==this.crossType?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):"cross"==this.crossType&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&t.v.x>=0&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&t.v.y>=0&&(t.p.y=this.y-t.radius))},i.RectZone=Y,i.Util.inherits(H,i.Zone),H.prototype.reset=function(t,e,r,s){this.imageData=t,this.x=i.Util.initValue(e,0),this.y=i.Util.initValue(r,0),this.d=i.Util.initValue(s,2),this.vectors=[],this.setVectors()},H.prototype.setVectors=function(){var t,e,i=this.imageData.width,r=this.imageData.height;for(t=0;t<i;t+=this.d)for(e=0;e<r;e+=this.d){var s=4*((e>>0)*i+(t>>0));this.imageData.data[s+3]>0&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector},H.prototype.getBound=function(t,e){var i=4*((e>>0)*this.imageData.width+(t>>0));return this.imageData.data[i+3]>0},H.prototype.getPosition=function(){return this.vector.copy(this.vectors[Math.floor(Math.random()*this.vectors.length)])},H.prototype.getColor=function(t,e){t-=this.x,e-=this.y;var i=4*((e>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[i],g:this.imageData.data[i+1],b:this.imageData.data[i+2],a:this.imageData.data[i+3]}},H.prototype.crossing=function(t){"dead"==this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"==this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())},i.ImageZone=H;var nt=function(){if(t.console&&t.console.log){var e=arguments;if("string"==typeof arguments[0])if(0==arguments[0].indexOf("+")){var i=parseInt(arguments[0]);nt.once<i&&(delete e[0],console.log(e),nt.once++)}else console.log(e);else console.log(e)}};nt.once=0,i.log=nt;var at=at||{addEventListener:function(t,e){t.addEventListener(i.PROTON_UPDATE,function(t){e()})},setStyle:function(t){var e=t||"#ff0000",r=i.Util.hexToRGB(e),s="rgba("+r.r+","+r.g+","+r.b+",0.5)";return s},drawZone:function(t,e,r,s){var n=e.getContext("2d"),a=this.setStyle();this.addEventListener(t,function(){s&&n.clearRect(0,0,e.width,e.height),r instanceof i.PointZone?(n.beginPath(),n.fillStyle=a,n.arc(r.x,r.y,10,0,2*Math.PI,!0),n.fill(),n.closePath()):r instanceof i.LineZone?(n.beginPath(),n.strokeStyle=a,n.moveTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.stroke(),n.closePath()):r instanceof i.RectZone?(n.beginPath(),n.strokeStyle=a,n.drawRect(r.x,r.y,r.width,r.height),n.stroke(),n.closePath()):r instanceof i.CircleZone&&(n.beginPath(),n.strokeStyle=a,n.arc(r.x,r.y,r.radius,0,2*Math.PI,!0),n.stroke(),n.closePath())})},drawEmitter:function(t,e,i,r){var s=e.getContext("2d"),n=this.setStyle();this.addEventListener(t,function(){r&&s.clearRect(0,0,e.width,e.height),s.beginPath(),s.fillStyle=n,s.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),s.fill(),s.closePath()})},test:{},setTest:function(t,e){this.test[t]=e},getTest:function(t){return!!this.test.hasOwnProperty(t)&&this.test[t]}};i.Debug=at}(window),t.exports=Proton},function(t,e){t.exports={particleEmitterRate:80,smallTitleStyle:{font:'400 20px/20px "Knockout 69 A", "Knockout 69 B"',fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:150,stroke:"#445663",strokeThickness:3},smallLabelStyle:{font:'600 14px "Chronicle Display A", "Chronicle Display B"',fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:150,stroke:"#445663",strokeThickness:3},bigLabelStyle:{font:'400 24px/24px "Knockout 69 A", "Knockout 69 B"',fill:"#c8af59",align:"center",wordWrap:!0,wordWrapWidth:200,stroke:"#445663",strokeThickness:3},bigTitleStyle:{font:'600 14px "Chronicle Display A", "Chronicle Display B"',fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:200,stroke:"#445663",strokeThickness:3},typeLabelStyle:{font:'400 35px "Knockout 69 A", "Knockout 69 B"',lineHeight:"30",fill:"#c8af59",align:"center",wordWrap:!0,wordWrapWidth:150,stroke:"#445663",strokeThickness:3},typeTitleStyle:{font:'600 16px "Chronicle Display A", "Chronicle Display B"',fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:150,stroke:"#445663",strokeThickness:3},buttonStyle:{font:'600 14px "Knockout 69 A", "Knockout 69 B"',fill:"#3d4e5c",align:"center"}}},function(t,e){t.exports=function(){function t(t,i){if(!t)throw new Error("You must provide a valid name for this service.");if(void 0!==e[t])throw new Error("Service '"+t+"' already registered");if(!i)throw new Error("You must provide a valid service for '"+t+"'");return Object.defineProperty(e,t,{configurable:!1,get:function(){return i},set:function(){throw new Error("You can not alter a registered service '"+t+"'")}}),e}var e={};return e.register=t,e}},function(t,e,i){(function(e){"use strict";function r(t,e){if("function"==typeof t)return r("*",t);if("function"==typeof e)for(var i=new o(t),s=1;s<arguments.length;++s)r.callbacks.push(i.middleware(arguments[s]));else"string"==typeof t?r["string"==typeof e?"redirect":"show"](t,e):r.start(t)}function s(t){if(!t.handled){var e;e=x?y+m.hash.replace("#!",""):m.pathname+m.search,e!==t.canonicalPath&&(r.stop(),t.handled=!1,m.href=t.canonicalPath)}}function n(t){return"string"!=typeof t?t:v?decodeURIComponent(t.replace(/\+/g," ")):t}function a(t,e){"/"===t[0]&&0!==t.indexOf(y)&&(t=y+(x?"#!":"")+t);var i=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(y,"")||"/",x&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=e||{},this.state.path=t,this.querystring=~i?n(t.slice(i+1)):"",this.pathname=n(~i?t.slice(0,i):t),this.params={},this.hash="",!x){if(!~this.path.indexOf("#"))return;var r=this.path.split("#");this.path=r[0],this.hash=n(r[1])||"",this.querystring=this.querystring.split("#")[0]}}function o(t,e){e=e||{},this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=c(this.path,this.keys=[],e)}function h(t){if(1===l(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var i=t.path?t.path[0]:t.target;i&&"A"!==i.nodeName;)i=i.parentNode;if(i&&"A"===i.nodeName&&!i.hasAttribute("download")&&"external"!==i.getAttribute("rel")){var s=i.getAttribute("href");if((x||i.pathname!==m.pathname||!i.hash&&"#"!==s)&&!(s&&s.indexOf("mailto:")>-1)&&!i.target&&u(i.href)){var n=i.pathname+i.search+(i.hash||"");"undefined"!=typeof e&&n.match(/^\/[a-zA-Z]:\//)&&(n=n.replace(/^\/[a-zA-Z]:\//,"/"));var a=n;0===n.indexOf(y)&&(n=n.substr(y.length)),x&&(n=n.replace("#!","")),y&&a===n||(t.preventDefault(),r.show(a))}}}}function l(t){return t=t||window.event,null===t.which?t.button:t.which}function u(t){var e=m.protocol+"//"+m.hostname;return m.port&&(e+=":"+m.port),t&&0===t.indexOf(e)}var c=i(17);t.exports=r;var p,d,f="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",m="undefined"!=typeof window&&(window.history.location||window.location),g=!0,v=!0,y="",x=!1;r.callbacks=[],r.exits=[],r.current="",r.len=0,r.base=function(t){return 0===arguments.length?y:void(y=t)},r.start=function(t){if(t=t||{},!p&&(p=!0,!1===t.dispatch&&(g=!1),!1===t.decodeURLComponents&&(v=!1),!1!==t.popstate&&window.addEventListener("popstate",_,!1),!1!==t.click&&document.addEventListener(f,h,!1),!0===t.hashbang&&(x=!0),g)){var e=x&&~m.hash.indexOf("#!")?m.hash.substr(2)+m.search:m.pathname+m.search+m.hash;r.replace(e,null,!0,g)}},r.stop=function(){p&&(r.current="",r.len=0,p=!1,document.removeEventListener(f,h,!1),window.removeEventListener("popstate",_,!1))},r.show=function(t,e,i,s){var n=new a(t,e);return r.current=n.path,!1!==i&&r.dispatch(n),!1!==n.handled&&!1!==s&&n.pushState(),n},r.back=function(t,e){r.len>0?(history.back(),r.len--):t?setTimeout(function(){r.show(t,e)}):setTimeout(function(){r.show(y,e)})},r.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&r(t,function(t){setTimeout(function(){r.replace(e)},0)}),"string"==typeof t&&"undefined"==typeof e&&setTimeout(function(){r.replace(t)},0)},r.replace=function(t,e,i,s){var n=new a(t,e);return r.current=n.path,n.init=i,n.save(),!1!==s&&r.dispatch(n),n},r.dispatch=function(t){function e(){var t=r.exits[o++];return t?void t(n,e):i()}function i(){var e=r.callbacks[a++];return t.path!==r.current?void(t.handled=!1):e?void e(t,i):s(t)}var n=d,a=0,o=0;d=t,n?e():i()},r.exit=function(t,e){if("function"==typeof t)return r.exit("*",t);for(var i=new o(t),s=1;s<arguments.length;++s)r.exits.push(i.middleware(arguments[s]))},r.Context=a,a.prototype.pushState=function(){r.len++,history.pushState(this.state,this.title,x&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},a.prototype.save=function(){history.replaceState(this.state,this.title,x&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},r.Route=o,o.prototype.middleware=function(t){var e=this;return function(i,r){return e.match(i.path,i.params)?t(i,r):void r()}},o.prototype.match=function(t,e){var i=this.keys,r=t.indexOf("?"),s=~r?t.slice(0,r):t,a=this.regexp.exec(decodeURIComponent(s));if(!a)return!1;for(var o=1,h=a.length;o<h;++o){var l=i[o-1],u=n(a[o]);void 0===u&&hasOwnProperty.call(e,l.name)||(e[l.name]=u)}return!0};var _=function(){var t=!1;if("undefined"!=typeof window)return"complete"===document.readyState?t=!0:window.addEventListener("load",function(){setTimeout(function(){t=!0},0)}),function(e){if(t)if(e.state){var i=e.state.path;r.replace(i,e.state)}else r.show(m.pathname+m.hash,void 0,void 0,!1)}}();r.sameOrigin=u}).call(e,i(16))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function n(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?f=d.concat(f):g=-1,f.length&&o())}function o(){if(!m){var t=s(a);m=!0;for(var e=f.length;e;){for(d=f,f=[];++g<e;)d&&d[g].run();g=-1,e=f.length}d=null,m=!1,n(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var u,c,p=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(t){u=i}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var d,f=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new h(t,e)),1!==f.length||m||s(o)},h.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,i){function r(t){for(var e,i=[],r=0,s=0,n="";null!=(e=g.exec(t));){var a=e[0],h=e[1],l=e.index;if(n+=t.slice(s,l),s=l+a.length,h)n+=h[1];else{n&&(i.push(n),n="");var u=e[2],c=e[3],p=e[4],d=e[5],f=e[6],m=e[7],v="+"===f||"*"===f,y="?"===f||"*"===f,x=u||"/",_=p||d||(m?".*":"[^"+x+"]+?");i.push({name:c||r++,prefix:u||"",delimiter:x,optional:y,repeat:v,pattern:o(_)})}}return s<t.length&&(n+=t.substr(s)),n&&i.push(n),i}function s(t){return n(r(t))}function n(t){for(var e=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(e[i]=new RegExp("^"+t[i].pattern+"$"));return function(i){for(var r="",s=i||{},n=0;n<t.length;n++){var a=t[n];if("string"!=typeof a){var o,h=s[a.name];if(null==h){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(m(h)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+h+'"');if(0===h.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<h.length;l++){if(o=encodeURIComponent(h[l]),!e[n].test(o))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+o+'"');r+=(0===l?a.prefix:a.delimiter)+o}}else{if(o=encodeURIComponent(h),!e[n].test(o))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+o+'"');r+=a.prefix+o}}else r+=a}return r}}function a(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function o(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function h(t,e){return t.keys=e,t}function l(t){return t.sensitive?"":"i"}function u(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var r=0;r<i.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return h(t,e)}function c(t,e,i){for(var r=[],s=0;s<t.length;s++)r.push(f(t[s],e,i).source);var n=new RegExp("(?:"+r.join("|")+")",l(i));return h(n,e)}function p(t,e,i){for(var s=r(t),n=d(s,i),a=0;a<s.length;a++)"string"!=typeof s[a]&&e.push(s[a]);return h(n,e)}function d(t,e){e=e||{};for(var i=e.strict,r=e.end!==!1,s="",n=t[t.length-1],o="string"==typeof n&&/\/$/.test(n),h=0;h<t.length;h++){var u=t[h];if("string"==typeof u)s+=a(u);else{var c=a(u.prefix),p=u.pattern;u.repeat&&(p+="(?:"+c+p+")*"),p=u.optional?c?"(?:"+c+"("+p+"))?":"("+p+")?":c+"("+p+")",s+=p}}return i||(s=(o?s.slice(0,-2):s)+"(?:\\/(?=$))?"),s+=r?"$":i&&o?"":"(?=\\/|$)",new RegExp("^"+s,l(e))}function f(t,e,i){return e=e||[],m(e)?i||(i={}):(i=e,e=[]),t instanceof RegExp?u(t,e,i):m(t)?c(t,e,i):p(t,e,i)}var m=i(18);t.exports=f,t.exports.parse=r,t.exports.compile=s,t.exports.tokensToFunction=n,t.exports.tokensToRegExp=d;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,i){function r(){n.call(this),this.data={}}var s=i(3),n=i(5).EventEmitter,a=i(20),o=i(48),h=(i(49),i(53));i(55);s(r,n),r.prototype.fetch=function(t){var e=$.cookie("age_checked");"object"==typeof e&&(e=e.code),$.getJSON("/api/wines?country="+e,function(e){this.data=e,this.emit("complete",this.data),t(this.data)}.bind(this))},r.prototype.getWine=function(t){return void 0==t?this.data[0]:a(this.data,{slug:t})||null},r.prototype.getAttribute=function(t,e){var i={},r=o(this.data,function(i){return void 0!==a(i.attributes,{type:t,slug:e})});return h(i,a(r[0].attributes,{type:t,slug:e})),i.wines=r,i},r.prototype.getAttributesByType=function(t,e){var i=$.cookie("age_checked");"object"==typeof i&&(i=i.code),$.getJSON("/api/attributes/"+t+"?country="+i,function(t){e(t)}.bind(this))},t.exports=r},function(t,e,i){function r(t,e,i){e=s(e,i,3);var r=-1,a=t?t.length:0;if("number"!=typeof a){var o;return n(t,function(t,i,r){if(e(t,i,r))return o=t,!1}),o}for(;++r<a;){var h=t[r];if(e(h,r,t))return h}}var s=i(21),n=i(46);t.exports=r},function(t,e,i){function r(t,e,i){var r=typeof t;if(null==t||"function"==r)return s(t,e,i);if("object"!=r)return h(t);var l=o(t),u=l[0],c=t[u];return 1!=l.length||c!==c||a(c)?function(e){for(var i=l.length,r=!1;i--&&(r=n(e[l[i]],t[l[i]],null,!0)););return r}:function(t){var e=t[u];return c===e&&(0!==c||1/c==1/e)}}var s=i(22),n=i(37),a=i(28),o=i(43),h=i(45);t.exports=r},function(t,e,i){function r(t,e,i){if("function"!=typeof t)return n;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(o.funcNames&&(r=!t.name),r=r||!o.funcDecomp,!r)){var c=u.call(t);o.funcNames||(r=!h.test(c)),r||(r=l.test(c),a(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,s){return t.call(e,i,r,s)};case 4:return function(i,r,s,n){return t.call(e,i,r,s,n)}}return s(t,e)}var s=i(23),n=i(35),a=i(31),o=i(36),h=/^\s*function[ \n\r\t]+\w/,l=/\bthis\b/,u=Function.prototype.toString;t.exports=r},function(t,e,i){function r(t,e){return arguments.length>2?s(t,17,n(arguments,2),null,e):s(t,1,null,null,e)}var s=i(24),n=i(32);t.exports=r},function(t,e,i){function r(t,e,i,h,c,p){var d=1&e,f=2&e,m=4&e,g=16&e,v=32&e;if(!f&&!a(t))throw new TypeError;g&&!i.length&&(e&=-17,g=i=!1),v&&!h.length&&(e&=-33,v=h=!1);var y=t&&t.__bindData__;if(y&&y!==!0)return y=o(y),y[2]&&(y[2]=o(y[2])),y[3]&&(y[3]=o(y[3])),!d||1&y[1]||(y[4]=c),!d&&1&y[1]&&(e|=8),!m||4&y[1]||(y[5]=p),g&&l.apply(y[2]||(y[2]=[]),i),v&&u.apply(y[3]||(y[3]=[]),h),y[1]|=e,r.apply(null,y);var x=1==e||17===e?s:n;return x([t,e,i,h,c,p])}var s=i(25),n=i(33),a=i(34),o=i(32),h=[],l=h.push,u=h.unshift;t.exports=r},function(t,e,i){function r(t){function e(){if(r){var t=o(r);l.apply(t,arguments)}if(this instanceof e){var a=s(i.prototype),u=i.apply(a,t||arguments);return n(u)?u:a}return i.apply(h,t||arguments)}var i=t[0],r=t[2],h=t[4];return a(e,t),e}var s=i(26),n=i(28),a=i(31),o=i(32),h=[],l=h.push;t.exports=r},function(t,e,i){(function(e){function r(t,e){return n(t)?a(t):{}}var s=i(27),n=i(28),a=(i(30),s(a=Object.create)&&a);a||(r=function(){function t(){}return function(i){if(n(i)){t.prototype=i;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=r}).call(e,function(){return this}())},function(t,e){function i(t){return"function"==typeof t&&n.test(t)}var r=Object.prototype,s=r.toString,n=RegExp("^"+String(s).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=i},function(t,e,i){function r(t){return!(!t||!s[typeof t])}var s=i(29);t.exports=r},function(t,e){var i={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=i},function(t,e){function i(){}t.exports=i},function(t,e,i){var r=i(27),s=i(30),n={configurable:!1,enumerable:!1,value:null,writable:!1},a=function(){try{var t={},e=r(e=Object.defineProperty)&&e,i=e(t,t,t)&&e}catch(s){}return i}(),o=a?function(t,e){n.value=e,a(t,"__bindData__",n)}:s;t.exports=o},function(t,e){function i(t,e,i){e||(e=0),"undefined"==typeof i&&(i=t?t.length:0);for(var r=-1,s=i-e||0,n=Array(s<0?0:s);++r<s;)n[r]=t[e+r];return n}t.exports=i},function(t,e,i){function r(t){function e(){var t=f?p:this;if(u){var a=o(u);l.apply(a,arguments)}if((c||g)&&(a||(a=o(arguments)),c&&l.apply(a,c),g&&a.length<d))return h|=16,r([i,v?h:h&-4,a,null,p,d]);if(a||(a=arguments),m&&(i=t[y]),this instanceof e){t=s(i.prototype);var x=i.apply(t,a);return n(x)?x:t}return i.apply(t,a)}var i=t[0],h=t[1],u=t[2],c=t[3],p=t[4],d=t[5],f=1&h,m=2&h,g=4&h,v=8&h,y=i;return a(e,t),e}var s=i(26),n=i(28),a=i(31),o=i(32),h=[],l=h.push;t.exports=r},function(t,e){function i(t){return"function"==typeof t}t.exports=i},function(t,e){function i(t){return t}t.exports=i},function(t,e,i){(function(e){var r=i(27),s=/\bthis\b/,n={};n.funcDecomp=!r(e.WinRTError)&&s.test(function(){return this}),n.funcNames="string"==typeof Function.name,t.exports=n}).call(e,function(){return this}())},function(t,e,i){function r(t,e,i,v,_,b){if(i){var T=i(t,e);if("undefined"!=typeof T)return!!T}if(t===e)return 0!==t||1/t==1/e;var w=typeof t,S=typeof e;if(!(t!==t||t&&o[w]||e&&o[S]))return!1;if(null==t||null==e)return t===e;var C=y.call(t),A=y.call(e);if(C==l&&(C=f),A==l&&(A=f),C!=A)return!1;switch(C){case c:case p:return+t==+e;case d:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case m:case g:return t==String(e)}var R=C==u;if(!R){var E=x.call(t,"__wrapped__"),P=x.call(e,"__wrapped__");if(E||P)return r(E?t.__wrapped__:t,P?e.__wrapped__:e,i,v,_,b);if(C!=f)return!1;var M=t.constructor,L=e.constructor;if(M!=L&&!(a(M)&&M instanceof M&&a(L)&&L instanceof L)&&"constructor"in t&&"constructor"in e)return!1}var O=!_;_||(_=n()),b||(b=n());for(var B=_.length;B--;)if(_[B]==t)return b[B]==e;var D=0;if(T=!0,_.push(t),b.push(e),R){if(B=t.length,D=e.length,T=D==B,T||v)for(;D--;){var F=B,I=e[D];if(v)for(;F--&&!(T=r(t[F],I,i,v,_,b)););else if(!(T=r(t[D],I,i,v,_,b)))break}}else s(e,function(e,s,n){if(x.call(n,s))return D++,T=x.call(t,s)&&r(t[s],e,i,v,_,b)}),T&&!v&&s(t,function(t,e,i){if(x.call(i,e))return T=--D>-1});return _.pop(),b.pop(),O&&(h(_),h(b)),T}var s=i(38),n=i(39),a=i(34),o=i(29),h=i(41),l="[object Arguments]",u="[object Array]",c="[object Boolean]",p="[object Date]",d="[object Number]",f="[object Object]",m="[object RegExp]",g="[object String]",v=Object.prototype,y=v.toString,x=v.hasOwnProperty;t.exports=r},function(t,e,i){var r=i(22),s=i(29),n=function(t,e,i){var n,a=t,o=a;if(!a)return o;if(!s[typeof a])return o;e=e&&"undefined"==typeof i?e:r(e,i,3);for(n in a)if(e(a[n],n,t)===!1)return o;return o};t.exports=n},function(t,e,i){function r(){return s.pop()||[]}var s=i(40);t.exports=r},function(t,e){var i=[];t.exports=i},function(t,e,i){function r(t){t.length=0,s.length<n&&s.push(t)}var s=i(40),n=i(42);t.exports=r},function(t,e){var i=40;t.exports=i},function(t,e,i){var r=i(27),s=i(28),n=i(44),a=r(a=Object.keys)&&a,o=a?function(t){return s(t)?a(t):[]}:n;t.exports=o},function(t,e,i){var r=i(29),s=Object.prototype,n=s.hasOwnProperty,a=function(t){var e,i=t,s=[];if(!i)return s;if(!r[typeof t])return s;for(e in i)n.call(i,e)&&s.push(e);return s};t.exports=a},function(t,e){function i(t){return function(e){return e[t]}}t.exports=i},function(t,e,i){var r=i(22),s=i(47),n=i(29),a=function(t,e,i){var a,o=t,h=o;if(!o)return h;if(!n[typeof o])return h;e=e&&"undefined"==typeof i?e:r(e,i,3);for(var l=-1,u=n[typeof o]&&s(o),c=u?u.length:0;++l<c;)if(a=u[l],e(o[a],a,t)===!1)return h;return h};t.exports=a},function(t,e,i){var r=i(27),s=i(28),n=i(44),a=r(a=Object.keys)&&a,o=a?function(t){return s(t)?a(t):[]}:n;t.exports=o},function(t,e,i){function r(t,e,i){var r=[];e=s(e,i,3);var a=-1,o=t?t.length:0;if("number"==typeof o)for(;++a<o;){var h=t[a];e(h,a,t)&&r.push(h)}else n(t,function(t,i,s){e(t,i,s)&&r.push(t)});return r}var s=i(21),n=i(46);t.exports=r},function(t,e,i){function r(t,e,i){var r=-1,l=s,u=t?t.length:0,c=!1;return i=(i<0?h(0,u+i):i)||0,a(t)?c=l(t,e,i)>-1:"number"==typeof u?c=(o(t)?t.indexOf(e,i):l(t,e,i))>-1:n(t,function(t){if(++r>=i)return!(c=t===e)}),c}var s=i(50),n=i(46),a=i(51),o=i(52),h=Math.max;t.exports=r},function(t,e){function i(t,e,i){for(var r=(i||0)-1,s=t?t.length:0;++r<s;)if(t[r]===e)return r;return-1}t.exports=i},function(t,e,i){var r=i(27),s="[object Array]",n=Object.prototype,a=n.toString,o=r(o=Array.isArray)&&o,h=o||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&a.call(t)==s||!1};t.exports=h},function(t,e){function i(t){return"string"==typeof t||t&&"object"==typeof t&&n.call(t)==r||!1}var r="[object String]",s=Object.prototype,n=s.toString;t.exports=i},function(t,e,i){var r=i(22),s=i(54),n=i(29),a=function(t,e,i){var a,o=t,h=o;if(!o)return h;var l=arguments,u=0,c="number"==typeof i?2:l.length;if(c>3&&"function"==typeof l[c-2])var p=r(l[--c-1],l[c--],2);else c>2&&"function"==typeof l[c-1]&&(p=l[--c]);for(;++u<c;)if(o=l[u],o&&n[typeof o])for(var d=-1,f=n[typeof o]&&s(o),m=f?f.length:0;++d<m;)a=f[d],h[a]=p?p(h[a],o[a]):o[a];return h};t.exports=a},function(t,e,i){var r=i(27),s=i(28),n=i(44),a=r(a=Object.keys)&&a,o=a?function(t){return s(t)?a(t):[]}:n;t.exports=o},function(t,e){function i(t){for(var e=arguments,i=0,r=e.length,n=t?t.length:0;++i<r;)for(var a=-1,o=e[i];++a<n;)t[a]===o&&(s.call(t,a--,1),n--);return t}var r=[],s=r.splice;t.exports=i},function(t,e,i){var r,s;(function(n){var a="undefined"!=typeof t&&t.exports&&"undefined"!=typeof n?n:this||window;(a._gsQueue||(a._gsQueue=[])).push(function(){"use strict";a._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},s=function(t,e,i){var r,s,n=t.cycle;for(r in n)s=n[r],t[r]="function"==typeof s?s(i,e[i]):s[i%s.length];delete t.cycle},n=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=n.prototype.render},a=1e-10,o=i._internals,h=o.isSelector,l=o.isArray,u=n.prototype=i.to({},.1,{}),c=[];n.version="1.19.1",u.constructor=n,u.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i.killTweensOf,n.getTweensOf=i.getTweensOf,n.lagSmoothing=i.lagSmoothing,n.ticker=i.ticker,n.render=i.render,u.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},u.updateTo=function(t,e){var r,s=this.ratio,n=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in t)this.vars[r]=t[r];if(this._initted||n)if(e)this._initted=!1,n&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||n)for(var o,h=1/(1-s),l=this._firstPT;l;)o=l.s+l.c,l.c*=h,l.s=o-l.c,l=l._next;return this},u.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,s,n,h,l,u,c,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=d-1e-7&&t>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,s="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(y<0||t<=0&&t>=-1e-7||y===a&&"isPause"!==this.data)&&y!==t&&(i=!0,y>a&&(s="onReverseComplete")),this._rawPrevTime=p=!e||t||y===t?t:a)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&y>0)&&(s="onReverseComplete",r=this._reversed),t<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=p=!e||t||y===t?t:a)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType?(l=this._time/v,u=this._easeType,c=this._easePower,(1===u||3===u&&l>=.5)&&(l=1-l),3===u&&(l*=2),1===c?l*=l:2===c?l*=l*l:3===c?l*=l*l*l:4===c&&(l*=l*l*l*l),1===u?this.ratio=1-l:2===u?this.ratio=l:this._time/v<.5?this.ratio=l/2:this.ratio=1-l/2):this.ratio=this._ease.getRatio(this._time/v)),f===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=y,this._cycle=g,o.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/v):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):s||(s="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||e||this._callback("onStart"))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||s)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),s&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s),0===v&&this._rawPrevTime===a&&p!==a&&(this._rawPrevTime=0)))},n.to=function(t,e,i){return new n(t,e,i)},n.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new n(t,e,i)},n.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new n(t,e,r)},n.staggerTo=n.allTo=function(t,e,a,o,u,p,d){o=o||0;var f,m,g,v,y=0,x=[],_=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),u.apply(d||a.callbackScope||this,p||c)},b=a.cycle,T=a.startAt&&a.startAt.cycle;for(l(t)||("string"==typeof t&&(t=i.selector(t)||t),
h(t)&&(t=r(t))),t=t||[],o<0&&(t=r(t),t.reverse(),o*=-1),f=t.length-1,g=0;g<=f;g++){m={};for(v in a)m[v]=a[v];if(b&&(s(m,t,g),null!=m.duration&&(e=m.duration,delete m.duration)),T){T=m.startAt={};for(v in a.startAt)T[v]=a.startAt[v];s(m.startAt,t,g)}m.delay=y+(m.delay||0),g===f&&u&&(m.onComplete=_),x[g]=new n(t[g],e,m),y+=o}return x},n.staggerFrom=n.allFrom=function(t,e,i,r,s,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,n.staggerTo(t,e,i,r,s,a,o)},n.staggerFromTo=n.allFromTo=function(t,e,i,r,s,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,n.staggerTo(t,e,r,s,a,o,h)},n.delayedCall=function(t,e,i,r,s){return new n(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:s,overwrite:0})},n.set=function(t,e){return new n(t,0,e)},n.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var p=function(t,e){for(var r=[],s=0,n=t._first;n;)n instanceof i?r[s++]=n:(e&&(r[s++]=n),r=r.concat(p(n,e)),s=r.length),n=n._next;return r},d=n.getAllTweens=function(e){return p(t._rootTimeline,e).concat(p(t._rootFramesTimeline,e))};n.killAll=function(t,i,r,s){null==i&&(i=!0),null==r&&(r=!0);var n,a,o,h=d(0!=s),l=h.length,u=i&&r&&s;for(o=0;o<l;o++)a=h[o],(u||a instanceof e||(n=a.target===a.vars.onComplete)&&r||i&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},n.killChildTweensOf=function(t,e){if(null!=t){var s,a,u,c,p,d=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),h(t)&&(t=r(t)),l(t))for(c=t.length;--c>-1;)n.killChildTweensOf(t[c],e);else{s=[];for(u in d)for(a=d[u].target.parentNode;a;)a===t&&(s=s.concat(d[u].tweens)),a=a.parentNode;for(p=s.length,c=0;c<p;c++)e&&s[c].totalTime(s[c].totalDuration()),s[c]._enabled(!1,!1)}}};var f=function(t,i,r,s){i=i!==!1,r=r!==!1,s=s!==!1;for(var n,a,o=d(s),h=i&&r&&s,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&r||i&&!n)&&a.paused(t)};return n.pauseAll=function(t,e,i){f(!0,t,e,i)},n.resumeAll=function(t,e,i){f(!1,t,e,i)},n.globalTimeScale=function(e){var r=t._rootTimeline,s=i.ticker.time;return arguments.length?(e=e||a,r._startTime=s-(s-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,s=i.ticker.frame,r._startTime=s-(s-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},u.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n},!0),a._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,s=this.vars;for(r in s)i=s[r],l(i)&&i.join("").indexOf("{self}")!==-1&&(s[r]=this._swapSelfInParams(i));l(s.tweens)&&this.add(s.tweens,0,s.align,s.stagger)},s=1e-10,n=i._internals,o=r._internals={},h=n.isSelector,l=n.isArray,u=n.lazyTweens,c=n.lazyRender,p=a._gsDefine.globals,d=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=function(t,e,i){var r,s,n=t.cycle;for(r in n)s=n[r],t[r]="function"==typeof s?s(i,e[i]):s[i%s.length];delete t.cycle},m=o.pauseCallback=function(){},g=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},v=r.prototype=new e;return r.version="1.19.1",v.constructor=r,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(t,e,r,s){var n=r.repeat&&p.TweenMax||i;return e?this.add(new n(t,e,r),s):this.set(t,r,s)},v.from=function(t,e,r,s){return this.add((r.repeat&&p.TweenMax||i).from(t,e,r),s)},v.fromTo=function(t,e,r,s,n){var a=s.repeat&&p.TweenMax||i;return e?this.add(a.fromTo(t,e,r,s),n):this.set(t,s,n)},v.staggerTo=function(t,e,s,n,a,o,l,u){var c,p,m=new r({onComplete:o,onCompleteParams:l,callbackScope:u,smoothChildTiming:this.smoothChildTiming}),v=s.cycle;for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],h(t)&&(t=g(t)),n=n||0,n<0&&(t=g(t),t.reverse(),n*=-1),p=0;p<t.length;p++)c=d(s),c.startAt&&(c.startAt=d(c.startAt),c.startAt.cycle&&f(c.startAt,t,p)),v&&(f(c,t,p),null!=c.duration&&(e=c.duration,delete c.duration)),m.to(t[p],e,c,p*n);return this.add(m,a)},v.staggerFrom=function(t,e,i,r,s,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,s,n,a,o)},v.staggerFromTo=function(t,e,i,r,s,n,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,s,n,a,o,h)},v.call=function(t,e,r,s){return this.add(i.delayedCall(0,t,e,r),s)},v.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var s,n,a=new r(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,s=o._first;s;)n=s._next,e&&s instanceof i&&s.target===s.vars.onComplete||a.add(s,s._startTime-s._delay),s=n;return o.add(a,0),a},v.add=function(s,n,a,o){var h,u,c,p,d,f;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,s)),!(s instanceof t)){if(s instanceof Array||s&&s.push&&l(s)){for(a=a||"normal",o=o||0,h=n,u=s.length,c=0;c<u;c++)l(p=s[c])&&(p=new r({tweens:p})),this.add(p,h),"string"!=typeof p&&"function"!=typeof p&&("sequence"===a?h=p._startTime+p.totalDuration()/p._timeScale:"start"===a&&(p._startTime-=p.delay())),h+=o;return this._uncache(!0)}if("string"==typeof s)return this.addLabel(s,n);if("function"!=typeof s)throw"Cannot add "+s+" into the timeline; it is not a tween, timeline, function, or string.";s=i.delayedCall(0,s)}if(e.prototype.add.call(this,s,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=this,f=d.rawTime()>s._startTime;d._timeline;)f&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},v.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var r=e.length;--r>-1;)this.remove(e[r]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},v.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,r,s){var n=i.delayedCall(0,m,r,s||this);return n.vars.onComplete=n.vars.onReverseComplete=e,n.data="isPause",this._hasPause=!0,this.add(n,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,i,r,s){var n;if(s instanceof t&&s.timeline===this)this.remove(s);else if(s&&(s instanceof Array||s.push&&l(s)))for(n=s.length;--n>-1;)s[n]instanceof t&&s[n].timeline===this&&this.remove(s[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),n===-1)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,r):this.duration()}return Number(e)+i},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,a,o,h,l,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._startTime,g=this._timeScale,v=this._paused;if(t>=d-1e-7&&t>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===s)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>s&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,t=d+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==s&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(o="onReverseComplete",n=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=n=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,0===t&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;t=0,this._initted||(h=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=f)for(r=this._first;r&&r._startTime<=t&&!l;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(l=r),r=r._next;else for(r=this._last;r&&r._startTime>=t&&!l;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(l=r),r=r._prev;l&&(this._time=t=l._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==f&&this._first||i||h||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),p=this._time,p>=f)for(r=this._first;r&&(a=r._next,p===this._time&&(!this._paused||v));)(r._active||r._startTime<=p&&!r._paused&&!r._gc)&&(l===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,p===this._time&&(!this._paused||v));){if(r._active||r._startTime<=f&&!r._paused&&!r._gc){if(l===r){for(l=r._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,i),l=l._prev;l=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)}r=a}this._onUpdate&&(e||(u.length&&c(),this._callback("onUpdate"))),o&&(this._gc||m!==this._startTime&&g===this._timeScale||(0===this._time||d>=this.totalDuration())&&(n&&(u.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,r,s){s=s||-9999999999;for(var n=[],a=this._first,o=0;a;)a._startTime<s||(a instanceof i?e!==!1&&(n[o++]=a):(r!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,r)),o=n.length))),a=a._next;return n},v.getTweensOf=function(t,e){var r,s,n=this._gc,a=[],o=0;for(n&&this._enabled(!0,!0),r=i.getTweensOf(t),s=r.length;--s>-1;)(r[s].timeline===this||e&&this._contains(r[s]))&&(a[o++]=r[s]);return n&&this._enabled(!1,!0),a},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,i){i=i||0;for(var r,s=this._first,n=this._labels;s;)s._startTime>=i&&(s._startTime+=t),s=s._next;if(e)for(r in n)n[r]>=i&&(n[r]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,s=!1;--r>-1;)i[r]._kill(t,e)&&(s=!0);return s},v.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},v.totalTime=function(e,i,r){this._forcingPlayhead=!0;var s=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,s},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,s=this._last,n=999999999999;s;)e=s._prev,s._dirty&&s.totalDuration(),s._startTime>n&&this._sortChildren&&!s._paused?this.add(s,s._startTime-s._delay):n=s._startTime,s._startTime<0&&!s._paused&&(r-=s._startTime,this._timeline.smoothChildTiming&&(this._startTime+=s._startTime/this._timeScale),this.shiftChildren(-s._startTime,!1,-9999999999),n=0),i=s._startTime+s._totalDuration/s._timeScale,i>r&&(r=i),s=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},v.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},r},!0),a._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},s=1e-10,n=e._internals,o=n.lazyTweens,h=n.lazyRender,l=a._gsDefine.globals,u=new i(null,null,1,0),c=r.prototype=new t;return c.constructor=r,c.kill()._gc=!1,r.version="1.19.1",c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},c.addCallback=function(t,i,r,s){return this.add(e.delayedCall(0,t,r,s),i)},c.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,s=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===s&&i[r]._enabled(!1,!1);return this},c.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},c.tweenTo=function(t,i){i=i||{};var r,s,n,a={ease:u,useFrames:this.usesFrames(),immediateRender:!1},o=i.repeat&&l.TweenMax||e;for(s in i)a[s]=i[s];return a.time=this._parseTimeOrLabel(t),r=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,n=new o(this,r,a),a.onStart=function(){n.target.paused(!0),n.vars.time!==n.target.time()&&r===n.duration()&&n.duration(Math.abs(n.vars.time-n.target.time())/n.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||n,i.onStartParams||[])},n},c.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},c.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,a,l,u,c,p,d,f=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,g=this._time,v=this._totalTime,y=this._startTime,x=this._timeScale,_=this._rawPrevTime,b=this._paused,T=this._cycle;if(t>=f-1e-7&&t>=0)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,l="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||_<0||_===s)&&_!==t&&this._first&&(u=!0,_>s&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=m,t=m+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==g||0===m&&_!==s&&(_>0||t<0&&_>=0)&&!this._locked)&&(l="onReverseComplete",n=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=n=!0,l="onReverseComplete"):_>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=m||!e||t||this._rawPrevTime===t?t:s,0===t&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;t=0,this._initted||(u=!0)}else if(0===m&&_<0&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(c=m+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&v<=t&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,t=m+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e&&t<m){if(t=this._time,t>=g||this._repeat&&T!==this._cycle)for(r=this._first;r&&r._startTime<=t&&!p;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(p=r),r=r._next;else for(r=this._last;r&&r._startTime>=t&&!p;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(p=r),r=r._prev;p&&(this._time=t=p._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==T&&!this._locked){var w=this._yoyo&&0!==(1&T),S=w===(this._yoyo&&0!==(1&this._cycle)),C=this._totalTime,A=this._cycle,R=this._rawPrevTime,E=this._time;if(this._totalTime=T*m,this._cycle<T?w=!w:this._totalTime+=m,this._time=g,this._rawPrevTime=0===m?_-1e-4:_,this._cycle=T,this._locked=!0,g=w?0:m,this.render(g,e,0===m),e||this._gc||this.vars.onRepeat&&(this._cycle=A,this._locked=!1,this._callback("onRepeat")),g!==this._time)return;if(S&&(this._cycle=T,this._locked=!0,g=w?m+1e-4:-1e-4,this.render(g,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=E,this._totalTime=C,this._cycle=A,this._rawPrevTime=R}if(!(this._time!==g&&this._first||i||u||p))return void(v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&t>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),d=this._time,d>=g)for(r=this._first;r&&(a=r._next,d===this._time&&(!this._paused||b));)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(p===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,d===this._time&&(!this._paused||b));){if(r._active||r._startTime<=g&&!r._paused&&!r._gc){if(p===r){for(p=r._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(t-p._startTime)*p._timeScale:(t-p._startTime)*p._timeScale,e,i),p=p._prev;p=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)}r=a}this._onUpdate&&(e||(o.length&&h(),this._callback("onUpdate"))),l&&(this._locked||this._gc||y!==this._startTime&&x===this._timeScale||(0===this._time||f>=this.totalDuration())&&(n&&(o.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},c.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,s,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(r=0;r<h;r++)s=a[r],s.isActive()&&(n[o++]=s);return n},c.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;e<r;e++)if(i[e].time>t)return i[e].name;return null},c.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},c.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},c.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},c.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},c.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},c.totalDuration=function(e){return arguments.length?this._repeat!==-1&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},c.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],i=[],r=[],s={},n=a._gsDefine.globals,o=function(t,e,i,r){i===r&&(i=r-(r-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},h=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(t,e,i,r){var s={a:t},n={},a={},o={c:r},h=(t+e)/2,l=(e+i)/2,u=(i+r)/2,c=(h+l)/2,p=(l+u)/2,d=(p-c)/8;return s.b=h+(t-h)/4,n.b=c+d,s.c=n.a=(s.b+n.b)/2,n.c=a.a=(c+p)/2,a.b=p-d,o.b=u+(r-u)/4,a.c=o.a=(a.b+o.b)/2,[s,n,a,o]},u=function(t,s,n,a,o){var h,u,c,p,d,f,m,g,v,y,x,_,b,T=t.length-1,w=0,S=t[0].a;for(h=0;h<T;h++)d=t[w],u=d.a,c=d.d,p=t[w+1].d,o?(x=e[h],_=i[h],b=(_+x)*s*.25/(a?.5:r[h]||.5),f=c-(c-u)*(a?.5*s:0!==x?b/x:0),m=c+(p-c)*(a?.5*s:0!==_?b/_:0),g=c-(f+((m-f)*(3*x/(x+_)+.5)/4||0))):(f=c-(c-u)*s*.5,m=c+(p-c)*s*.5,g=c-(f+m)/2),f+=g,m+=g,d.c=v=f,0!==h?d.b=S:d.b=S=d.a+.6*(d.c-d.a),d.da=c-u,d.ca=v-u,d.ba=S-u,n?(y=l(u,S,v,c),t.splice(w,1,y[0],y[1],y[2],y[3]),w+=4):w++,S=m;d=t[w],d.b=S,d.c=S+.4*(d.d-S),d.da=d.d-d.a,d.ca=d.c-d.a,d.ba=S-d.a,n&&(y=l(d.a,S,d.c,d.d),t.splice(w,1,y[0],y[1],y[2],y[3]))},c=function(t,r,s,n){var a,h,l,u,c,p,d=[];if(n)for(t=[n].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][r])&&"="===p.charAt(1)&&(t[h][r]=n[r]+Number(p.charAt(0)+p.substr(2)));if(a=t.length-2,a<0)return d[0]=new o(t[0][r],0,0,t[a<-1?0:1][r]),d;for(h=0;h<a;h++)l=t[h][r],u=t[h+1][r],d[h]=new o(l,0,0,u),s&&(c=t[h+2][r],e[h]=(e[h]||0)+(u-l)*(u-l),i[h]=(i[h]||0)+(c-u)*(c-u));return d[h]=new o(t[h][r],0,0,t[h+1][r]),d},p=function(t,n,a,o,l,p){var d,f,m,g,v,y,x,_,b={},T=[],w=p||t[0];l="string"==typeof l?","+l+",":h,null==n&&(n=1);for(f in t[0])T.push(f);if(t.length>1){for(_=t[t.length-1],x=!0,d=T.length;--d>-1;)if(f=T[d],Math.abs(w[f]-_[f])>.05){x=!1;break}x&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=r.length=0,d=T.length;--d>-1;)f=T[d],s[f]=l.indexOf(","+f+",")!==-1,b[f]=c(t,f,s[f],p);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!o){for(d=T.length;--d>-1;)if(s[f])for(m=b[T[d]],y=m.length-1,g=0;g<y;g++)v=m[g+1].da/i[g]+m[g].da/e[g]||0,r[g]=(r[g]||0)+v*v;for(d=r.length;--d>-1;)r[d]=Math.sqrt(r[d])}for(d=T.length,g=a?4:1;--d>-1;)f=T[d],m=b[f],u(m,n,a,o,s[f]),x&&(m.splice(0,g),m.splice(m.length-g,g));return b},d=function(t,e,i){e=e||"soft";var r,s,n,a,h,l,u,c,p,d,f,m={},g="cubic"===e?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(p in t[0])y.push(p);for(l=y.length;--l>-1;){for(p=y[l],m[p]=h=[],d=0,c=t.length,u=0;u<c;u++)r=null==i?t[u][p]:"string"==typeof(f=t[u][p])&&"="===f.charAt(1)?i[p]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&u>1&&u<c-1&&(h[d++]=(r+h[d-2])/2),h[d++]=r;for(c=d-g+1,d=0,u=0;u<c;u+=g)r=h[u],s=h[u+1],n=h[u+2],a=2===g?0:h[u+3],h[d++]=f=3===g?new o(r,s,n,a):new o(r,(2*s+r)/3,(2*s+n)/3,n);h.length=d}return m},f=function(t,e,i){for(var r,s,n,a,o,h,l,u,c,p,d,f=1/i,m=t.length;--m>-1;)for(p=t[m],n=p.a,a=p.d-n,o=p.c-n,h=p.b-n,r=s=0,u=1;u<=i;u++)l=f*u,c=1-l,r=s-(s=(l*l*a+3*c*(l*o+c*h))*l),d=m*i+u-1,e[d]=(e[d]||0)+r*r},m=function(t,e){e=e>>0||6;var i,r,s,n,a=[],o=[],h=0,l=0,u=e-1,c=[],p=[];for(i in t)f(t[i],a,e);for(s=a.length,r=0;r<s;r++)h+=Math.sqrt(a[r]),n=r%e,p[n]=h,n===u&&(l+=h,n=r/e>>0,c[n]=p,o[n]=l,h=0,p=[]);return{length:l,lengths:o,segments:c}},g=a._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,s,n,a,o,h=e.values||[],l={},u=h[0],c=e.autoRotate||i.vars.orientToBezier;this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",c===!0?0:Number(c)||0]]:null;for(r in u)this._props.push(r);for(n=this._props.length;--n>-1;)r=this._props[n],this._overwriteProps.push(r),s=this._func[r]="function"==typeof t[r],l[r]=s?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),o||l[r]!==h[0][r]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):d(h,e.type,l),this._segCount=this._beziers[r].length,this._timeRes){var f=m(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),n=c.length;--n>-1;){for(a=0;a<3;a++)r=c[n][a],this._func[r]="function"==typeof t[r]&&t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)];r=c[n][2],this._initialRotations[n]=(this._func[r]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,r,s,n,a,o,h,l,u,c,p=this._segCount,d=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,s=this._li,e>this._l2&&s<p-1){for(l=p-1;s<l&&(this._l2=u[++s])<=e;);this._l1=u[s-1],this._li=s,this._curSeg=c=this._segments[s],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&s>0){for(;s>0&&(this._l1=u[--s])>=e;);0===s&&e<this._l1?this._l1=0:s++,this._l2=u[s],this._li=s,this._curSeg=c=this._segments[s],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=s,e-=this._l1,s=this._si,e>this._s2&&s<c.length-1){for(l=c.length-1;s<l&&(this._s2=c[++s])<=e;);this._s1=c[s-1],this._si=s}else if(e<this._s1&&s>0){for(;s>0&&(this._s1=c[--s])>=e;);0===s&&e<this._s1?this._s1=0:s++,this._s2=c[s],this._si=s}o=(s+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else i=e<0?0:e>=1?p-1:p*e>>0,o=(e-i*(1/p))*p;for(r=1-o,s=this._props.length;--s>-1;)n=this._props[s],a=this._beziers[n][i],h=(o*o*a.da+3*r*(o*a.ca+r*a.ba))*o+a.a,this._mod[n]&&(h=this._mod[n](h,f)),d[n]?f[n](h):f[n]=h;if(this._autoRotate){var g,v,y,x,_,b,T,w=this._autoRotate;for(s=w.length;--s>-1;)n=w[s][2],b=w[s][3]||0,T=w[s][4]===!0?1:t,a=this._beziers[w[s][0]],g=this._beziers[w[s][1]],a&&g&&(a=a[i],g=g[i],v=a.a+(a.b-a.a)*o,x=a.b+(a.c-a.b)*o,v+=(x-v)*o,x+=(a.c+(a.d-a.c)*o-x)*o,y=g.a+(g.b-g.a)*o,_=g.b+(g.c-g.b)*o,y+=(_-y)*o,_+=(g.c+(g.d-g.c)*o-_)*o,h=m?Math.atan2(_-y,x-v)*T+b:this._initialRotations[s],this._mod[n]&&(h=this._mod[n](h,f)),d[n]?f[n](h):f[n]=h)}}}),v=g.prototype;g.bezierThrough=p,g.cubicToQuadratic=l,g._autoCSS=!0,g.quadraticToCubic=function(t,e,i){return new o(t,(2*e+t)/3,(2*e+i)/3,i)},g._cssRegister=function(){var t=n.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,s=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new g;var l,u,c,p=e.values,d=p.length-1,f=[],m={};if(d<0)return o;for(l=0;l<=d;l++)c=i(t,p[l],a,o,h,d!==l),f[l]=c.end;for(u in e)m[u]=e[u];return m.values=f,o=new s(t,"bezier",0,0,c.pt,2),o.data=c,o.plugin=h,o.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(l=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),m.autoRotate&&(a._transform||a._enableTransforms(!1),c.autoRotate=a._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,a._overwriteProps.push("rotation")),h._onInitTween(c.proxy,m,a._tween),o}})}},v._mod=function(t){for(var e,i=this._overwriteProps,r=i.length;--r>-1;)e=t[i[r]],e&&"function"==typeof e&&(this._mod[i[r]]=e)},v._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);if(r=this._autoRotate)for(i=r.length;--i>-1;)t[r[i][2]]&&r.splice(i,1);return this._super._kill.call(this,t)}}(),a._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,r,s,n,o=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},h=a._gsDefine.globals,l={},u=o.prototype=new t("css");u.constructor=o,o.version="1.19.1",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,u="px",o.suffixMap={top:u,right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var c,p,d,f,m,g,v,y,x=/(?:\-|\.|\b)(\d|\.|e\-)+/g,_=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,T=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,S=/opacity *= *([^)]*)/i,C=/opacity:([^;]*)/i,A=/alpha\(opacity *=.+?\)/i,R=/^(rgb|hsl)/,E=/([A-Z])/g,P=/-([a-z])/gi,M=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,L=function(t,e){
return e.toUpperCase()},O=/(?:Left|Right|Width)/i,B=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,I=/[\s,\(]/i,k=Math.PI/180,U=180/Math.PI,G={},N={style:{}},j=a.document||{createElement:function(){return N}},V=function(t,e){return j.createElementNS?j.createElementNS(e||"http://www.w3.org/1999/xhtml",t):j.createElement(t)},W=V("div"),z=V("img"),X=o._internals={_specialProps:l},Y=(a.navigator||{}).userAgent||"",H=function(){var t=Y.indexOf("Android"),e=V("a");return d=Y.indexOf("Safari")!==-1&&Y.indexOf("Chrome")===-1&&(t===-1||parseFloat(Y.substr(t+8,2))>3),m=d&&parseFloat(Y.substr(Y.indexOf("Version/")+8,2))<6,f=Y.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),q=function(t){return S.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(t){a.console&&console.log(t)},Q="",K="",$=function(t,e){e=e||W;var i,r,s=e.style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===s[i[r]+t];);return r>=0?(K=3===r?"ms":i[r],Q="-"+K.toLowerCase()+"-",K+t):null},J=j.defaultView?j.defaultView.getComputedStyle:function(){},tt=o.getStyle=function(t,e,i,r,s){var n;return H||"opacity"!==e?(!r&&t.style[e]?n=t.style[e]:(i=i||J(t))?n=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(E,"-$1").toLowerCase()):t.currentStyle&&(n=t.currentStyle[e]),null==s||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:s):q(t)},et=X.convertToPixels=function(t,i,r,s,n){if("px"===s||!s)return r;if("auto"===s||!r)return 0;var a,h,l,u=O.test(i),c=t,p=W.style,d=r<0,f=1===r;if(d&&(r=-r),f&&(r*=100),"%"===s&&i.indexOf("border")!==-1)a=r/100*(u?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==s&&c.appendChild&&"v"!==s.charAt(0)&&"rem"!==s)p[u?"borderLeftWidth":"borderTopWidth"]=r+s;else{if(c=t.parentNode||j.body,h=c._gsCache,l=e.ticker.frame,h&&u&&h.time===l)return h.width*r/100;p[u?"width":"height"]=r+s}c.appendChild(W),a=parseFloat(W[u?"offsetWidth":"offsetHeight"]),c.removeChild(W),u&&"%"===s&&o.cacheWidths!==!1&&(h=c._gsCache=c._gsCache||{},h.time=l,h.width=a/r*100),0!==a||n||(a=et(t,i,r,s,!0))}return f&&(a/=100),d?-a:a},it=X.calculateOffset=function(t,e,i){if("absolute"!==tt(t,"position",i))return 0;var r="left"===e?"Left":"Top",s=tt(t,"margin"+r,i);return t["offset"+r]-(et(t,e,parseFloat(s),s.replace(w,""))||0)},rt=function(t,e){var i,r,s,n={};if(e=e||J(t,null))if(i=e.length)for(;--i>-1;)s=e[i],s.indexOf("-transform")!==-1&&Mt!==s||(n[s.replace(P,L)]=e.getPropertyValue(s));else for(i in e)i.indexOf("Transform")!==-1&&Pt!==i||(n[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===n[i]&&(n[i.replace(P,L)]=e[i]);return H||(n.opacity=q(t)),r=zt(t,e,!1),n.rotation=r.rotation,n.skewX=r.skewX,n.scaleX=r.scaleX,n.scaleY=r.scaleY,n.x=r.x,n.y=r.y,Ot&&(n.z=r.z,n.rotationX=r.rotationX,n.rotationY=r.rotationY,n.scaleZ=r.scaleZ),n.filters&&delete n.filters,n},st=function(t,e,i,r,s){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||s&&s[a])&&a.indexOf("Origin")===-1&&("number"!=typeof n&&"string"!=typeof n||(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(T,"")?n:0:it(t,a),void 0!==l[a]&&(o=new xt(l,a,l[a],o))));if(r)for(a in r)"className"!==a&&(h[a]=r[a]);return{difs:h,firstMPT:o}},nt={width:["Left","Right"],height:["Top","Bottom"]},at=["marginLeft","marginRight","marginTop","marginBottom"],ot=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||J(t))[e]||0;if(t.getCTM&&jt(t))return t.getBBox()[e]||0;var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),s=nt[e],n=s.length;for(i=i||J(t,null);--n>-1;)r-=parseFloat(tt(t,"padding"+s[n],i,!0))||0,r-=parseFloat(tt(t,"border"+s[n]+"Width",i,!0))||0;return r},ht=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,r=t.split(" "),s=t.indexOf("left")!==-1?"0%":t.indexOf("right")!==-1?"100%":r[0],n=t.indexOf("top")!==-1?"0%":t.indexOf("bottom")!==-1?"100%":r[1];if(r.length>3&&!e){for(r=t.split(", ").join(",").split(","),t=[],i=0;i<r.length;i++)t.push(ht(r[i]));return t.join(",")}return null==n?n="center"===s?"50%":"0":"center"===n&&(n="50%"),("center"===s||isNaN(parseFloat(s))&&(s+"").indexOf("=")===-1)&&(s="50%"),t=s+" "+n+(r.length>2?" "+r[2]:""),e&&(e.oxp=s.indexOf("%")!==-1,e.oyp=n.indexOf("%")!==-1,e.oxr="="===s.charAt(1),e.oyr="="===n.charAt(1),e.ox=parseFloat(s.replace(T,"")),e.oy=parseFloat(n.replace(T,"")),e.v=t),e||t},lt=function(t,e){return"function"==typeof t&&(t=t(y,v)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ut=function(t,e){return"function"==typeof t&&(t=t(y,v)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ct=function(t,e,i,r){var s,n,a,o,h,l=1e-6;return"function"==typeof t&&(t=t(y,v)),null==t?o=e:"number"==typeof t?o=t:(s=360,n=t.split("_"),h="="===t.charAt(1),a=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(t.indexOf("rad")===-1?1:U)-(h?0:e),n.length&&(r&&(r[i]=e+a),t.indexOf("short")!==-1&&(a%=s,a!==a%(s/2)&&(a=a<0?a+s:a-s)),t.indexOf("_cw")!==-1&&a<0?a=(a+9999999999*s)%s-(a/s|0)*s:t.indexOf("ccw")!==-1&&a>0&&(a=(a-9999999999*s)%s-(a/s|0)*s)),o=e+a),o<l&&o>-l&&(o=0),o},pt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,i){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},ft=o.parseColor=function(t,e){var i,r,s,n,a,o,h,l,u,c,p;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),pt[t])i=pt[t];else if("#"===t.charAt(0))4===t.length&&(r=t.charAt(1),s=t.charAt(2),n=t.charAt(3),t="#"+r+r+s+s+n+n),t=parseInt(t.substr(1),16),i=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=p=t.match(x),e){if(t.indexOf("=")!==-1)return t.match(_)}else a=Number(i[0])%360/360,o=Number(i[1])/100,h=Number(i[2])/100,s=h<=.5?h*(o+1):h+o-h*o,r=2*h-s,i.length>3&&(i[3]=Number(t[3])),i[0]=dt(a+1/3,r,s),i[1]=dt(a,r,s),i[2]=dt(a-1/3,r,s);else i=t.match(x)||pt.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=pt.black;return e&&!p&&(r=i[0]/255,s=i[1]/255,n=i[2]/255,l=Math.max(r,s,n),u=Math.min(r,s,n),h=(l+u)/2,l===u?a=o=0:(c=l-u,o=h>.5?c/(2-l-u):c/(l+u),a=l===r?(s-n)/c+(s<n?6:0):l===s?(n-r)/c+2:(r-s)/c+4,a*=60),i[0]=a+.5|0,i[1]=100*o+.5|0,i[2]=100*h+.5|0),i},mt=function(t,e){var i,r,s,n=t.match(gt)||[],a=0,o=n.length?"":t;for(i=0;i<n.length;i++)r=n[i],s=t.substr(a,t.indexOf(r,a)-a),a+=s.length+r.length,r=ft(r,e),3===r.length&&r.push(1),o+=s+(e?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return o+t.substr(a)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(u in pt)gt+="|"+u+"\\b";gt=new RegExp(gt+")","gi"),o.colorStringFilter=function(t){var e,i=t[0]+t[1];gt.test(i)&&(e=i.indexOf("hsl(")!==-1||i.indexOf("hsla(")!==-1,t[0]=mt(t[0],e),t[1]=mt(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=o.colorStringFilter);var vt=function(t,e,i,r){if(null==t)return function(t){return t};var s,n=e?(t.match(gt)||[""])[0]:"",a=t.split(n).join("").match(b)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=t.indexOf(" ")!==-1?" ":",",u=a.length,c=u>0?a[0].replace(x,""):"";return u?s=e?function(t){var e,p,d,f;if("number"==typeof t)t+=c;else if(r&&F.test(t)){for(f=t.replace(F,"|").split("|"),d=0;d<f.length;d++)f[d]=s(f[d]);return f.join(",")}if(e=(t.match(gt)||[n])[0],p=t.split(e).join("").match(b)||[],d=p.length,u>d--)for(;++d<u;)p[d]=i?p[(d-1)/2|0]:a[d];return o+p.join(l)+l+e+h+(t.indexOf("inset")!==-1?" inset":"")}:function(t){var e,n,p;if("number"==typeof t)t+=c;else if(r&&F.test(t)){for(n=t.replace(F,"|").split("|"),p=0;p<n.length;p++)n[p]=s(n[p]);return n.join(",")}if(e=t.match(b)||[],p=e.length,u>p--)for(;++p<u;)e[p]=i?e[(p-1)/2|0]:a[p];return o+e.join(l)+h}:function(t){return t}},yt=function(t){return t=t.split(","),function(e,i,r,s,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;h<4;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return s.parse(e,o,n,a)}},xt=(X._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,s,n,a=this.data,o=a.proxy,h=a.firstMPT,l=1e-6;h;)e=o[h.v],h.r?e=Math.round(e):e<l&&e>-l&&(e=0),h.t[h.p]=e,h=h._next;if(a.autoRotate&&(a.autoRotate.rotation=a.mod?a.mod(o.rotation,this.t):o.rotation),1===t||0===t)for(h=a.firstMPT,n=1===t?"e":"b";h;){if(i=h.t,i.type){if(1===i.type){for(s=i.xs0+i.s+i.xs1,r=1;r<i.l;r++)s+=i["xn"+r]+i["xs"+(r+1)];i[n]=s}}else i[n]=i.s+i.xs0;h=h._next}},function(t,e,i,r,s){this.t=t,this.p=e,this.v=i,this.r=s,r&&(r._prev=this,this._next=r)}),_t=(X._parseToProxy=function(t,e,i,r,s,n){var a,o,h,l,u,c=r,p={},d={},f=i._transform,m=G;for(i._transform=null,G=e,r=u=i.parse(t,e,r,s),G=m,n&&(i._transform=f,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(r.type<=1&&(o=r.p,d[o]=r.s+r.c,p[o]=r.s,n||(l=new xt(r,"s",o,l,r.r),r.c=0),1===r.type))for(a=r.l;--a>0;)h="xn"+a,o=r.p+"_"+h,d[o]=r.data[h],p[o]=r[h],n||(l=new xt(r,h,o,l,r.rxp[h]));r=r._next}return{proxy:p,end:d,firstMPT:l,pt:u}},X.CSSPropTween=function(t,e,r,s,a,o,h,l,u,c,p){this.t=t,this.p=e,this.s=r,this.c=s,this.n=h||e,t instanceof _t||n.push(this.n),this.r=l,this.type=o||0,u&&(this.pr=u,i=!0),this.b=void 0===c?r:c,this.e=void 0===p?r+s:p,a&&(this._next=a,a._prev=this)}),bt=function(t,e,i,r,s,n){var a=new _t(t,e,i,r-i,s,(-1),n);return a.b=i,a.e=a.xs0=r,a},Tt=o.parseComplex=function(t,e,i,r,s,n,a,h,l,u){i=i||n||"","function"==typeof r&&(r=r(y,v)),a=new _t(t,e,0,0,a,u?2:1,null,(!1),h,i,r),r+="",s&&gt.test(r+i)&&(r=[i,r],o.colorStringFilter(r),i=r[0],r=r[1]);var p,d,f,m,g,b,T,w,S,C,A,R,E,P=i.split(", ").join(",").split(" "),M=r.split(", ").join(",").split(" "),L=P.length,O=c!==!1;for(r.indexOf(",")===-1&&i.indexOf(",")===-1||(P=P.join(" ").replace(F,", ").split(" "),M=M.join(" ").replace(F,", ").split(" "),L=P.length),L!==M.length&&(P=(n||"").split(" "),L=P.length),a.plugin=l,a.setRatio=u,gt.lastIndex=0,p=0;p<L;p++)if(m=P[p],g=M[p],w=parseFloat(m),w||0===w)a.appendXtra("",w,lt(g,w),g.replace(_,""),O&&g.indexOf("px")!==-1,!0);else if(s&&gt.test(m))R=g.indexOf(")")+1,R=")"+(R?g.substr(R):""),E=g.indexOf("hsl")!==-1&&H,m=ft(m,E),g=ft(g,E),S=m.length+g.length>6,S&&!H&&0===g[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(M[p]).join("transparent")):(H||(S=!1),E?a.appendXtra(S?"hsla(":"hsl(",m[0],lt(g[0],m[0]),",",!1,!0).appendXtra("",m[1],lt(g[1],m[1]),"%,",!1).appendXtra("",m[2],lt(g[2],m[2]),S?"%,":"%"+R,!1):a.appendXtra(S?"rgba(":"rgb(",m[0],g[0]-m[0],",",!0,!0).appendXtra("",m[1],g[1]-m[1],",",!0).appendXtra("",m[2],g[2]-m[2],S?",":R,!0),S&&(m=m.length<4?1:m[3],a.appendXtra("",m,(g.length<4?1:g[3])-m,R,!1))),gt.lastIndex=0;else if(b=m.match(x)){if(T=g.match(_),!T||T.length!==b.length)return a;for(f=0,d=0;d<b.length;d++)A=b[d],C=m.indexOf(A,f),a.appendXtra(m.substr(f,C-f),Number(A),lt(T[d],A),"",O&&"px"===m.substr(C+A.length,2),0===d),f=C+A.length;a["xs"+a.l]+=m.substr(f)}else a["xs"+a.l]+=a.l||a["xs"+a.l]?" "+g:g;if(r.indexOf("=")!==-1&&a.data){for(R=a.xs0+a.data.s,p=1;p<a.l;p++)R+=a["xs"+p]+a.data["xn"+p];a.e=R+a["xs"+p]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},wt=9;for(u=_t.prototype,u.l=u.pr=0;--wt>0;)u["xn"+wt]=0,u["xs"+wt]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(t,e,i,r,s,n){var a=this,o=a.l;return a["xs"+o]+=n&&(o||a["xs"+o])?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=s,a["xn"+o]=e,a.plugin||(a.xfirst=new _t(a,"xn"+o,e,i,a.xfirst||a,0,a.n,s,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=s,a)):(a["xs"+o]+=e+(r||""),a)};var St=function(t,e){e=e||{},this.p=e.prefix?$(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},Ct=X._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,s,n=t.split(","),a=e.defaultValue;for(i=i||[a],r=0;r<n.length;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||a,s=new St(n[r],e)},At=X._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Ct(t,{parser:function(t,i,r,s,n,a,o){var u=h.com.greensock.plugins[e];return u?(u._cssRegister(),l[r].parse(t,i,r,s,n,a,o)):(Z("Error: "+e+" js file not loaded."),n)}})}};u=St.prototype,u.parseComplex=function(t,e,i,r,s,n){var a,o,h,l,u,c,p=this.keyword;if(this.multi&&(F.test(i)||F.test(e)?(o=e.replace(F,"|").split("|"),h=i.replace(F,"|").split("|")):p&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;a<l;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,p&&(u=e.indexOf(p),c=i.indexOf(p),u!==c&&(c===-1?o[a]=o[a].split(p).join(""):u===-1&&(o[a]+=" "+p)));e=o.join(", "),i=h.join(", ")}return Tt(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,s,n)},u.parse=function(t,e,i,r,n,a,o){return this.parseComplex(t.style,this.format(tt(t,this.p,s,!1,this.dflt)),this.format(e),n,a)},o.registerSpecialProp=function(t,e,i){Ct(t,{parser:function(t,r,s,n,a,o,h){var l=new _t(t,s,0,0,a,2,s,(!1),i);return l.plugin=o,l.setRatio=e(t,r,n._tween,s),l},priority:i})},o.useSVGTransformAttr=!0;var Rt,Et="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Pt=$("transform"),Mt=Q+"transform",Lt=$("transformOrigin"),Ot=null!==$("perspective"),Bt=X.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=!(o.defaultForce3D===!1||!Ot)&&(o.defaultForce3D||"auto")},Dt=a.SVGElement,Ft=function(t,e,i){var r,s=j.createElementNS("http://www.w3.org/2000/svg",t),n=/([a-z])([A-Z])/g;for(r in i)s.setAttributeNS(null,r.replace(n,"$1-$2").toLowerCase(),i[r]);return e.appendChild(s),s},It=j.documentElement||{},kt=function(){var t,e,i,r=g||/Android/i.test(Y)&&!a.chrome;return j.createElementNS&&!r&&(t=Ft("svg",It),e=Ft("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[Lt]="50% 50%",e.style[Pt]="scaleX(0.5)",r=i===e.getBoundingClientRect().width&&!(f&&Ot),It.removeChild(t)),r}(),Ut=function(t,e,i,r,s,n){var a,h,l,u,c,p,d,f,m,g,v,y,x,_,b=t._gsTransform,T=Wt(t,!0);b&&(x=b.xOrigin,_=b.yOrigin),(!r||(a=r.split(" ")).length<2)&&(d=t.getBBox(),0===d.x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),e=ht(e).split(" "),a=[(e[0].indexOf("%")!==-1?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(e[1].indexOf("%")!==-1?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),i.xOrigin=u=parseFloat(a[0]),i.yOrigin=c=parseFloat(a[1]),r&&T!==Vt&&(p=T[0],d=T[1],f=T[2],m=T[3],g=T[4],v=T[5],y=p*m-d*f,y&&(h=u*(m/y)+c*(-f/y)+(f*v-m*g)/y,l=u*(-d/y)+c*(p/y)-(p*v-d*g)/y,u=i.xOrigin=a[0]=h,c=i.yOrigin=a[1]=l)),b&&(n&&(i.xOffset=b.xOffset,i.yOffset=b.yOffset,b=i),s||s!==!1&&o.defaultSmoothOrigin!==!1?(h=u-x,l=c-_,b.xOffset+=h*T[0]+l*T[2]-h,b.yOffset+=h*T[1]+l*T[3]-l):b.xOffset=b.yOffset=0),n||t.setAttribute("data-svg-origin",a.join(" "))},Gt=function(t){var e,i=V("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,n=this.style.cssText;if(It.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Gt}catch(a){}else this._originalGetBBox&&(e=this._originalGetBBox());return s?r.insertBefore(this,s):r.appendChild(this),It.removeChild(i),this.style.cssText=n,e},Nt=function(t){try{return t.getBBox()}catch(e){return Gt.call(t,!0)}},jt=function(t){return!(!(Dt&&t.getCTM&&Nt(t))||t.parentNode&&!t.ownerSVGElement)},Vt=[1,0,0,1,0,0],Wt=function(t,e){var i,r,s,n,a,o,h=t._gsTransform||new Bt,l=1e5,u=t.style;if(Pt?r=tt(t,Mt,null,!0):t.currentStyle&&(r=t.currentStyle.filter.match(B),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),h.x||0,h.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,i&&Pt&&((o="none"===J(t).display)||!t.parentNode)&&(o&&(n=u.display,u.display="block"),t.parentNode||(a=1,It.appendChild(t)),r=tt(t,Mt,null,!0),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,n?u.display=n:o&&qt(u,"display"),a&&It.removeChild(t)),(h.svg||t.getCTM&&jt(t))&&(i&&(u[Pt]+"").indexOf("matrix")!==-1&&(r=u[Pt],i=0),s=t.getAttribute("transform"),i&&s&&(s.indexOf("matrix")!==-1?(r=s,i=0):s.indexOf("translate")!==-1&&(r="matrix(1,0,0,1,"+s.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Vt;for(s=(r||"").match(x)||[],wt=s.length;--wt>-1;)n=Number(s[wt]),s[wt]=(a=n-(n|=0))?(a*l+(a<0?-.5:.5)|0)/l+n:n;return e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s},zt=X.getTransform=function(t,i,r,s){if(t._gsTransform&&r&&!s)return t._gsTransform;var n,a,h,l,u,c,p=r?t._gsTransform||new Bt:new Bt,d=p.scaleX<0,f=2e-5,m=1e5,g=Ot?parseFloat(tt(t,Lt,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,v=parseFloat(o.defaultTransformPerspective)||0;if(p.svg=!(!t.getCTM||!jt(t)),p.svg&&(Ut(t,tt(t,Lt,i,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),Rt=o.useSVGTransformAttr||kt),n=Wt(t),n!==Vt){if(16===n.length){var y,x,_,b,T,w=n[0],S=n[1],C=n[2],A=n[3],R=n[4],E=n[5],P=n[6],M=n[7],L=n[8],O=n[9],B=n[10],D=n[12],F=n[13],I=n[14],k=n[11],G=Math.atan2(P,B);p.zOrigin&&(I=-p.zOrigin,D=L*I-n[12],F=O*I-n[13],I=B*I+p.zOrigin-n[14]),p.rotationX=G*U,G&&(b=Math.cos(-G),T=Math.sin(-G),y=R*b+L*T,x=E*b+O*T,_=P*b+B*T,L=R*-T+L*b,O=E*-T+O*b,B=P*-T+B*b,k=M*-T+k*b,R=y,E=x,P=_),G=Math.atan2(-C,B),p.rotationY=G*U,G&&(b=Math.cos(-G),T=Math.sin(-G),y=w*b-L*T,x=S*b-O*T,_=C*b-B*T,O=S*T+O*b,B=C*T+B*b,k=A*T+k*b,w=y,S=x,C=_),G=Math.atan2(S,w),p.rotation=G*U,G&&(b=Math.cos(-G),T=Math.sin(-G),w=w*b+R*T,x=S*b+E*T,E=S*-T+E*b,P=C*-T+P*b,S=x),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),p.scaleX=(Math.sqrt(w*w+S*S)*m+.5|0)/m,p.scaleY=(Math.sqrt(E*E+O*O)*m+.5|0)/m,p.scaleZ=(Math.sqrt(P*P+B*B)*m+.5|0)/m,p.rotationX||p.rotationY?p.skewX=0:(p.skewX=R||E?Math.atan2(R,E)*U+p.rotation:p.skewX||0,Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(d?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180))),p.perspective=k?1/(k<0?-k:k):0,p.x=D,p.y=F,p.z=I,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*w-p.yOrigin*R),p.y-=p.yOrigin-(p.yOrigin*S-p.xOrigin*E))}else if(!Ot||s||!n.length||p.x!==n[4]||p.y!==n[5]||!p.rotationX&&!p.rotationY){var N=n.length>=6,j=N?n[0]:1,V=n[1]||0,W=n[2]||0,z=N?n[3]:1;p.x=n[4]||0,p.y=n[5]||0,h=Math.sqrt(j*j+V*V),l=Math.sqrt(z*z+W*W),u=j||V?Math.atan2(V,j)*U:p.rotation||0,c=W||z?Math.atan2(W,z)*U+u:p.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(d?(h*=-1,c+=u<=0?180:-180,u+=u<=0?180:-180):(l*=-1,c+=c<=0?180:-180)),p.scaleX=h,p.scaleY=l,p.rotation=u,p.skewX=c,Ot&&(p.rotationX=p.rotationY=p.z=0,p.perspective=v,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*j+p.yOrigin*W),p.y-=p.yOrigin-(p.xOrigin*V+p.yOrigin*z))}p.zOrigin=g;for(a in p)p[a]<f&&p[a]>-f&&(p[a]=0)}return r&&(t._gsTransform=p,p.svg&&(Rt&&t.style[Pt]?e.delayedCall(.001,function(){qt(t.style,Pt)}):!Rt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Xt=function(t){var e,i,r=this.data,s=-r.rotation*k,n=s+r.skewX*k,a=1e5,o=(Math.cos(s)*r.scaleX*a|0)/a,h=(Math.sin(s)*r.scaleX*a|0)/a,l=(Math.sin(n)*-r.scaleY*a|0)/a,u=(Math.cos(n)*r.scaleY*a|0)/a,c=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,c.filter="";var d,f,m=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==p.position,x="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+u,_=r.x+m*r.xPercent/100,b=r.y+v*r.yPercent/100;if(null!=r.ox&&(d=(r.oxp?m*r.ox*.01:r.ox)-m/2,f=(r.oyp?v*r.oy*.01:r.oy)-v/2,_+=d-(d*o+f*h),b+=f-(d*l+f*u)),y?(d=m/2,f=v/2,x+=", Dx="+(d-(d*o+f*h)+_)+", Dy="+(f-(d*l+f*u)+b)+")"):x+=", sizingMethod='auto expand')",e.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?c.filter=e.replace(D,x):c.filter=x+" "+e,0!==t&&1!==t||1===o&&0===h&&0===l&&1===u&&(y&&x.indexOf("Dx=0, Dy=0")===-1||S.test(e)&&100!==parseFloat(RegExp.$1)||e.indexOf(e.indexOf("Alpha"))===-1&&c.removeAttribute("filter")),!y){var T,C,A,R=g<8?1:-1;for(d=r.ieOffsetX||0,f=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((o<0?-o:o)*m+(h<0?-h:h)*v))/2+_),r.ieOffsetY=Math.round((v-((u<0?-u:u)*v+(l<0?-l:l)*m))/2+b),wt=0;wt<4;wt++)C=at[wt],T=p[C],i=T.indexOf("px")!==-1?parseFloat(T):et(this.t,C,parseFloat(T),T.replace(w,""))||0,A=i!==r[C]?wt<2?-r.ieOffsetX:-r.ieOffsetY:wt<2?d-r.ieOffsetX:f-r.ieOffsetY,c[C]=(r[C]=Math.round(i-A*(0===wt||2===wt?1:R)))+"px"}}},Yt=X.set3DTransformRatio=X.setTransformRatio=function(t){var e,i,r,s,n,a,o,h,l,u,c,p,d,m,g,v,y,x,_,b,T,w,S,C=this.data,A=this.t.style,R=C.rotation,E=C.rotationX,P=C.rotationY,M=C.scaleX,L=C.scaleY,O=C.scaleZ,B=C.x,D=C.y,F=C.z,I=C.svg,U=C.perspective,G=C.force3D,N=C.skewY,j=C.skewX;if(N&&(j+=N,R+=N),((1===t||0===t)&&"auto"===G&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!G)&&!F&&!U&&!P&&!E&&1===O||Rt&&I||!Ot)return void(R||j||I?(R*=k,w=j*k,S=1e5,i=Math.cos(R)*M,n=Math.sin(R)*M,r=Math.sin(R-w)*-L,a=Math.cos(R-w)*L,w&&"simple"===C.skewType&&(e=Math.tan(w-N*k),e=Math.sqrt(1+e*e),r*=e,a*=e,N&&(e=Math.tan(N*k),e=Math.sqrt(1+e*e),i*=e,n*=e)),I&&(B+=C.xOrigin-(C.xOrigin*i+C.yOrigin*r)+C.xOffset,D+=C.yOrigin-(C.xOrigin*n+C.yOrigin*a)+C.yOffset,Rt&&(C.xPercent||C.yPercent)&&(g=this.t.getBBox(),B+=.01*C.xPercent*g.width,D+=.01*C.yPercent*g.height),g=1e-6,B<g&&B>-g&&(B=0),D<g&&D>-g&&(D=0)),_=(i*S|0)/S+","+(n*S|0)/S+","+(r*S|0)/S+","+(a*S|0)/S+","+B+","+D+")",I&&Rt?this.t.setAttribute("transform","matrix("+_):A[Pt]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix(":"matrix(")+_):A[Pt]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix(":"matrix(")+M+",0,0,"+L+","+B+","+D+")");if(f&&(g=1e-4,M<g&&M>-g&&(M=O=2e-5),L<g&&L>-g&&(L=O=2e-5),!U||C.z||C.rotationX||C.rotationY||(U=0)),R||j)R*=k,v=i=Math.cos(R),y=n=Math.sin(R),j&&(R-=j*k,v=Math.cos(R),y=Math.sin(R),"simple"===C.skewType&&(e=Math.tan((j-N)*k),e=Math.sqrt(1+e*e),v*=e,y*=e,C.skewY&&(e=Math.tan(N*k),e=Math.sqrt(1+e*e),i*=e,n*=e))),r=-y,a=v;else{if(!(P||E||1!==O||U||I))return void(A[Pt]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) translate3d(":"translate3d(")+B+"px,"+D+"px,"+F+"px)"+(1!==M||1!==L?" scale("+M+","+L+")":""));i=a=1,r=n=0}u=1,s=o=h=l=c=p=0,d=U?-1/U:0,m=C.zOrigin,g=1e-6,b=",",T="0",R=P*k,R&&(v=Math.cos(R),y=Math.sin(R),h=-y,c=d*-y,s=i*y,o=n*y,u=v,d*=v,i*=v,n*=v),R=E*k,R&&(v=Math.cos(R),y=Math.sin(R),e=r*v+s*y,x=a*v+o*y,l=u*y,p=d*y,s=r*-y+s*v,o=a*-y+o*v,u*=v,d*=v,r=e,a=x),1!==O&&(s*=O,o*=O,u*=O,d*=O),1!==L&&(r*=L,a*=L,l*=L,p*=L),1!==M&&(i*=M,n*=M,h*=M,c*=M),(m||I)&&(m&&(B+=s*-m,D+=o*-m,F+=u*-m+m),I&&(B+=C.xOrigin-(C.xOrigin*i+C.yOrigin*r)+C.xOffset,D+=C.yOrigin-(C.xOrigin*n+C.yOrigin*a)+C.yOffset),B<g&&B>-g&&(B=T),D<g&&D>-g&&(D=T),F<g&&F>-g&&(F=0)),_=C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix3d(":"matrix3d(",_+=(i<g&&i>-g?T:i)+b+(n<g&&n>-g?T:n)+b+(h<g&&h>-g?T:h),_+=b+(c<g&&c>-g?T:c)+b+(r<g&&r>-g?T:r)+b+(a<g&&a>-g?T:a),E||P||1!==O?(_+=b+(l<g&&l>-g?T:l)+b+(p<g&&p>-g?T:p)+b+(s<g&&s>-g?T:s),_+=b+(o<g&&o>-g?T:o)+b+(u<g&&u>-g?T:u)+b+(d<g&&d>-g?T:d)+b):_+=",0,0,0,0,1,0,",_+=B+b+D+b+F+b+(U?1+-F/U:1)+")",A[Pt]=_};u=Bt.prototype,u.x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=u.xOffset=u.yOffset=0,u.scaleX=u.scaleY=u.scaleZ=1,Ct("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,r,n,a,h){if(r._lastParsedTransform===h)return n;r._lastParsedTransform=h;var l,u=h.scale&&"function"==typeof h.scale?h.scale:0;"function"==typeof h[i]&&(l=h[i],h[i]=e),u&&(h.scale=u(y,t));var c,p,d,f,m,g,x,_,b,T=t._gsTransform,w=t.style,S=1e-6,C=Et.length,A=h,R={},E="transformOrigin",P=zt(t,s,!0,A.parseTransform),M=A.transform&&("function"==typeof A.transform?A.transform(y,v):A.transform);if(r._transform=P,M&&"string"==typeof M&&Pt)p=W.style,p[Pt]=M,p.display="block",p.position="absolute",j.body.appendChild(W),c=zt(W,null,!1),P.svg&&(g=P.xOrigin,x=P.yOrigin,c.x-=P.xOffset,c.y-=P.yOffset,(A.transformOrigin||A.svgOrigin)&&(M={},Ut(t,ht(A.transformOrigin),M,A.svgOrigin,A.smoothOrigin,!0),g=M.xOrigin,x=M.yOrigin,c.x-=M.xOffset-P.xOffset,c.y-=M.yOffset-P.yOffset),(g||x)&&(_=Wt(W,!0),c.x-=g-(g*_[0]+x*_[2]),c.y-=x-(g*_[1]+x*_[3]))),j.body.removeChild(W),c.perspective||(c.perspective=P.perspective),null!=A.xPercent&&(c.xPercent=ut(A.xPercent,P.xPercent)),null!=A.yPercent&&(c.yPercent=ut(A.yPercent,P.yPercent));else if("object"==typeof A){if(c={scaleX:ut(null!=A.scaleX?A.scaleX:A.scale,P.scaleX),scaleY:ut(null!=A.scaleY?A.scaleY:A.scale,P.scaleY),scaleZ:ut(A.scaleZ,P.scaleZ),x:ut(A.x,P.x),y:ut(A.y,P.y),z:ut(A.z,P.z),xPercent:ut(A.xPercent,P.xPercent),yPercent:ut(A.yPercent,P.yPercent),perspective:ut(A.transformPerspective,P.perspective)},m=A.directionalRotation,null!=m)if("object"==typeof m)for(p in m)A[p]=m[p];else A.rotation=m;"string"==typeof A.x&&A.x.indexOf("%")!==-1&&(c.x=0,c.xPercent=ut(A.x,P.xPercent)),"string"==typeof A.y&&A.y.indexOf("%")!==-1&&(c.y=0,c.yPercent=ut(A.y,P.yPercent)),c.rotation=ct("rotation"in A?A.rotation:"shortRotation"in A?A.shortRotation+"_short":"rotationZ"in A?A.rotationZ:P.rotation,P.rotation,"rotation",R),Ot&&(c.rotationX=ct("rotationX"in A?A.rotationX:"shortRotationX"in A?A.shortRotationX+"_short":P.rotationX||0,P.rotationX,"rotationX",R),c.rotationY=ct("rotationY"in A?A.rotationY:"shortRotationY"in A?A.shortRotationY+"_short":P.rotationY||0,P.rotationY,"rotationY",R)),c.skewX=ct(A.skewX,P.skewX),c.skewY=ct(A.skewY,P.skewY)}for(Ot&&null!=A.force3D&&(P.force3D=A.force3D,f=!0),P.skewType=A.skewType||P.skewType||o.defaultSkewType,d=P.force3D||P.z||P.rotationX||P.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,d||null==A.scale||(c.scaleZ=1);--C>-1;)b=Et[C],M=c[b]-P[b],(M>S||M<-S||null!=A[b]||null!=G[b])&&(f=!0,n=new _t(P,b,P[b],M,n),b in R&&(n.e=R[b]),n.xs0=0,n.plugin=a,r._overwriteProps.push(n.n));return M=A.transformOrigin,P.svg&&(M||A.svgOrigin)&&(g=P.xOffset,x=P.yOffset,Ut(t,ht(M),c,A.svgOrigin,A.smoothOrigin),n=bt(P,"xOrigin",(T?P:c).xOrigin,c.xOrigin,n,E),n=bt(P,"yOrigin",(T?P:c).yOrigin,c.yOrigin,n,E),g===P.xOffset&&x===P.yOffset||(n=bt(P,"xOffset",T?g:P.xOffset,P.xOffset,n,E),n=bt(P,"yOffset",T?x:P.yOffset,P.yOffset,n,E)),M="0px 0px"),(M||Ot&&d&&P.zOrigin)&&(Pt?(f=!0,b=Lt,M=(M||tt(t,b,s,!1,"50% 50%"))+"",n=new _t(w,b,0,0,n,(-1),E),n.b=w[b],n.plugin=a,Ot?(p=P.zOrigin,M=M.split(" "),P.zOrigin=(M.length>2&&(0===p||"0px"!==M[2])?parseFloat(M[2]):p)||0,n.xs0=n.e=M[0]+" "+(M[1]||"50%")+" 0px",n=new _t(P,"zOrigin",0,0,n,(-1),n.n),n.b=p,n.xs0=n.e=P.zOrigin):n.xs0=n.e=M):ht(M+"",P)),f&&(r._transformType=P.svg&&Rt||!d&&3!==this._transformType?2:3),l&&(h[i]=l),u&&(h.scale=u),n},prefix:!0}),Ct("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Ct("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a,o){e=this.format(e);var h,l,u,c,p,d,f,m,g,v,y,x,_,b,T,w,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],C=t.style;for(g=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),h=e.split(" "),l=0;l<S.length;l++)this.p.indexOf("border")&&(S[l]=$(S[l])),p=c=tt(t,S[l],s,!1,"0px"),p.indexOf(" ")!==-1&&(c=p.split(" "),p=c[0],c=c[1]),d=u=h[l],f=parseFloat(p),x=p.substr((f+"").length),_="="===d.charAt(1),_?(m=parseInt(d.charAt(0)+"1",10),d=d.substr(2),m*=parseFloat(d),y=d.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(d),y=d.substr((m+"").length)),""===y&&(y=r[i]||x),y!==x&&(b=et(t,"borderLeft",f,x),T=et(t,"borderTop",f,x),"%"===y?(p=b/g*100+"%",c=T/v*100+"%"):"em"===y?(w=et(t,"borderLeft",1,"em"),p=b/w+"em",c=T/w+"em"):(p=b+"px",c=T+"px"),_&&(d=parseFloat(p)+m+y,u=parseFloat(c)+m+y)),a=Tt(C,S[l],p+" "+c,d+" "+u,!1,"0px",a);return a},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),Ct("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,r,n,a){return Tt(t.style,i,this.format(tt(t,i,s,!1,"0px 0px")),this.format(e),!1,"0px",n)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),Ct("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,n,a){var o,h,l,u,c,p,d="background-position",f=s||J(t,null),m=this.format((f?g?f.getPropertyValue(d+"-x")+" "+f.getPropertyValue(d+"-y"):f.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(m.indexOf("%")!==-1!=(v.indexOf("%")!==-1)&&v.split(",").length<2&&(p=tt(t,"backgroundImage").replace(M,""),p&&"none"!==p)){for(o=m.split(" "),h=v.split(" "),z.setAttribute("src",p),l=2;--l>-1;)m=o[l],u=m.indexOf("%")!==-1,u!==(h[l].indexOf("%")!==-1)&&(c=0===l?t.offsetWidth-z.width:t.offsetHeight-z.height,o[l]=u?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=o.join(" ")}return this.parseComplex(t.style,m,v,n,a)},formatter:ht}),Ct("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",ht(t.indexOf(" ")===-1?t+" "+t:t)}}),Ct("perspective",{defaultValue:"0px",prefix:!0}),Ct("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Ct("transformStyle",{prefix:!0}),Ct("backfaceVisibility",{prefix:!0}),Ct("userSelect",{prefix:!0}),Ct("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),Ct("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Ct("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,n,a){var o,h,l;return g<9?(h=t.currentStyle,l=g<8?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(tt(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),Ct("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Ct("autoRound,strictUnits",{parser:function(t,e,i,r,s){return s}}),Ct("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,n,a){var o=tt(t,"borderTopWidth",s,!1,"0px"),h=this.format(e).split(" "),l=h[0].replace(w,"");return"px"!==l&&(o=parseFloat(o)/et(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(o+" "+tt(t,"borderTopStyle",s,!1,"solid")+" "+tt(t,"borderTopColor",s,!1,"#000")),h.join(" "),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),Ct("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Ct("float,cssFloat,styleFloat",{parser:function(t,e,i,r,s,n){var a=t.style,o="cssFloat"in a?"cssFloat":"styleFloat";return new _t(a,o,0,0,s,(-1),i,(!1),0,a[o],e)}});var Ht=function(t){var e,i=this.t,r=i.filter||tt(this.data,"filter")||"",s=this.s+this.c*t|0;
100===s&&(r.indexOf("atrix(")===-1&&r.indexOf("radient(")===-1&&r.indexOf("oader(")===-1?(i.removeAttribute("filter"),e=!tt(this.data,"filter")):(i.filter=r.replace(A,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+s+")"),r.indexOf("pacity")===-1?0===s&&this.xn1||(i.filter=r+" alpha(opacity="+s+")"):i.filter=r.replace(S,"opacity="+s))};Ct("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,n,a){var o=parseFloat(tt(t,"opacity",s,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===tt(t,"visibility",s)&&0!==e&&(o=0),H?n=new _t(h,"opacity",o,e-o,n):(n=new _t(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Ht),l&&(n=new _t(h,"visibility",0,0,n,(-1),null,(!1),0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var qt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(E,"-$1").toLowerCase())):t.removeAttribute(e))},Zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:qt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Ct("className",{parser:function(t,e,r,n,a,o,h){var l,u,c,p,d,f=t.getAttribute("class")||"",m=t.style.cssText;if(a=n._classNamePT=new _t(t,r,0,0,a,2),a.setRatio=Zt,a.pr=-11,i=!0,a.b=f,u=rt(t,s),c=t._gsClassPT){for(p={},d=c.data;d;)p[d.p]=1,d=d._next;c.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",a.e),l=st(t,u,rt(t),h,p),t.setAttribute("class",f),a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)}});var Qt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,s,n,a=this.t.style,o=l.transform.parse;if("all"===this.e)a.cssText="",s=!0;else for(e=this.e.split(" ").join("").split(","),r=e.length;--r>-1;)i=e[r],l[i]&&(l[i].parse===o?s=!0:i="transformOrigin"===i?Lt:l[i].p),qt(a,i);s&&(qt(a,Pt),n=this.t._gsTransform,n&&(n.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Ct("clearProps",{parser:function(t,e,r,s,n){return n=new _t(t,r,0,0,n,2),n.setRatio=Qt,n.e=e,n.pr=-10,n.data=s._tween,i=!0,n}}),u="bezier,throwProps,physicsProps,physics2D".split(","),wt=u.length;wt--;)At(u[wt]);u=o.prototype,u._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(t,e,a,h){if(!t.nodeType)return!1;this._target=v=t,this._tween=a,this._vars=e,y=h,c=e.autoRound,i=!1,r=e.suffixMap||o.suffixMap,s=J(t,""),n=this._overwriteProps;var u,f,g,x,_,b,T,w,S,A=t.style;if(p&&""===A.zIndex&&(u=tt(t,"zIndex",s),"auto"!==u&&""!==u||this._addLazySet(A,"zIndex",0)),"string"==typeof e&&(x=A.cssText,u=rt(t,s),A.cssText=x+";"+e,u=st(t,u,rt(t)).difs,!H&&C.test(e)&&(u.opacity=parseFloat(RegExp.$1)),e=u,A.cssText=x),e.className?this._firstPT=f=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=f=this.parse(t,e,null),this._transformType){for(S=3===this._transformType,Pt?d&&(p=!0,""===A.zIndex&&(T=tt(t,"zIndex",s),"auto"!==T&&""!==T||this._addLazySet(A,"zIndex",0)),m&&this._addLazySet(A,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(S?"visible":"hidden"))):A.zoom=1,g=f;g&&g._next;)g=g._next;w=new _t(t,"transform",0,0,null,2),this._linkCSSP(w,null,g),w.setRatio=Pt?Yt:Xt,w.data=this._transform||zt(t,s,!0),w.tween=a,w.pr=-1,n.pop()}if(i){for(;f;){for(b=f._next,g=x;g&&g.pr>f.pr;)g=g._next;(f._prev=g?g._prev:_)?f._prev._next=f:x=f,(f._next=g)?g._prev=f:_=f,f=b}this._firstPT=x}return!0},u.parse=function(t,e,i,n){var a,o,h,u,p,d,f,m,g,x,_=t.style;for(a in e)d=e[a],"function"==typeof d&&(d=d(y,v)),o=l[a],o?i=o.parse(t,d,a,this,i,n,e):(p=tt(t,a,s)+"",g="string"==typeof d,"color"===a||"fill"===a||"stroke"===a||a.indexOf("Color")!==-1||g&&R.test(d)?(g||(d=ft(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),i=Tt(_,a,p,d,!0,"transparent",i,0,n)):g&&I.test(d)?i=Tt(_,a,p,d,!0,null,i,0,n):(h=parseFloat(p),f=h||0===h?p.substr((h+"").length):"",""!==p&&"auto"!==p||("width"===a||"height"===a?(h=ot(t,a,s),f="px"):"left"===a||"top"===a?(h=it(t,a,s),f="px"):(h="opacity"!==a?0:1,f="")),x=g&&"="===d.charAt(1),x?(u=parseInt(d.charAt(0)+"1",10),d=d.substr(2),u*=parseFloat(d),m=d.replace(w,"")):(u=parseFloat(d),m=g?d.replace(w,""):""),""===m&&(m=a in r?r[a]:f),d=u||0===u?(x?u+h:u)+m:e[a],f!==m&&""!==m&&(u||0===u)&&h&&(h=et(t,a,h,f),"%"===m?(h/=et(t,a,100,"%")/100,e.strictUnits!==!0&&(p=h+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?h/=et(t,a,1,m):"px"!==m&&(u=et(t,a,u,m),m="px"),x&&(u||0===u)&&(d=u+h+m)),x&&(u+=h),!h&&0!==h||!u&&0!==u?void 0!==_[a]&&(d||d+""!="NaN"&&null!=d)?(i=new _t(_,a,u||h||0,0,i,(-1),a,(!1),0,p,d),i.xs0="none"!==d||"display"!==a&&a.indexOf("Style")===-1?d:p):Z("invalid "+a+" tween value: "+e[a]):(i=new _t(_,a,h,u-h,i,0,a,c!==!1&&("px"===m||"zIndex"===a),0,p,d),i.xs0=m))),n&&i&&!i.plugin&&(i.plugin=n);return i},u.setRatio=function(t){var e,i,r,s=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;s;){if(e=s.c*t+s.s,s.r?e=Math.round(e):e<n&&e>-n&&(e=0),s.type)if(1===s.type)if(r=s.l,2===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2;else if(3===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3;else if(4===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4;else if(5===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4+s.xn4+s.xs5;else{for(i=s.xs0+e+s.xs1,r=1;r<s.l;r++)i+=s["xn"+r]+s["xs"+(r+1)];s.t[s.p]=i}else s.type===-1?s.t[s.p]=s.xs0:s.setRatio&&s.setRatio(t);else s.t[s.p]=e+s.xs0;s=s._next}else for(;s;)2!==s.type?s.t[s.p]=s.b:s.setRatio(t),s=s._next;else for(;s;){if(2!==s.type)if(s.r&&s.type!==-1)if(e=Math.round(s.s+s.c),s.type){if(1===s.type){for(r=s.l,i=s.xs0+e+s.xs1,r=1;r<s.l;r++)i+=s["xn"+r]+s["xs"+(r+1)];s.t[s.p]=i}}else s.t[s.p]=e+s.xs0;else s.t[s.p]=s.e;else s.setRatio(t);s=s._next}},u._enableTransforms=function(t){this._transform=this._transform||zt(this._target,s,!0),this._transformType=this._transform.svg&&Rt||!t&&3!==this._transformType?2:3};var Kt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(t,e,i){var r=this._firstPT=new _t(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=Kt,r.data=this},u._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},u._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},u._kill=function(e){var i,r,s,n=e;if(e.autoAlpha||e.alpha){n={};for(r in e)n[r]=e[r];n.opacity=1,n.autoAlpha&&(n.visibility=1)}for(e.className&&(i=this._classNamePT)&&(s=i.xfirst,s&&s._prev?this._linkCSSP(s._prev,i._next,s._prev._prev):s===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,s._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==r&&i.plugin._kill&&(i.plugin._kill(e),r=i.plugin),i=i._next;return t.prototype._kill.call(this,n)};var $t=function(t,e,i){var r,s,n,a;if(t.slice)for(s=t.length;--s>-1;)$t(t[s],e,i);else for(r=t.childNodes,s=r.length;--s>-1;)n=r[s],a=n.type,n.style&&(e.push(rt(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||$t(n,e,i)};return o.cascadeTo=function(t,i,r){var s,n,a,o,h=e.to(t,i,r),l=[h],u=[],c=[],p=[],d=e._internals.reservedProps;for(t=h._targets||h.target,$t(t,u,p),h.render(i,!0,!0),$t(t,c),h.render(0,!0,!0),h._enabled(!0),s=p.length;--s>-1;)if(n=st(p[s],u[s],c[s]),n.firstMPT){n=n.difs;for(a in r)d[a]&&(n[a]=r[a]);o={};for(a in n)o[a]=u[s][a];l.push(e.fromTo(p[s],i,o,n))}return l},t.activate([o]),o},!0),function(){var t=a._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},i=t.prototype;i._onInitAllProps=function(){for(var t,i,r,s=this._tween,n=s.vars.roundProps.join?s.vars.roundProps:s.vars.roundProps.split(","),a=n.length,o={},h=s._propLookup.roundProps;--a>-1;)o[n[a]]=Math.round;for(a=n.length;--a>-1;)for(t=n[a],i=s._firstPT;i;)r=i._next,i.pg?i.t._mod(o):i.n===t&&(2===i.f&&i.t?e(i.t._firstPT):(this._add(i.t,t,i.s,i.c),r&&(r._prev=i._prev),i._prev?i._prev._next=r:s._firstPT===i&&(s._firstPT=r),i._next=i._prev=null,s._propLookup[t]=h)),i=r;return!1},i._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,Math.round),this._overwriteProps.push(e)}}(),function(){a._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,i,r){var s,n;if("function"!=typeof t.setAttribute)return!1;for(s in e)n=e[s],"function"==typeof n&&(n=n(r,t)),this._addTween(t,"setAttribute",t.getAttribute(s)+"",n+"",s,!1,s),this._overwriteProps.push(s);return!0}})}(),a._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,i,r){"object"!=typeof e&&(e={rotation:e}),this.finals={};var s,n,a,o,h,l,u=e.useRadians===!0?2*Math.PI:360,c=1e-6;for(s in e)"useRadians"!==s&&(o=e[s],"function"==typeof o&&(o=o(r,t)),l=(o+"").split("_"),n=l[0],a=parseFloat("function"!=typeof t[s]?t[s]:t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]()),o=this.finals[s]="string"==typeof n&&"="===n.charAt(1)?a+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0,h=o-a,l.length&&(n=l.join("_"),n.indexOf("short")!==-1&&(h%=u,h!==h%(u/2)&&(h=h<0?h+u:h-u)),n.indexOf("_cw")!==-1&&h<0?h=(h+9999999999*u)%u-(h/u|0)*u:n.indexOf("ccw")!==-1&&h>0&&(h=(h-9999999999*u)%u-(h/u|0)*u)),(h>c||h<-c)&&(this._addTween(t,s,a,a+h,s),this._overwriteProps.push(s)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,a._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,r,s=a.GreenSockGlobals||a,n=s.com.greensock,o=2*Math.PI,h=Math.PI/2,l=n._class,u=function(e,i){var r=l("easing."+e,function(){},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,r},c=t.register||function(){},p=function(t,e,i,r,s){var n=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return c(n,t),n},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var r=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t){return new r(t)},r},m=p("Back",f("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),f("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),f("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),v=g.prototype=new t;return v.constructor=g,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),v.config=g.config=function(t,e,i){return new g(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),v=e.prototype=new t,v.constructor=e,v.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},v.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var i,r,s,n,a,o,h=e.taper||"none",l=[],u=0,c=0|(e.points||20),p=c,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/c*p,r=g?g.getRatio(i):i,"none"===h?s=v:"out"===h?(n=1-i,s=n*n*v):"in"===h?s=i*i*v:i<.5?(n=2*i,s=n*n*.5*v):(n=2*(1-i),s=n*n*.5*v),f?r+=Math.random()*s-.5*s:p%2?r+=.5*s:r-=.5*s,m&&(r>1?r=1:r<0&&(r=0)),l[u++]={x:i,y:r};for(l.sort(function(t,e){return t.x-e.x}),o=new d(1,1,null),p=c;--p>-1;)a=l[p],o=new d(a.x,a.y,o);this._prev=new d(0,0,0!==o.t?o:o.next)},!0),v=i.prototype=new t,v.constructor=i,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new i(t)},i.ease=new i,p("Bounce",u("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),u("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),u("BounceInOut",function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t=t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),p("Circ",u("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),u("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),u("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,r){var s=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||r)/(t<1?t:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),n=s.prototype=new t;return n.constructor=s,n.getRatio=i,n.config=function(t,e){return new s(t,e)},s},p("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),r("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),p("Expo",u("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),u("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),u("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),p("Sine",u("SineOut",function(t){return Math.sin(t*h)}),u("SineIn",function(t){return-Math.cos(t*h)+1}),u("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(s.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),m},!0)}),a._gsDefine&&a._gsQueue.pop()(),function(n,a){"use strict";var o={},h=n.document,l=n.GreenSockGlobals=n.GreenSockGlobals||n;if(!l.TweenLite){var u,c,p,d,f,m=function(t){var e,i=t.split("."),r=l;for(e=0;e<i.length;e++)r[i[e]]=r=r[i[e]]||{};return r},g=m("com.greensock"),v=1e-10,y=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},x=function(){},_=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),b={},T=function(n,h,u,c){this.sc=b[n]?b[n].sc:[],b[n]=this,this.gsClass=null,this.func=u;var p=[];this.check=function(d){for(var f,g,v,y,x,_=h.length,w=_;--_>-1;)(f=b[h[_]]||new T(h[_],[])).gsClass?(p[_]=f.gsClass,w--):d&&f.sc.push(this);if(0===w&&u){if(g=("com.greensock."+n).split("."),v=g.pop(),y=m(g.join("."))[v]=this.gsClass=u.apply(u,p),c)if(l[v]=o[v]=y,x="undefined"!=typeof t&&t.exports,!x&&i(57))r=[],s=function(){return y}.apply(e,r),!(void 0!==s&&(t.exports=s));else if(x)if(n===a){t.exports=o[a]=y;for(_ in o)y[_]=o[_]}else o[a]&&(o[a][v]=y);for(_=0;_<this.sc.length;_++)this.sc[_].check()}},this.check(!0)},w=n._gsDefine=function(t,e,i,r){return new T(t,e,i,r)},S=g._class=function(t,e,i){return e=e||function(){},w(t,[],function(){return e},i),e};w.globals=l;var C=[0,0,1,1],A=S("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?C.concat(e):C},!0),R=A.map={},E=A.register=function(t,e,i,r){for(var s,n,a,o,h=e.split(","),l=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(n=h[l],s=r?S("easing."+n,null,!0):g.easing[n]||{},a=u.length;--a>-1;)o=u[a],R[n+"."+o]=R[o+n]=s[o]=t.getRatio?t:t[o]||new t};for(p=A.prototype,p._calcEnd=!1,p.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:t<.5?r/2:1-r/2},u=["Linear","Quad","Cubic","Quart","Quint,Strong"],c=u.length;--c>-1;)p=u[c]+",Power"+c,E(new A(null,null,1,c),p,"easeOut",!0),E(new A(null,null,2,c),p,"easeIn"+(0===c?",easeNone":"")),E(new A(null,null,3,c),p,"easeInOut");R.linear=g.easing.Linear.easeIn,R.swing=g.easing.Quad.easeInOut;var P=S("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});p=P.prototype,p.addEventListener=function(t,e,i,r,s){s=s||0;var n,a,o=this._listeners[t],h=0;for(this!==d||f||d.wake(),null==o&&(this._listeners[t]=o=[]),a=o.length;--a>-1;)n=o[a],n.c===e&&n.s===i?o.splice(a,1):0===h&&n.pr<s&&(h=a+1);o.splice(h,0,{c:e,s:i,up:r,pr:s})},p.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},p.dispatchEvent=function(t){var e,i,r,s=this._listeners[t];if(s)for(e=s.length,e>1&&(s=s.slice(0)),i=this._eventTarget;--e>-1;)r=s[e],r&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var M=n.requestAnimationFrame,L=n.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},B=O();for(u=["ms","moz","webkit","o"],c=u.length;--c>-1&&!M;)M=n[u[c]+"RequestAnimationFrame"],L=n[u[c]+"CancelAnimationFrame"]||n[u[c]+"CancelRequestAnimationFrame"];S("Ticker",function(t,e){var i,r,s,n,a,o=this,l=O(),u=!(e===!1||!M)&&"auto",c=500,p=33,m="tick",g=function(t){var e,h,u=O()-B;u>c&&(l+=u-p),B+=u,o.time=(B-l)/1e3,e=o.time-a,(!i||e>0||t===!0)&&(o.frame++,a+=e+(e>=n?.004:n-e),h=!0),t!==!0&&(s=r(g)),h&&o.dispatchEvent(m)};P.call(o),o.time=o.frame=0,o.tick=function(){g(!0)},o.lagSmoothing=function(t,e){c=t||1/v,p=Math.min(e,c,0)},o.sleep=function(){null!=s&&(u&&L?L(s):clearTimeout(s),r=x,s=null,o===d&&(f=!1))},o.wake=function(t){null!==s?o.sleep():t?l+=-B+(B=O()):o.frame>10&&(B=O()-c+5),r=0===i?x:u&&M?M:function(t){return setTimeout(t,1e3*(a-o.time)+1|0)},o===d&&(f=!0),g(2)},o.fps=function(t){return arguments.length?(i=t,n=1/(i||60),a=this.time+n,void o.wake()):i},o.useRAF=function(t){return arguments.length?(o.sleep(),u=t,void o.fps(i)):u},o.fps(t),setTimeout(function(){"auto"===u&&o.frame<5&&"hidden"!==h.visibilityState&&o.useRAF(!1)},1500)}),p=g.Ticker.prototype=new g.events.EventDispatcher,p.constructor=g.Ticker;var D=S("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,J){f||d.wake();var i=this.vars.useFrames?$:J;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});d=D.ticker=new g.Ticker,p=D.prototype,p._dirty=p._gc=p._initted=p._paused=!1,p._totalTime=p._time=0,p._rawPrevTime=-1,p._next=p._last=p._onUpdate=p._timeline=p.timeline=null,p._paused=!1;var F=function(){f&&O()-B>2e3&&d.wake(),setTimeout(F,2e3)};F(),p.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},p.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},p.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},p.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},p.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},p.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},p.render=function(t,e,i){},p.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},p.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale},p._enabled=function(t,e){return f||d.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},p._kill=function(t,e){return this._enabled(!1,!1)},p.kill=function(t,e){return this._kill(t,e),this},p._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},p._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},p._callback=function(t){var e=this.vars,i=e[t],r=e[t+"Params"],s=e[t+"Scope"]||e.callbackScope||this,n=r?r.length:0;switch(n){case 0:i.call(s);break;case 1:i.call(s,r[0]);break;case 2:i.call(s,r[0],r[1]);break;default:i.apply(s,r)}},p.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var s=this.vars;if(1===arguments.length)return s[t];null==e?delete s[t]:(s[t]=e,s[t+"Params"]=_(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i,s[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},p.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},p.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},p.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},p.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},p.totalTime=function(t,e,i){if(f||d.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,s=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:s._time)-(this._reversed?r-t:t)/this._timeScale,s._dirty||this._uncache(!1),s._timeline)for(;s._timeline;)s._timeline._time!==(s._startTime+s._totalTime)/s._timeScale&&s.totalTime(s._totalTime,!0),s=s._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(N.length&&et(),this.render(t,e,!1),N.length&&et())}return this},p.progress=p.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},p.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},p.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},p.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||v,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},p.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},p.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(f||t||d.wake(),e=r.rawTime(),i=e-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var I=S("core.SimpleTimeline",function(t){D.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});p=I.prototype=new D,p.constructor=I,p.kill()._gc=!1,p._first=p._last=p._recent=null,p._sortChildren=!1,p.add=p.insert=function(t,e,i,r){var s,n;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),s=this._last,this._sortChildren)for(n=t._startTime;s&&s._startTime>n;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=s,this._recent=t,this._timeline&&this._uncache(!0),this},p._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},p.render=function(t,e,i){var r,s=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;s;)r=s._next,(s._active||t>=s._startTime&&!s._paused)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=r},p.rawTime=function(){return f||d.wake(),this._totalTime};var k=S("TweenLite",function(t,e,i){if(D.call(this,e,i),this.render=k.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:k.selector(t)||t;var r,s,a,o=t.jquery||t.length&&t!==n&&t[0]&&(t[0]===n||t[0].nodeType&&t[0].style&&!t.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?K[k.defaultOverwrite]:"number"==typeof h?h>>0:K[h],(o||t instanceof Array||t.push&&_(t))&&"number"!=typeof t[0])for(this._targets=a=y(t),this._propLookup=[],this._siblings=[],r=0;r<a.length;r++)s=a[r],s?"string"!=typeof s?s.length&&s!==n&&s[0]&&(s[0]===n||s[0].nodeType&&s[0].style&&!s.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(y(s))):(this._siblings[r]=it(s,this,!1),1===h&&this._siblings[r].length>1&&st(s,this,null,1,this._siblings[r])):(s=a[r--]=k.selector(s),"string"==typeof s&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=it(t,this,!1),1===h&&this._siblings.length>1&&st(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-v,this.render(Math.min(0,-this._delay)))},!0),U=function(t){return t&&t.length&&t!==n&&t[0]&&(t[0]===n||t[0].nodeType&&t[0].style&&!t.nodeType)},G=function(t,e){var i,r={};for(i in t)Q[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!H[i]||H[i]&&H[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r};p=k.prototype=new D,p.constructor=k,p.kill()._gc=!1,p.ratio=0,p._firstPT=p._targets=p._overwrittenProps=p._startAt=null,p._notifyPluginsOfEnabled=p._lazy=!1,k.version="1.19.1",k.defaultEase=p._ease=new A(null,null,1,1),k.defaultOverwrite="auto",k.ticker=d,k.autoSleep=120,k.lagSmoothing=function(t,e){d.lagSmoothing(t,e)},k.selector=n.$||n.jQuery||function(t){var e=n.$||n.jQuery;return e?(k.selector=e,e(t)):"undefined"==typeof h?t:h.querySelectorAll?h.querySelectorAll(t):h.getElementById("#"===t.charAt(0)?t.substr(1):t)};var N=[],j={},V=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,W=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.blob?1===t?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<r&&e>-r&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},z=function(t,e,i,r){var s,n,a,o,h,l,u,c=[],p=0,d="",f=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",i&&(i(c),t=c[0],e=c[1]),c.length=0,s=t.match(V)||[],n=e.match(V)||[],r&&(r._next=null,r.blob=1,c._firstPT=c._applyPT=r),h=n.length,o=0;o<h;o++)u=n[o],l=e.substr(p,e.indexOf(u,p)-p),d+=l||!o?l:",",p+=l.length,f?f=(f+1)%5:"rgba("===l.substr(-5)&&(f=1),u===s[o]||s.length<=o?d+=u:(d&&(c.push(d),d=""),a=parseFloat(s[o]),c.push(a),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:a,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-a)||0,f:0,m:f&&f<4?Math.round:0}),p+=u.length;return d+=e.substr(p),d&&c.push(d),c.setRatio=W,c},X=function(t,e,i,r,s,n,a,o,h){"function"==typeof r&&(r=r(h||0,t));var l,u=typeof t[e],c="function"!==u?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),p="get"!==i?i:c?a?t[c](a):t[c]():t[e],d="string"==typeof r&&"="===r.charAt(1),f={t:t,p:e,s:p,f:"function"===u,pg:0,n:s||e,m:n?"function"==typeof n?n:Math.round:0,pr:0,c:d?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-p||0};if(("number"!=typeof p||"number"!=typeof r&&!d)&&(a||isNaN(p)||!d&&isNaN(r)||"boolean"==typeof p||"boolean"==typeof r?(f.fp=a,l=z(p,d?f.s+f.c:r,o||k.defaultStringFilter,f),f={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:s||e,pr:0,m:0}):(f.s=parseFloat(p),d||(f.c=parseFloat(r)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f},Y=k._internals={isArray:_,isSelector:U,lazyTweens:N,blobDif:z},H=k._plugins={},q=Y.tweenLookup={},Z=0,Q=Y.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},K={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},$=D._rootFramesTimeline=new I,J=D._rootTimeline=new I,tt=30,et=Y.lazyRender=function(){var t,e=N.length;for(j={};--e>-1;)t=N[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);N.length=0};J._startTime=d.time,$._startTime=d.frame,J._active=$._active=!0,setTimeout(et,1),D._updateRoot=k.render=function(){var t,e,i;if(N.length&&et(),J.render((d.time-J._startTime)*J._timeScale,!1,!1),$.render((d.frame-$._startTime)*$._timeScale,!1,!1),N.length&&et(),d.frame>=tt){tt=d.frame+(parseInt(k.autoSleep,10)||120);for(i in q){for(e=q[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete q[i]}if(i=J._first,(!i||i._paused)&&k.autoSleep&&!$._first&&1===d._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||d.sleep()}}},d.addEventListener("tick",D._updateRoot);var it=function(t,e,i){var r,s,n=t._gsTweenID;if(q[n||(t._gsTweenID=n="t"+Z++)]||(q[n]={target:t,tweens:[]}),e&&(r=q[n].tweens,r[s=r.length]=e,i))for(;--s>-1;)r[s]===e&&r.splice(s,1);return q[n].tweens},rt=function(t,e,i,r){var s,n,a=t.vars.onOverwrite;return a&&(s=a(t,e,i,r)),a=k.onOverwrite,a&&(n=a(t,e,i,r)),s!==!1&&n!==!1},st=function(t,e,i,r,s){var n,a,o,h;if(1===r||r>=4){for(h=s.length,n=0;n<h;n++)if((o=s[n])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===r)break;return a}var l,u=e._startTime+v,c=[],p=0,d=0===e._duration;for(n=s.length;--n>-1;)(o=s[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||nt(e,0,d),0===nt(o,l,d)&&(c[p++]=o)):o._startTime<=u&&o._startTime+o.totalDuration()/o._timeScale>u&&((d||!o._initted)&&u-o._startTime<=2e-10||(c[p++]=o)));for(n=p;--n>-1;)if(o=c[n],2===r&&o._kill(i,t,e)&&(a=!0),2!==r||!o._firstPT&&o._initted){if(2!==r&&!rt(o,e))continue;
o._enabled(!1,!1)&&(a=!0)}return a},nt=function(t,e,i){for(var r=t._timeline,s=r._timeScale,n=t._startTime;r._timeline;){if(n+=r._startTime,s*=r._timeScale,r._paused)return-100;r=r._timeline}return n/=s,n>e?n-e:i&&n===e||!t._initted&&n-e<2*v?v:(n+=t.totalDuration()/t._timeScale/s)>e+v?0:n-e-v};p._init=function(){var t,e,i,r,s,n,a=this.vars,o=this._overwrittenProps,h=this._duration,l=!!a.immediateRender,u=a.ease;if(a.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),s={};for(r in a.startAt)s[r]=a.startAt[r];if(s.overwrite=!1,s.immediateRender=!0,s.lazy=l&&a.lazy!==!1,s.startAt=s.delay=null,this._startAt=k.to(this.target,0,s),l)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(a.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(r in a)Q[r]&&"autoCSS"!==r||(i[r]=a[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&a.lazy!==!1,i.immediateRender=l,this._startAt=k.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof A?u:"function"==typeof u?new A(u,a.easeParams):R[u]||k.defaultEase:k.defaultEase,a.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(n=this._targets.length,t=0;t<n;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(e&&k._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=a.onUpdate,this._initted=!0},p._initProps=function(t,e,i,r,s){var a,o,h,l,u,c;if(null==t)return!1;j[t._gsTweenID]&&et(),this.vars.css||t.style&&t!==n&&t.nodeType&&H.css&&this.vars.autoCSS!==!1&&G(this.vars,t);for(a in this.vars)if(c=this.vars[a],Q[a])c&&(c instanceof Array||c.push&&_(c))&&c.join("").indexOf("{self}")!==-1&&(this.vars[a]=c=this._swapSelfInParams(c,this));else if(H[a]&&(l=new H[a])._onInitTween(t,this.vars[a],this,s)){for(this._firstPT=u={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:l._priority,m:0},o=l._overwriteProps.length;--o>-1;)e[l._overwriteProps[o]]=this._firstPT;(l._priority||l._onInitAllProps)&&(h=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else e[a]=X.call(this,t,a,"get",c,a,0,null,this.vars.stringFilter,s);return r&&this._kill(r,t)?this._initProps(t,e,i,r,s):this._overwrite>1&&this._firstPT&&i.length>1&&st(t,this,e,this._overwrite,i)?(this._kill(e,t),this._initProps(t,e,i,r,s)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(j[t._gsTweenID]=!0),h)},p.render=function(t,e,i){var r,s,n,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h-1e-7&&t>=0)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,s="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(l<0||t<=0&&t>=-1e-7||l===v&&"isPause"!==this.data)&&l!==t&&(i=!0,l>v&&(s="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:v);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0)&&(s="onReverseComplete",r=this._reversed),t<0&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==v||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:v)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,c=this._easeType,p=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),1===c?this.ratio=1-u:2===c?this.ratio=u:t/h<.5?this.ratio=u/2:this.ratio=1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,N.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):s||(s="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==h||e||this._callback("onStart"))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(t<0&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==o||r||i)&&this._callback("onUpdate")),s&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s),0===h&&this._rawPrevTime===v&&a!==v&&(this._rawPrevTime=0)))}},p._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:k.selector(e)||e;var r,s,n,a,o,h,l,u,c,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((_(e)||U(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(h=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){o=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],s=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,s=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,u=t!==s&&"all"!==s&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(k.onOverwrite||this.vars.onOverwrite)){for(n in l)o[n]&&(c||(c=[]),c.push(n));if((c||!t)&&!rt(this,i,e,c))return!1}for(n in l)(a=o[n])&&(p&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,h=!0),a.pg&&a.t._kill(l)&&(h=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[n]),u&&(s[n]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},p.invalidate=function(){return this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-v,this.render(Math.min(0,-this._delay))),this},p._enabled=function(t,e){if(f||d.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=it(r[i],this,!0);else this._siblings=it(this.target,this,!0)}return D.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&k._onPluginEvent(t?"_onEnable":"_onDisable",this)},k.to=function(t,e,i){return new k(t,e,i)},k.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new k(t,e,i)},k.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new k(t,e,r)},k.delayedCall=function(t,e,i,r,s){return new k(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:s,overwrite:0})},k.set=function(t,e){return new k(t,0,e)},k.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:k.selector(t)||t;var i,r,s,n;if((_(t)||U(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(k.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(n=r[i],s=i;--s>-1;)n===r[s]&&r.splice(i,1)}else for(r=it(t).concat(),i=r.length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r},k.killTweensOf=k.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=k.getTweensOf(t,e),s=r.length;--s>-1;)r[s]._kill(i,t)};var at=S("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=at.prototype},!0);if(p=at.prototype,at.version="1.19.0",at.API=2,p._firstPT=null,p._addTween=X,p.setRatio=W,p._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},p._mod=p._roundProps=function(t){for(var e,i=this._firstPT;i;)e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")],e&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},k._onPluginEvent=function(t,e){var i,r,s,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,r=s;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:n)?o._prev._next=o:s=o,(o._next=r)?r._prev=o:n=o,o=a}o=e._firstPT=s}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},at.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===at.API&&(H[(new t[e])._propName]=t[e]);return!0},w.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,s=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=S("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){at.call(this,i,r),this._overwriteProps=s||[]},t.global===!0),o=a.prototype=new at(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,at.activate([a]),a},u=n._gsQueue){for(c=0;c<u.length;c++)u[c]();for(p in b)b[p].func||n.console.log("GSAP encountered missing dependency: "+p)}f=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof n?n:this||window,"TweenMax")}).call(e,function(){return this}())},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){!function(t){function e(t){return o.raw?t:encodeURIComponent(t)}function i(t){return o.raw?t:decodeURIComponent(t)}function r(t){return e(o.json?JSON.stringify(t):String(t))}function s(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(a," ")),o.json?JSON.parse(t):t}catch(e){}}function n(e,i){var r=o.raw?e:s(e);return t.isFunction(i)?i(r):r}var a=/\+/g,o=t.cookie=function(s,a,h){if(arguments.length>1&&!t.isFunction(a)){if(h=t.extend({},o.defaults,h),"number"==typeof h.expires){var l=h.expires,u=h.expires=new Date;u.setMilliseconds(u.getMilliseconds()+864e5*l)}return document.cookie=[e(s),"=",r(a),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var c=s?void 0:{},p=document.cookie?document.cookie.split("; "):[],d=0,f=p.length;d<f;d++){var m=p[d].split("="),g=i(m.shift()),v=m.join("=");if(s===g){c=n(v,a);break}s||void 0===(v=n(v))||(c[g]=v)}return c};o.defaults={},t.removeCookie=function(e,i){return t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e)}}($)},function(t,e,i){function r(t){this.serviceLocator=t,this.el=$(".js-header"),this.el.find(".js-home").on("click",this.goHome.bind(this))}var s=i(15);r.prototype.goHome=function(t){t.preventDefault(),s("/")},t.exports=r},function(t,e,i){function r(t){this.serviceLocator=t,this.view=$(".js-start").hide(),this.view.append(a()),this.startText=new n(this.view.find("canvas")[0]),this.visible=!1,this.view.on("click",".js-start",this.goToGraph.bind(this)),s("/",this.show.bind(this)),s("*",this.hide.bind(this))}var s=i(15),n=i(61),a=(i(4),i(63));r.prototype.show=function(t,e){return this.visible?e():(this.view.show(),TweenLite.to(this.view,0,{opacity:0}),this.visible=!0,this.serviceLocator.bg.showLines(),this.serviceLocator.engine.addUpdate(this.startText),this.startText.letters(),TweenLite.to(this.view,.5,{opacity:1,delay:.5}),void e())},r.prototype.goToGraph=function(t,e){s("/attribute/varietal")},r.prototype.hide=function(t,e){return"/"!=t.path&&this.visible?(this.startText.explode(),this.visible=!1,TweenLite.to(this.view,1,{opacity:0}),void setTimeout(function(){this.serviceLocator.bg.hideLines(),this.view.hide(),this.serviceLocator.engine.removeUpdate(this.startText),e()}.bind(this),1e3)):e()},t.exports=r},function(t,e,i){function r(t){this.canvas=t,this.initialized=!1,this.measures=new s,this.canvas.width=this.measures.width,this.canvas.height=this.measures.height,this.loadImage()}var s=(i(3),i(6)),n=i(12),a=i(62);r.prototype.loadImage=function(){this.canvas2=document.createElement("canvas");var t=this.canvas2.getContext("2d");this.canvas2.width=788,this.canvas2.height=140;var e=new Image;e.onload=function(e){var i=new n.Rectangle(0,0,e.target.width,e.target.height);t.drawImage(e.target,0,0),this.measures.on("resize",this.updateLayout.bind(this)),this.imageData=t.getImageData(0,0,i.width,i.height),this.init(i,this.imageData)}.bind(this),e.src="/assets/images/wine_explorer_l.png"},r.prototype.init=function(t,e){this.proton=new n,this.emitter=new n.Emitter,this.emitter.rate=new n.Rate(new n.Span(100,100),new n.Span(.001)),this.emitter.addInitialize(new n.Mass(.5)),this.emitter.addInitialize(new n.Radius(1,4)),this.emitter.addInitialize(new n.Life(2)),this.imageZone=new n.ImageZone(e,this.measures.width/2-394,this.measures.height/2-70),this.initZone=new n.P(this.imageZone),this.emitter.addInitialize(this.initZone);var i=this.randomBehaviour=new n.RandomDrift(50,50,.1),r=this.gravity=new n.Gravity(0);this.emitter.addBehaviour(this.customScaleBehaviour()),this.emitter.addBehaviour(this.gravity),this.emitter.addBehaviour(this.randomBehaviour),this.emitter.addBehaviour(new n.Color(["#555913","#570E1E","#ffffff","#D6781B"])),this.zone=new n.RectZone(0,0,this.canvas2.width,this.canvas2.height),this.zoneBehaviour=new n.CrossZone(this.zone,"collision"),this.emitter.addBehaviour(this.zoneBehaviour),this.initProtonWhenReady&&this.emitter.emit(),this.proton.addEmitter(this.emitter);var s=a();this.renderer=new n.Renderer(s?"webgl":"canvas",this.proton,this.canvas),s?this.renderer.blendFunc("SRC_ALPHA","ONE"):(this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="lighter"),this.renderer.start(),setTimeout(function(){i.reset(.1,.1,.2),r.reset(0)},1500),this.initialized=!0},r.prototype.customScaleBehaviour=function(){return{initialize:function(t){t.oldRadius=t.radius,t.scale=0},applyBehaviour:function(t){t.energy>=2/3?t.scale=3*(1-t.energy):t.energy<=1/3&&(t.scale=3*t.energy),t.radius=t.oldRadius*t.scale}}},r.prototype.updateLayout=function(){$(this.canvas).css({top:this.measures.height/2-this.canvas.height/2,left:this.measures.width/2-this.canvas.width/2})},r.prototype.explode=function(){this.initialized&&(this.zoneBehaviour.reset(new n.RectZone(0,0,this.measures.width,this.measures.height),"bound"),this.randomBehaviour.reset(60,60,1),setTimeout(function(){this.emitter.removeAllParticles()}.bind(this),1500))},r.prototype.letters=function(){this.initialized?(this.zoneBehaviour.reset(this.imageZone,"bound"),this.randomBehaviour.reset(.2,.1,.05),this.emitter.emit()):this.initProtonWhenReady=!0},r.prototype.update=function(){this.proton&&this.proton.update()},t.exports=r},function(t,e){t.exports=function(){var t=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return t}},function(t,e,i){i(64);t.exports=function(t){var e=[];return e.push('<canvas class="start-canvas"></canvas><div class="start-text"></div><button class="btn btn--primary start-button js-start">Start</button><a href="http://www.brancottestate.com" class="start-link">Or skip to go to our homepage</a>'),e.join("")}},function(t,e,i){"use strict";function r(t){return null!=t&&""!==t}function s(t){return(Array.isArray(t)?t.map(s):t&&"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}):[t]).filter(r).join(" ")}function n(t){return o[t]||t}function a(t){var e=String(t).replace(h,n);return e===""+t?t:e}e.merge=function l(t,e){if(1===arguments.length){for(var i=t[0],s=1;s<t.length;s++)i=l(i,t[s]);return i}var n=t["class"],a=e["class"];(n||a)&&(n=n||[],a=a||[],Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]),t["class"]=n.concat(a).filter(r));for(var o in e)"class"!=o&&(t[o]=e[o]);return t},e.joinClasses=s,e.cls=function(t,i){for(var r=[],n=0;n<t.length;n++)i&&i[n]?r.push(e.escape(s([t[n]]))):r.push(s(t[n]));var a=s(r);return a.length?' class="'+a+'"':""},e.style=function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return e+":"+t[e]}).join(";"):t},e.attr=function(t,i,r,s){return"style"===t&&(i=e.style(i)),"boolean"==typeof i||null==i?i?" "+(s?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof i?(JSON.stringify(i).indexOf("&")!==-1&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),i&&"function"==typeof i.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(i).replace(/'/g,"&apos;")+"'"):r?(i&&"function"==typeof i.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+e.escape(i)+'"'):(i&&"function"==typeof i.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+i+'"')},e.attrs=function(t,i){var r=[],n=Object.keys(t);if(n.length)for(var a=0;a<n.length;++a){var o=n[a],h=t[o];"class"==o?(h=s(h))&&r.push(" "+o+'="'+h+'"'):r.push(e.attr(o,h,!1,i))}return r.join("")};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},h=/[&<>"]/g;e.escape=a,e.rethrow=function u(t,e,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&e||s))throw t.message+=" on line "+r,t;try{s=s||i(65).readFileSync(e,"utf8")}catch(n){u(t,null,r)}var a=3,o=s.split("\n"),h=Math.max(r-a,0),l=Math.min(o.length,r+a),a=o.slice(h,l).map(function(t,e){var i=e+h+1;return(i==r?"  > ":"    ")+i+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Jade")+":"+r+"\n"+a+"\n\n"+t.message,t},e.DebugItem=function(t,e){this.lineno=t,this.filename=e}},function(t,e){},function(t,e,i){function r(t){this.view=null,this.nextView=null,this.serviceLocator=t,this.detail=new o(t),h("/wine/:wine",this.detail.hide.bind(this.detail),this.changeGraphWine.bind(this)),h("/wine/:wine/details",this.showDetails.bind(this)),h("/attribute/:type",this.detail.hide.bind(this.detail),this.changeGraphType.bind(this)),h("/attribute/:type/:name",this.detail.hide.bind(this.detail),this.changeGraphAttr.bind(this)),h("*",this.hide.bind(this))}var s=(i(2),i(67)),n=i(89),a=i(92),o=i(96),h=i(15);r.prototype.changeGraphType=function(t){this.serviceLocator.api.getAttributesByType(t.params.type,function(t){this.changeGraph(t,a)}.bind(this))},r.prototype.changeGraphAttr=function(t){var e=this.serviceLocator.api.getAttribute(t.params.type,t.params.name);this.changeGraph(e,n)},r.prototype.changeGraphWine=function(t,e){var i=this.serviceLocator.api.getWine(t.params.wine);this.changeGraph(i,s)},r.prototype.changeGraph=function(t,e){if(this.visible||this.show(),this.nextModel=t,this.nextGraph=e,this.view){var i=this.view.getClickedNode(t);this.view.transitionOut(i,function(){this.view.panOut(i,this.serviceLocator.bg,function(){this.serviceLocator.engine.remove(this.view),this.view.destroy(),this.createNewGraph(this.nextModel,this.nextGraph,!1)}.bind(this))}.bind(this))}else this.createNewGraph(t,e,!0)},r.prototype.createNewGraph=function(t,e,i){this.view=new e(t,this.serviceLocator),this.serviceLocator.engine.add(this.view),this.view.transitionIn(i)},r.prototype.showDetails=function(t,e){this.detail.show(t),this.destroyViews(e)},r.prototype.hide=function(t,e){return t.path.indexOf("/wine")>-1||t.path.indexOf("/attribute")>-1?e():(this.visible=!1,void this.detail.hide(t,function(){this.destroyViews(e)}.bind(this)))},r.prototype.destroyViews=function(t){this.view?this.view.fadeOut(function(){this.serviceLocator.engine.remove(this.view),this.view.destroy(),this.view=null,t()}.bind(this)):t()},r.prototype.show=function(){this.visible=!0},t.exports=r},function(t,e,i){function r(t){n.call(this,t)}var s=(i(2),i(3)),n=i(68),a=(i(72),i(73)),o=i(75),h=i(77);s(r,n),r.prototype.createNodes=function(){console.log("Creating nodes from wine graph"),this.model.shuffledAttributes=h(this.model.attributes),this.model.shuffledAttributes.forEach(function(t){var e=new o(t,this.serviceLocator);this.addChild(e),this.layout.add(e),this.nodes.push(e)},this)},r.prototype.createMainNode=function(){this.mainNode=new a(this.model,this.serviceLocator),this.mainNode.layout={x:Math.round(this.measures.width/2),y:Math.round(this.measures.height/2)},this.mainNode.x=this.mainNode.layout.x,this.mainNode.y=this.mainNode.layout.y,this.addChild(this.mainNode)},t.exports=r},function(t,e,i){function r(t,e){s.DisplayObjectContainer.call(this),this.model=t,this.serviceLocator=e,this.nodes=[],this.mainNode=null,this.measures=new a,this.onResizeBinded=this.onResize.bind(this),this.measures.on("resize",this.onResizeBinded),this.transitioningOut=!1,this.init()}var s=i(2),n=i(3),a=(i(5).EventEmitter,i(6)),o=i(69),h=i(70);n(r,s.DisplayObjectContainer),r.prototype.init=function(){this.layout=new o,this.createNodes(),this.createMainNode(),this.layout.update(),this.lines=new h(this.nodes,this.mainNode),this.lines.alpha=0,this.addChildAt(this.lines,0)},r.prototype.createNodes=function(){},r.prototype.createMainNode=function(){},r.prototype.getClickedNode=function(t){var e=null;return this.nodes.forEach(function(i,r){i.model.slug===t.slug&&(e=i)},this),null===e&&(e=this.mainNode),e},r.prototype.onResize=function(){this.mainNode.layout.x=this.measures.middleX,this.mainNode.layout.y=this.measures.middleY,this.layout.update()},r.prototype.update=function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].update();this.mainNode.update(),this.lines.update()},r.prototype.transitionIn=function(t){t?(this.mainNode.radius=0,TweenLite.to(this.mainNode,.8,{radius:this.mainNode.origRadius,ease:Power4.easeOut})):this.mainNode.radius=this.mainNode.origRadius,TweenLite.to(this.mainNode.textHolder,.5,{alpha:1}),TweenLite.to(this.lines,.5,{alpha:1,delay:.3})},r.prototype.transitionOut=function(t,e){if(!this.transitioningOut){this.transitioningOut=!0,t.freezeNode&&t.freezeNode();var i=new TimelineLite({onComplete:e});t===this.mainNode?i.to(this.lines,.2,{alpha:0},"-=.2").to(this.mainNode.textHolder,.2,{alpha:0},"-=0.2"):i.to(this.mainNode,.4,{radius:4,ease:Power4.easeOut}).to(this.lines,.2,{alpha:0},"-=.2").to(this.mainNode,.2,{alpha:0},"-=.2"),this.nodes.forEach(function(e,r){var s=.5*Math.random()+.3;i.to(e.textHolder,.2,{alpha:0,delay:s},"-0.3"),e!==t&&i.to(e,.5,{x:t.x,y:t.y,width:4,height:4,alpha:0,delay:s},"-0.2")},this),t!==this.mainNode&&i.to(t,.5,{radius:98,ease:Power2.easeOut},"-=0.3"),t.image&&i.to(t.image,.5,{alpha:0,ease:Power2.easeOut},"-=0.5")}},r.prototype.panOut=function(t,e,i){if(t===this.mainNode)return i();var r=this.measures.middleX-t.worldTransform.tx,s=this.measures.middleY-t.worldTransform.ty;TweenLite.to(e.bgPattern.tilePosition,1,{x:e.bgPattern.tilePosition.x+r,y:e.bgPattern.tilePosition.y+s,ease:Power3.easeInOut}),TweenLite.to(this,1,{x:r,y:s,ease:Power3.easeInOut,onComplete:i}),TweenLite.to(e.particleHolder,1,{x:e.particleHolder.x+r,y:e.particleHolder.y+s,ease:Power3.easeInOut,onComplete:e.updateZone.bind(e)})},r.prototype.fadeOut=function(t){TweenLite.to(this,.5,{alpha:0,ease:Power4.easeOut,onComplete:t}),TweenLite.to(this.scale,.5,{x:1.5,y:1.5,ease:Power4.easeOut}),TweenLite.to(this.position,.5,{x:-this.measures.middleX/2,y:-this.measures.middleY/2,ease:Power4.easeOut})},r.prototype.destroy=function(){this.measures.removeListener("resize",this.onResizeBinded)},t.exports=r},function(t,e,i){function r(){this.nodes=[],this.measures=new s}var s=i(6);r.prototype.add=function(t){t.layout={x:this.measures.width/2,y:this.measures.height/2},t.x=t.layout.x,t.y=t.layout.y,this.nodes.push(t)},r.prototype.update=function(){for(var t,e=this.measures.middleX-this.measures.middleX/2,i=this.measures.middleY-this.measures.middleY/4,r=Math.PI,s=this.measures.middleX,n=this.measures.middleY,a=120,o=a*(r/180),h=20*(r/180),l=this.nodes.length,u=30,c=0;c<l;c++){node=this.nodes[c],t=(r-h)*c/(l/2)+o;var p=c%2==0?e:e+50,d=c%2==0?i:i+50;node.layout.x=node.layout.origX=Math.round(p*Math.cos(t)+(p+(Math.random()*u-.5*u)+s)-p),node.layout.y=node.layout.origY=Math.round(d*Math.sin(t)+(d+(Math.random()*u-.5*u)+n)-d)}},t.exports=r},function(t,e,i){function r(t,e){n.DisplayObjectContainer.call(this),this.nodes=t,this.mainNode=e,this.measures=new a,this.lines=new n.Graphics,this.addChild(this.lines)}var s=i(3),n=i(2),a=i(6),o=i(71);s(r,n.DisplayObjectContainer),r.prototype.update=function(){this.lines.clear();for(var t=this.mainNode.x,e=this.mainNode.y,i=this.nodes.length,r=0;r<i;r++){var s=this.nodes[r],n=s.follow?1:.5,a=new o(s.x-t,s.y-e),h=a.clone().normalize(),l={},u={};this.nodes[r+1]||this.nodes[0];u.x=t+h.getX()*this.mainNode.radius,u.y=e+h.getY()*this.mainNode.radius,l.x=t+h.getX()*(a.length()-s.radius),l.y=e+h.getY()*(a.length()-s.radius),this.lines.lineStyle(1,16777215,n),this.lines.moveTo(u.x,u.y),this.lines.lineTo(l.x,l.y)}},t.exports=r},function(t,e){function i(t,e){return this instanceof i==!1?new i(t,e):void(this._axes=[t,e])}var r=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10];i.prototype={ctor:i,setAxes:function(t,e){return this._axes[0]=t,this._axes[1]=e,this},getX:function(){return this._axes[0]},setX:function(t){return this._axes[0]=t,this},getY:function(){return this._axes[1]},setY:function(t){return this._axes[1]=t,this},toString:function(t){return t?"("+Math.round(this._axes[0])+", "+Math.round(this._axes[1])+")":"("+this._axes[0]+", "+this._axes[1]+")"},toArray:function(){return new Array(this._axes[0],this._axes[1])},toObject:function(){return{x:this._axes[0],y:this._axes[1]}},add:function(t){return this._axes[0]+=t._axes[0],this._axes[1]+=t._axes[1],this},subtract:function(t){return this._axes[0]-=t._axes[0],this._axes[1]-=t._axes[1],this},equals:function(t){return t._axes[0]==this._axes[0]&&t._axes[1]==this._axes[1]},multiplyByVector:function(t){return this._axes[0]*=t._axes[0],this._axes[1]*=t._axes[1],this},mulV:function(t){return this.multiplyByVector(t)},divideByVector:function(t){return this._axes[0]/=t._axes[0],this._axes[1]/=t._axes[1],this},divV:function(t){return this.divideByVector(t)},multiplyByScalar:function(t){return this._axes[0]*=t,this._axes[1]*=t,this},mulS:function(t){return this.multiplyByScalar(t)},divideByScalar:function(t){return this._axes[0]/=t,this._axes[1]/=t,this},divS:function(t){return this.divideByScalar(t)},normalise:function(){return this.multiplyByScalar(1/this.magnitude())},normalize:function(){return this.normalise()},unit:function(){return this.normalise()},magnitude:function(){return Math.sqrt(this._axes[0]*this._axes[0]+this._axes[1]*this._axes[1])},length:function(){return this.magnitude()},lengthSq:function(){return this._axes[0]*this._axes[0]+this._axes[1]*this._axes[1]},dot:function(t){return t._axes[0]*this._axes[0]+t._axes[1]*this._axes[1]},cross:function(t){return this._axes[0]*t._axes[1]-this._axes[1]*t._axes[0]},reverse:function(){return this._axes[0]=-this._axes[0],this._axes[1]=-this._axes[1],this},abs:function(){return this._axes[0]=Math.abs(this._axes[0]),this._axes[1]=Math.abs(this._axes[1]),this},zero:function(){return this._axes[0]=this._axes[1]=0,this},distance:function(t){var e=this._axes[0]-t._axes[0],i=this._axes[1]-t._axes[1];return Math.sqrt(e*e+i*i)},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=this._axes[0],s=this._axes[1];return this._axes[0]=r*e-s*i,this._axes[1]=r*i+s*e,this},round:function(t){return t=t||2,this._axes[0]=(.5+this._axes[0]*r[t]<<0)/r[t],this._axes[1]=(.5+this._axes[1]*r[t]<<0)/r[t],this},clone:function(){return new this.ctor(this._axes[0],this._axes[1])}},t.exports=i},function(t,e,i){function r(t){s.DisplayObjectContainer.call(this),this.model=t,this.freeze=!1,this.init()}var s=i(2),n=i(3);i(6);n(r,s.DisplayObjectContainer),r.prototype.init=function(){this.radius=this.origRadius=98},r.prototype.update=function(){this.outline&&(this.outline.clear(),this.outline.lineStyle(1,16777215),this.outline.drawCircle(0,0,this.radius)),this.masker&&(this.masker.clear(),this.masker.beginFill(16777215,1),this.masker.drawCircle(.5,.5,this.radius-1),this.masker.endFill()),this.freeze||(this.x+=.08*(this.layout.x-this.x),this.y+=.08*(this.layout.y-this.y))},r.prototype.createUI=function(){},t.exports=r},function(t,e,i){function r(t){s.call(this,t);var e="Brancott Estate"==t.range?t.range:"Brancott Estate "+t.range;this.createText(t.node_1||e,t.node_2||t.name),this.createImage(conf.cdn_url+"wines/"+t.images.small),this.createButton(),this.outline=new a.Graphics,this.addChild(this.outline)}var s=i(74),n=i(3),a=i(2),o=i(15),h=i(13);n(r,s),r.prototype.createButton=function(){this.detailBtn=new a.DisplayObjectContainer;var t=new a.Sprite(a.Texture.fromImage("/assets/images/btn_bg.png"),130,43),e=new a.Text("View Wine".toUpperCase(),h.buttonStyle);e.y=15,e.x=Math.round(-e.width/2+65),this.detailBtn.addChild(t),this.detailBtn.addChild(e),this.detailBtn.y=this.labelText.height+this.labelText.y+15,this.detailBtn.x=-65,this.detailBtn.hitArea=new a.Rectangle(0,0,130,42),this.detailBtn.interactive=!0,this.detailBtn.buttonMode=!0,this.addChild(this.detailBtn),this.detailBtn.click=this.detailBtn.tap=function(){o("/wine/"+this.model.slug+"/details")}.bind(this)},r.prototype.createImage=function(t){this.image=new a.Sprite.fromImage(t),this.image.anchor.x=this.image.anchor.y=.5,this.image.position.x=.5,this.image.position.y=45,this.image.scale.x=this.image.scale.y=.52,"letter-series-b-late-harvest-marlborough-sauvignon-blanc"===this.model.slug&&(this.image.position.y=25,this.image.scale.x=this.image.scale.y=.42),this.masker=new a.Graphics,this.image.mask=this.masker,this.addChild(this.masker),this.addChild(this.image)},t.exports=r},function(t,e,i){function r(t){s.call(this,t)}var s=i(72),n=i(3),a=i(2),o=i(13);n(r,s),r.prototype.createText=function(t,e){this.titleText=new a.Text(t.toUpperCase().replace("|","\n"),o.bigTitleStyle),this.labelText=new a.Text(e.toUpperCase().replace("|","\n"),o.bigLabelStyle),this.textHolder=new a.DisplayObjectContainer,this.addChild(this.textHolder),this.titleText.x=-Math.round(this.titleText.width/2),this.labelText.x=-Math.round(this.labelText.width/2),this.titleText.y=this.origRadius+15,this.labelText.y=this.titleText.y+this.titleText.height+5,this.textHolder.addChild(this.titleText),this.textHolder.addChild(this.labelText),this.textHolder.alpha=0},t.exports=r},function(t,e,i){function r(t){console.log(t),s.call(this,t),this.createText(t.typeinfo.name,t.value),this.createImage(conf.cdn_url+"attrs/"+t.typeinfo.icon)}var s=i(76),n=i(3),a=i(2),o=i(15);n(r,s),r.prototype.onClick=function(){s.prototype.onClick.call(this),o("/attribute/"+this.model.type+"/"+this.model.slug)},r.prototype.createImage=function(t){var e=new a.ImageLoader(t,(!0));e.addEventListener("loaded",function(){this.image=new a.Sprite(e.texture),this.image.anchor.x=this.image.anchor.y=.5,this.imageScale=1,this.addChild(this.image)}.bind(this)),e.load()},t.exports=r},function(t,e,i){function r(t){s.call(this,t)}var s=i(72),n=i(3),a=i(2),o=i(13);n(r,s),r.prototype.init=function(){s.prototype.init.call(this),this.radius=this.origRadius=31,this.interactive=!0,this.hitArea=new a.Circle(0,0,1.5*this.radius),this.clickEffect=new a.Graphics,this.clickEffect.lineStyle(1,16777215),this.clickEffect.drawCircle(0,0,40),
this.clickEffect.alpha=0,this.addChild(this.clickEffect),this.mouseover=this.onMouseOver.bind(this),this.mouseout=this.onMouseOut.bind(this),this.click=this.tap=this.onClick.bind(this),this.buttonMode=!0,this.outline=new a.Graphics,this.addChild(this.outline)},r.prototype.onMouseOver=function(t){t.originalEvent&&(this.layout.x=t.originalEvent.clientX,this.layout.y=t.originalEvent.clientY,this.mousemove=this.onMouseMove.bind(this),this.follow=!0,TweenMax.to(this,.4,{radius:40,ease:Power4.easeOut}),TweenMax.to(this.titleText,.4,{y:50,ease:Power4.easeOut}),TweenMax.to(this.labelText,.4,{y:50+this.titleText.height,ease:Power4.easeOut}),this.image&&this.imageScale&&TweenMax.to(this.image.scale,.4,{x:1.29*this.imageScale,y:1.29*this.imageScale,ease:Power4.easeOut}))},r.prototype.onMouseOut=function(){this.mousemove=null,this.layout.x=this.layout.origX,this.layout.y=this.layout.origY,this.follow=!1,TweenMax.to(this,.4,{radius:this.origRadius,ease:Power4.easeOut}),TweenMax.to(this.titleText,.4,{y:40,ease:Power4.easeOut}),TweenMax.to(this.labelText,.4,{y:40+this.titleText.height,ease:Power4.easeOut}),this.image&&this.imageScale&&TweenMax.to(this.image.scale,.4,{x:this.imageScale,y:this.imageScale,ease:Power4.easeOut})},r.prototype.onMouseMove=function(t){this.layout.x=t.originalEvent.clientX,this.layout.y=t.originalEvent.clientY},r.prototype.createText=function(t,e){this.titleText=new a.Text(t.toUpperCase().replace("|","\n"),o.smallTitleStyle),this.labelText=new a.Text(e.replace("|","\n"),o.smallLabelStyle),this.textHolder=new a.DisplayObjectContainer,this.addChild(this.textHolder),this.titleText.x=-Math.round(this.titleText.width/2),this.labelText.x=-Math.round(this.labelText.width/2),this.titleText.y=40,this.labelText.y=this.titleText.y+this.titleText.height,this.textHolder.addChild(this.titleText),this.textHolder.addChild(this.labelText)},r.prototype.createImage=function(t){},r.prototype.onClick=function(){this.clickEffect.alpha=1,this.clickEffect.radius=40,TweenLite.to(this.clickEffect,.7,{alpha:0,radius:100,ease:Power4.easeOut,onUpdate:function(){this.clickEffect.clear(),this.clickEffect.lineStyle(1,16777215),this.clickEffect.drawCircle(0,0,this.clickEffect.radius)},onUpdateScope:this})},r.prototype.freezeNode=function(){this.freeze=!0,this.mousemove=this.mouseover=this.mouseout=this.click=null},t.exports=r},function(t,e,i){function r(t){return s(t,n)}var s=i(78),n=Number.POSITIVE_INFINITY;t.exports=r},function(t,e,i){function r(t,e,i){if(i?n(t,e,i):null==e){t=a(t);var r=t.length;return r>0?t[s(0,r-1)]:void 0}var l=-1,u=o(t),r=u.length,c=r-1;for(e=h(e<0?0:+e||0,r);++l<e;){var p=s(l,c),d=u[p];u[p]=u[l],u[l]=d}return u.length=e,u}var s=i(79),n=i(80),a=i(81),o=i(87),h=Math.min;t.exports=r},function(t,e){function i(t,e){return t+r(s()*(e-t+1))}var r=Math.floor,s=Math.random;t.exports=i},function(t,e){function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&a(u(t))}function s(t,e){return t="number"==typeof t||h.test(t)?+t:-1,e=null==e?l:e,t>-1&&t%1==0&&t<e}function n(t,e,i){if(!o(i))return!1;var n=typeof e;if("number"==n?r(i)&&s(e,i.length):"string"==n&&e in i){var a=i[e];return t===t?t===a:a!==a}return!1}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=/^\d+$/,l=9007199254740991,u=i("length");t.exports=n},function(t,e,i){function r(t){return function(e){return null==e?void 0:e[t]}}function s(t){return null!=t&&n(p(t))}function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function a(t){return null==t?[]:s(t)?o(t)?t:Object(t):h(t)}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){return l(t,u(t))}var l=i(82),u=i(83),c=9007199254740991,p=r("length");t.exports=a},function(t,e){function i(t,e){for(var i=-1,r=e.length,s=Array(r);++i<r;)s[i]=t[e[i]];return s}t.exports=i},function(t,e,i){function r(t){return function(e){return null==e?void 0:e[t]}}function s(t){return null!=t&&a(y(t))}function n(t,e){return t="number"==typeof t||d.test(t)?+t:-1,e=null==e?v:e,t>-1&&t%1==0&&t<e}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function o(t){for(var e=l(t),i=e.length,r=i&&t.length,s=!!r&&a(r)&&(p(t)||c(t)),o=-1,h=[];++o<i;){var u=e[o];(s&&n(u,r)||m.call(t,u))&&h.push(u)}return h}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];h(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(p(t)||c(t))&&e||0;for(var i=t.constructor,r=-1,s="function"==typeof i&&i.prototype===t,o=Array(e),l=e>0;++r<e;)o[r]=r+"";for(var u in t)l&&n(u,e)||"constructor"==u&&(s||!m.call(t,u))||o.push(u);return o}var u=i(84),c=i(85),p=i(86),d=/^\d+$/,f=Object.prototype,m=f.hasOwnProperty,g=u(Object,"keys"),v=9007199254740991,y=r("length"),x=g?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&s(t)?o(t):h(t)?g(t):[]}:o;t.exports=x},function(t,e){function i(t){return!!t&&"object"==typeof t}function r(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}function s(t){return n(t)&&p.call(t)==o}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(s(t)?d.test(u.call(t)):i(t)&&h.test(t))}var o="[object Function]",h=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,p=l.toString,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function i(t){return s(t)&&f.call(t,"callee")&&(!g.call(t,"callee")||m.call(t)==u)}function r(t){return null!=t&&a(t.length)&&!n(t)}function s(t){return h(t)&&r(t)}function n(t){var e=o(t)?m.call(t):"";return e==c||e==p}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){return!!t&&"object"==typeof t}var l=9007199254740991,u="[object Arguments]",c="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,f=d.hasOwnProperty,m=d.toString,g=d.propertyIsEnumerable;t.exports=i},function(t,e){function i(t){return!!t&&"object"==typeof t}function r(t,e){var i=null==t?void 0:t[e];return o(i)?i:void 0}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function n(t){return a(t)&&f.call(t)==l}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return null!=t&&(n(t)?m.test(p.call(t)):i(t)&&u.test(t))}var h="[object Array]",l="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,d=c.hasOwnProperty,f=c.toString,m=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=r(Array,"isArray"),v=9007199254740991,y=g||function(t){return i(t)&&s(t.length)&&f.call(t)==h};t.exports=y},function(t,e,i){function r(t){return function(e){return null==e?void 0:e[t]}}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function n(t){var e=t?c(t):0;return s(e)?e?o(t):[]:a(t)}function a(t){return h(t,l(t))}var o=i(88),h=i(82),l=i(83),u=9007199254740991,c=r("length");t.exports=n},function(t,e){function i(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}t.exports=i},function(t,e,i){function r(t){n.call(this,t)}var s=(i(2),i(3)),n=i(68),a=(i(72),i(90)),o=i(91);s(r,n),r.prototype.createNodes=function(){this.model.wines.forEach(function(t){var e=new o(t,this.serviceLocator);this.addChild(e),this.layout.add(e),this.nodes.push(e)}.bind(this))},r.prototype.createMainNode=function(){this.mainNode=new a(this.model,this.serviceLocator),this.mainNode.layout={x:Math.round(this.measures.width/2),y:Math.round(this.measures.height/2)},this.mainNode.x=this.mainNode.layout.x,this.mainNode.y=this.mainNode.layout.y,this.addChild(this.mainNode)},t.exports=r},function(t,e,i){function r(t){s.call(this,t),this.createText(t.typeinfo.name,t.value),this.createImage(conf.cdn_url+"attrs"+t.icon)}var s=i(74),n=i(3),a=i(2);i(15);n(r,s),r.prototype.createImage=function(t){this.image=new a.Sprite.fromImage(t),this.image.anchor.x=this.image.anchor.y=.5,this.image.position.x=1,this.image.position.y=1,this.image.scale.x=this.image.scale.y=.5,this.masker=new a.Graphics,this.image.mask=this.masker,this.addChild(this.masker),this.addChild(this.image)},t.exports=r},function(t,e,i){function r(t){s.call(this,t);var e="Brancott Estate"==t.range?t.range:"Brancott Estate "+t.range;this.createText(t.node_1||e,t.node_2||t.name),this.createImage(conf.cdn_url+"wines/"+t.images.small)}var s=i(76),n=i(3),a=i(2),o=i(15);n(r,s),r.prototype.onClick=function(){s.prototype.onClick.call(this),console.log("Change to wine graph",this.model.slug),o("/wine/"+this.model.slug)},r.prototype.createImage=function(t){this.image=new a.Sprite.fromImage(t),this.image.anchor.x=.5,this.image.anchor.y=.5,this.image.scale.x=this.image.scale.y=.2,this.imageScale=.2,this.masker=new a.Graphics,this.image.mask=this.masker,this.addChild(this.image),this.addChild(this.masker)},t.exports=r},function(t,e,i){function r(t){n.call(this,t)}var s=(i(2),i(3)),n=i(68),a=(i(72),i(93)),o=i(95);s(r,n),r.prototype.createNodes=function(){console.log("Creating nodes from type graph"),this.model.forEach(function(t){var e=new o(t,this.serviceLocator);this.addChild(e),this.layout.add(e),this.nodes.push(e)}.bind(this))},r.prototype.createMainNode=function(){this.mainNode=new a(this.model[0].typeinfo.name,this.serviceLocator),this.mainNode.layout={x:Math.round(this.measures.width/2),y:Math.round(this.measures.height/2)},this.mainNode.x=this.mainNode.layout.x,this.mainNode.y=this.mainNode.layout.y,this.addChild(this.mainNode)},t.exports=r},function(t,e,i){function r(t){s.call(this,t),this.createText(t),this.outline=new a.Graphics,this.addChild(this.outline)}var s=i(74),n=i(3),a=i(2),o=(i(15),i(13)),h=i(94);n(r,s),r.prototype.createText=function(t){this.titleText=new a.Text(("Select "+h(t)).toUpperCase(),o.typeLabelStyle),this.typeText=new a.Text(t.toUpperCase(),o.typeLabelStyle),this.labelText=new a.Text("Start Exploring",o.typeTitleStyle),this.textHolder=new a.DisplayObjectContainer,this.addChild(this.textHolder),this.titleText.x=-Math.round(this.titleText.width/2),this.labelText.x=-Math.round(this.labelText.width/2),this.typeText.x=-Math.round(this.typeText.width/2),this.labelText.y=-45,this.titleText.y=this.labelText.y+this.labelText.height+3,this.typeText.y=this.titleText.y+this.titleText.height,this.textHolder.addChild(this.titleText),this.textHolder.addChild(this.labelText),this.textHolder.addChild(this.typeText),this.textHolder.alpha=0},t.exports=r},function(t,e){var i=function(t){var e,i,r=/\w+/.exec(t);if(!r)return"an";i=r[0];var s=i.toLowerCase(),n=["honest","hour","hono"];for(e in n)if(0==s.indexOf(n[e]))return"an";if(1==s.length)return"aedhilmnorsx".indexOf(s)>=0?"an":"a";if(i.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/))return"an";var a=[/^e[uw]/,/^onc?e\b/,/^uni([^nmd]|mo)/,/^u[bcfhjkqrst][aeiou]/];for(e=0;e<a.length;e++)if(s.match(a[e]))return"a";return i.match(/^U[NK][AIEO]/)?"a":i==i.toUpperCase()?"aedhilmnorsx".indexOf(s[0])>=0?"an":"a":"aeiou".indexOf(s[0])>=0?"an":s.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/)?"an":"a"};"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=i:window.indefiniteArticle=i},function(t,e,i){function r(t){s.call(this,t),this.createText(t.typeinfo.name,t.value),this.createImage(conf.cdn_url+"attrs"+t.icon)}var s=i(76),n=i(3),a=i(2),o=i(15);n(r,s),r.prototype.onClick=function(){s.prototype.onClick.call(this),console.log("Change to attr graph",this.model.type,this.model.value),o("/attribute/"+this.model.type+"/"+this.model.slug)},r.prototype.createImage=function(t){this.image=new a.Sprite.fromImage(t),this.image.anchor.x=this.image.anchor.y=.5,this.image.scale.x=this.image.scale.y=.2,this.imageScale=.2,this.masker=new a.Graphics,this.image.mask=this.masker,this.addChild(this.image),this.addChild(this.masker)},t.exports=r},function(t,e,i){function r(t){this.serviceLocator=t,this.view=$(".js-detail-holder")}var s=i(97);i(15);t.exports=r,r.prototype.show=function(t,e){var i=this.serviceLocator.api.getWine(t.params.wine);i.config=conf,this.view.empty().append(s(i)),console.log(i),this.transitionIn()},r.prototype.transitionIn=function(){this.transition=new TimelineLite,this.transition.from(this.view.find(".js-back"),.3,{alpha:0}),this.transition.from(this.view.find(".js-title"),.7,{alpha:0,y:50,ease:Power4.easeOut},"-=.3"),this.transition.from(this.view.find(".js-bottle"),.7,{alpha:0,y:50,ease:Power4.easeOut},"-=.3"),this.view.find(".js-buttons a").each(function(t,e){this.transition.from(e,.5,{scale:.5,alpha:0,ease:Power4.easeOut},"-=.4")}.bind(this)),this.view.find(".js-attributes li").each(function(t,e){this.transition.from(e,.4,{alpha:0,y:30,ease:Power4.easeOut},"-=.3")}.bind(this)),this.view.show()},r.prototype.hide=function(t,e){this.transition?this.transitionOut(e):e()},r.prototype.transitionOut=function(t){this.transition.eventCallback("onReverseComplete",function(){this.view.empty().hide(),this.transition=null,t()}.bind(this)),this.transition.timeScale(2),this.transition.reverse()}},function(t,e,i){var r=i(64);t.exports=function(t){var e,i=[],s=t||{};return function(t,s,n,a,o,h,l,u,c,p){i.push('<article class="wine"><a'+r.attr("href","/wine/"+c,!0,!1)+' class="btn btn--outline js-back">Back</a><h1 class="wine__title js-title">'+r.escape(null==(e=h||u)?"":e)+'<span class="wine__name">'+r.escape(null==(e=l||o)?"":e)+'</span></h1><div class="wine-img js-bottle"><img'+r.attr("src",n.cdn_url+"wines/"+a.big,!0,!1)+'/></div><div class="btn-group wine-links js-buttons"><a'+r.attr("href",p.more,!0,!1)+' target="_blank" class="btn btn--primary">Learn More</a>'),p.buy&&p.buy.length&&i.push("<a"+r.attr("href",p.buy,!0,!1)+' target="_blank" class="btn btn--primary">Buy Online</a>'),i.push("</div>");var d=t.ceil(s.length/2);i.push('<ul class="attributes js-attributes">');for(var f=0;f<d;){var m=s[f];f++,i.push('<li class="attributes-item"><img'+r.attr("src",n.cdn_url+"attrs"+m.icon,!0,!1)+' class="attributes-item__img"/><h2 class="attributes-item__text"><div class="cell"><strong class="attributes-item__title">'+r.escape(null==(e=m.typeinfo.name)?"":e)+':</strong><div class="attributes-item__value">'+r.escape(null==(e=" "+m.value)?"":e)+"</div></div></h2></li>")}for(i.push('</ul><ul class="attributes js-attributes">');f<s.length;){var m=s[f];f++,i.push('<li class="attributes-item"><img'+r.attr("src",n.cdn_url+"attrs"+m.icon,!0,!1)+' class="attributes-item__img"/><h2 class="attributes-item__text"><div class="cell"><strong class="attributes-item__title">'+r.escape(null==(e=m.typeinfo.name)?"":e)+':</strong><div class="attributes-item__value">'+r.escape(null==(e=" "+m.value)?"":e)+"</div></div></h2></li>")}i.push("</ul></article>")}.call(this,"Math"in s?s.Math:"undefined"!=typeof Math?Math:void 0,"attributes"in s?s.attributes:"undefined"!=typeof attributes?attributes:void 0,"config"in s?s.config:"undefined"!=typeof config?config:void 0,"images"in s?s.images:"undefined"!=typeof images?images:void 0,"name"in s?s.name:"undefined"!=typeof name?name:void 0,"overview_1"in s?s.overview_1:"undefined"!=typeof overview_1?overview_1:void 0,"overview_2"in s?s.overview_2:"undefined"!=typeof overview_2?overview_2:void 0,"range"in s?s.range:"undefined"!=typeof range?range:void 0,"slug"in s?s.slug:"undefined"!=typeof slug?slug:void 0,"urls"in s?s.urls:"undefined"!=typeof urls?urls:void 0),i.join("")}}]);